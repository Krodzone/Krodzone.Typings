/*******************************************************************************************
 *
 *  KrodSpa (Krodzone's Spa Framework) provides a lightweight JavaScript based framework for
 *  creating SPA (Single Page Application) applications.
 *
 *  Copyright (C) 2005  Krodzone Technologies, LLC.
 *
 *  This program is free software: you can redistribute it and/or modify it under the terms
 *  of the GNU General Public License as published by the Free Software Foundation, either
 *  version 3 of the License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *  See the GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along with this program.
 *  If not, see <http://www.gnu.org/licenses/>.
 *
 *******************************************************************************************/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},_this=this,currentApplication,pageController,currentController,container,removeEscapeChars=function(e){try{return decodeURIComponent(e)}catch(t){return e}},settingFetcher=function(e,t){var n=void 0;if(t&&t.length>0)for(var a=0;a<t.length;a++)if(t[a].Hash.toUpperCase()===e.toUpperCase()){n=t[a];break}return n},controllerFetcher=function(e,t){var n=void 0;if(t&&t.length>0)for(var a=0;a<t.length;a++)if(t[a].Name.toUpperCase()===e.toUpperCase()){n=t[a];break}return n};$(document).ready(function(){var e=$("div[view-container]"),t=$("body")[0];if(void 0!==KrodSpa.Application.Applications&&KrodSpa.Application.Applications.length>0){var n=$("html")[0];if(n&&n.hasAttribute("application")){var a=n.getAttribute("application");if(currentApplication=KrodSpa.Application.Get(a),void 0!==currentApplication){if(void 0!==t&&$(t).attr("controller")){var o=window.location.href,r=$(t).attr("controller"),i=o.indexOf("?")>-1?o.split("?")[1].split("&"):void 0;if(pageController=controllerFetcher(r,currentApplication.Controllers),void 0!==pageController){if(void 0!==i){pageController.Scope.Parameters=new Object;for(var s=0;s<i.length;s++){var l=i[s].split("=");void 0!==l&&2===l.length&&(pageController.Scope.Parameters[l[0]]=l[1].indexOf("#")>-1?l[1].substring(0,l[1].indexOf("#")):l[1])}}currentApplication.InitializeController(pageController,t)}}if(e&&e.length>0){container=e[0];var c=window.location.hash,i=c.indexOf("?")>-1?c.split("?")[1].split("&"):void 0,p=void 0;c=c.indexOf("?")>-1?c.split("?")[0]:c,c=c.lastIndexOf("/")!==c.indexOf("/")?c.substring(0,c.lastIndexOf("/")+1)+"{id}":c,c=c.lastIndexOf("/")!==c.indexOf("/")||isNaN(parseInt(c.substring(2)))?c:"#/{id}",""!==c?(p=settingFetcher(c.replace("#",""),currentApplication.Settings),p?(currentController=controllerFetcher(p.Controller,currentApplication.Controllers),KrodSpa.Data.WebQuery.load(p.Template).then(function(e){if($(container).html(e),currentController){if(void 0!==i){currentController.Scope.Parameters=new Object;for(var t=0;t<i.length;t++){var n=i[t].split("=");void 0!==n&&2===n.length&&(currentController.Scope.Parameters[n[0]]=n[1])}}c.indexOf("{id}")>-1&&(currentController.Scope.ID=window.location.hash.substring(window.location.hash.lastIndexOf("/")+1)),currentApplication.InitializeController(currentController,container)}})["catch"](function(e){$(container).html("<h3>Error Loading View</h3>")})):(p=settingFetcher(currentApplication.DefaultHash,currentApplication.Settings),p&&(window.location.hash=p.Hash))):(p=settingFetcher(currentApplication.DefaultHash,currentApplication.Settings),p&&(window.location.hash=p.Hash))}}}}}),window.onhashchange=function(e){if(void 0!==currentApplication&&void 0!==container){var t=window.location.hash.replace("#",""),n=t.indexOf("?")>-1?t.split("?")[1].split("&"):void 0;t=t.indexOf("?")>-1?t.split("?")[0]:t,t=t.lastIndexOf("/")!==t.indexOf("/")?t.substring(0,t.lastIndexOf("/")+1)+"{id}":t,t=t.lastIndexOf("/")!==t.indexOf("/")||isNaN(parseInt(t.substring(2)))?t:"/{id}";var a=settingFetcher(t,currentApplication.Settings);a&&(currentController&&currentController.StopIterations(),currentController=controllerFetcher(a.Controller,currentApplication.Controllers),KrodSpa.Data.WebQuery.load(a.Template).then(function(e){if($(container).html(e),currentController){if(void 0!==n){currentController.Scope.Parameters=new Object;for(var a=0;a<n.length;a++){var o=n[a].split("=");void 0!==o&&2===o.length&&(currentController.Scope.Parameters[o[0]]=o[1])}}t.indexOf("{id}")>-1&&(currentController.Scope.ID=window.location.hash.substring(window.location.hash.lastIndexOf("/")+1)),currentApplication.InitializeController(currentController,container)}})["catch"](function(e){$(container).html("<h3>Error Loading View</h3>")}))}},HTMLElement.prototype.enable=function(){_this.setAttribute("disabled","")},HTMLElement.prototype.disable=function(){_this.setAttribute("disabled","disabled")},Function.prototype.toKeyString=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.toKeyString called on a non-object");var t=Object.keys(e),n="";return t.forEach(function(t){if(("string"==typeof e[t]||"number"==typeof e[t]||"boolean"==typeof e[t])&&(n=""===n?t+"="+encodeURI(e[t]):n+"&"+t+"="+encodeURI(e[t])),"object"!=typeof e[t]||"[object String]"!==Object.prototype.toString.call(e[t])&&"[object Number]"!==Object.prototype.toString.call(e[t])&&"[object Boolean]"!==Object.prototype.toString.call(e[t])||(n=""===n?t+"="+encodeURI(e[t]):n+"&"+t+"="+encodeURI(e[t])),"object"==typeof e[t]&&"[object Date]"===Object.prototype.toString.call(e[t])){var a=e[t].getMonth()+1,o=e[t].getDate(),r=e[t].getFullYear(),i=e[t].getHours()>12?e[t].getHours()-12:0==e[t].getHours()?12:e[t].getHours(),s=e[t].getMinutes(),l=e[t].getHours()>=12?"PM":"AM",c=("0"+a).slice(-2)+"/"+("0"+o).slice(-2)+"/"+String(r)+" "+("0"+i).slice(-2)+":"+("0"+s).slice(-2)+" "+l;n=""===n?t+"="+c:n+"&"+t+"="+c}}),n},Function.prototype.toJson=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.toKeyString called on a non-object");var t=Object.keys(e),n="{";return t.forEach(function(t){if(("string"==typeof e[t]||"object"==typeof e[t]&&"[object String]"===Object.prototype.toString.call(e[t]))&&(n="{"===n?n+'"'+t+'":':n+',"'+t+'":',n+='"'+e[t]+'"'),("number"==typeof e[t]||"object"==typeof e[t]&&"[object Number]"===Object.prototype.toString.call(e[t]))&&(n="{"===n?n+'"'+t+'":':n+',"'+t+'":',n+=e[t]),("boolean"==typeof e[t]||"object"==typeof e[t]&&"[object Boolean]"===Object.prototype.toString.call(e[t]))&&(n="{"===n?n+'"'+t+'":':n+',"'+t+'":',n=e[t]===!0?n+"true":n+"false"),"object"==typeof e[t]&&"[object Date]"===Object.prototype.toString.call(e[t])){var a=e[t].getMonth()+1,o=e[t].getDate(),r=e[t].getFullYear(),i=e[t].getHours(),s=e[t].getMinutes(),l=e[t].getSeconds(),c=String(r)+"-"+("0"+a).slice(-2)+"-"+("0"+o).slice(-2)+"T"+("0"+i).slice(-2)+":"+("0"+s).slice(-2)+":"+("0"+l).slice(-2);n="{"===n?n+'"'+t+'":':n+',"'+t+'":',n+='"'+c+'"'}"object"==typeof e[t]&&"[object Object]"===Object.prototype.toString.call(e[t])&&(n="{"===n?n+'"'+t+'":':n+',"'+t+'":',n+=Object.toJson(e[t]))}),n+="}"},Function.prototype.hasKey=function(e,t){for(var n=!1,a=Object.keys(e),o=0;o<a.length;o++){var r=a[o];if(r===t){n=!0;break}}return n},window.location.getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),a=n.exec(window.location.href);return null==a?"":removeEscapeChars(a[1].replace(/\+/g," "))},window.location.getAbsolutePath=function(){for(var e=window.location.protocol,t=window.location.host,n=window.location.pathname,a=n.split("/"),o=e+"//"+t,r=0;r<a.length&&-1===a[r].indexOf(".");r++)o+=a[r]+"/";return o};var Promise=function(){function e(){var e=this;e.then=function(t){return e.onResolved=t,e},e["catch"]=function(t){return e.onRejected=t,e},e.resolve=function(t){e.onResolved&&e.onResolved(t)},e.reject=function(t){e.onRejected&&e.onRejected(t)}}return e}(),KrodSpa;!function(e){!function(e){e[e.Int=0]="Int",e[e.Float=1]="Float",e[e.Date=2]="Date",e[e.Time=3]="Time",e[e.DateTime=4]="DateTime",e[e.Boolean=5]="Boolean",e[e.String=6]="String"}(e.DataTypeArgs||(e.DataTypeArgs={}));var t=e.DataTypeArgs,n=function(){function e(){}return e.Instance=function(){var n=new e;return n.INT=t.Int,n.FLOAT=t.Float,n.DATE=t.Date,n.TIME=t.Time,n.DATETIME=t.DateTime,n.BOOLEAN=t.Boolean,n.STRING=t.String,n},e}();e.DataTypeCollection=n;var a=function(){function t(t){var n=this;this.Config=function(e){if(e&&e.length)for(var t=0;t<e.length;t++)!function(e,t){for(var n,a=-1,r=0;r<e.length;r++)if(e[r].Hash.toUpperCase()===t.Hash.toUpperCase()){a=r;break}-1===a?(n=new o(t.Hash?t.Hash:"",t.Template?t.Template:"",t.Controller?t.Controller:""),e.push(n)):(e[a].Hash=t.Hash?t.Hash:e[a].Hash,e[a].Template=t.Template?t.Template:e[a].Template,e[a].Controller=t.Controller?t.Controller:e[a].Controller)}(n.Settings,e[t]);return n},this.Default=function(e){return n.DefaultHash=e,n},this.Controller=function(e,t){for(var a,o=-1,i=0;i<n.Controllers.length;i++)if(n.Controllers[i].Name.toUpperCase()===e.toUpperCase()){o=i;break}return-1===o?(a=new r(e,t),n.Controllers.push(a),n.$rootScope[e]=a):(n.Controllers[o].Name=e,n.Controllers[o].Module=t),n},this.InitializeController=function(t,a){return t.Module(t.Scope,e.Data.WebQuery),setTimeout(function(){var e=a.getElementsByTagName("variable");if(void 0!==e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n].hasAttribute("model")){var o,r=e[n].getAttribute("model");if(r.indexOf(".")>-1){var i=r.split(".");o=i[0]}else o=r;t.Scope[o]&&t.WatchProperty(e[n],r)}var s=$(a).find("[click]");if(s&&s.length>0)for(var n=0;n<s.length;n++)!function(e){var n=s[e],a=s[e].getAttribute("click");a=a.substring(0,a.indexOf("(")),t.Scope[a]&&$(n).on("click",function(e){t.Scope[a](e)})}(n);var l=$(a).find("[binding]");if(l&&l.length>0)for(var n=0;n<l.length;n++){var c=l[n],p=g.CreateBoundField(t.Scope,c);t.BoundFields.push(p)}t.SetView(a)},200),n};var a=this;a.Name=t,a.DefaultHash="",a.Controllers=new Array,a.Settings=new Array,a.$rootScope=new Object}return t.Create=function(e){var n;t.Applications||(t.Applications=new Array);for(var a=0;a<t.Applications.length;a++)if(t.Applications[a].Name.toUpperCase()===e.toUpperCase()){n=t.Applications[a];break}return void 0===n&&(n=new t(e),t.Applications.push(n)),n},t.Get=function(e){var n=void 0;if(t.Applications)for(var a=0;a<t.Applications.length;a++)if(t.Applications[a].Name.toUpperCase()===e.toUpperCase()){n=t.Applications[a];break}return n},t}();e.Application=a;var o=function(){function e(e,t,n){var a=this;a.Hash=e,a.Template=t,a.Controller=n}return e}();e.ConfigSetting=o;var r=function(){function t(t,n){var a=this;this.GetDynamicValue=function(e,t){return e?e:t},this.GetObject=function(e){var t;if(e.indexOf(".")>-1){var n=e.split(".");switch(n.length){case 2:a.Scope[n[0]]||(a.Scope[n[0]]=new Object),t=a.Scope[n[0]];break;case 3:a.Scope[n[0]]||(a.Scope[n[0]]=new Object),a.Scope[n[0]][n[1]]||(a.Scope[n[0]][n[1]]=new Object),t=a.Scope[n[0]][n[1]];break;case 4:a.Scope[n[0]]||(a.Scope[n[0]]=new Object),a.Scope[n[0]][n[1]]||(a.Scope[n[0]][n[1]]=new Object),a.Scope[n[0]][n[1]][n[2]]||(a.Scope[n[0]][n[1]][n[2]]=new Object),t=a.Scope[n[0]][n[1]][n[2]];break;case 5:a.Scope[n[0]]||(a.Scope[n[0]]=new Object),a.Scope[n[0]][n[1]]||(a.Scope[n[0]][n[1]]=new Object),a.Scope[n[0]][n[1]][n[2]]||(a.Scope[n[0]][n[1]][n[2]]=new Object),a.Scope[n[0]][n[1]][n[2]][n[3]]||(a.Scope[n[0]][n[1]][n[2]][n[3]]=new Object),t=a.Scope[n[0]][n[1]][n[2]][n[3]]}}else t=a.Scope;return t},this.GetModelValue=function(e){var t;if(e.indexOf(".")>-1){var n=e.split(".");switch(n.length){case 2:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.Scope[n[0]][n[1]]?a.Scope[n[0]][n[1]]:"",t=a.Scope[n[0]][n[1]];break;case 3:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.Scope[n[0]][n[1]][n[2]]?a.Scope[n[0]][n[1]][n[2]]:"",t=a.Scope[n[0]][n[1]][n[2]];break;case 4:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.Scope[n[0]][n[1]][n[2]][n[3]]?a.Scope[n[0]][n[1]][n[2]][n[3]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]];break;case 5:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]];break;case 6:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]];break;case 7:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]];break;case 8:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]];break;case 9:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]];break;case 10:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]]=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]]?a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]]:"",t=a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]]}}else a.Scope[e]=a.Scope[e]?a.Scope[e]:"",t=a.Scope[e];return t},this.SetModelValue=function(e,t){if(e.indexOf(".")>-1){var n=e.split(".");switch(n.length){case 2:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=t;break;case 3:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=t;break;case 4:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=t;break;case 5:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=t;break;case 6:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=t;break;case 7:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=t;break;case 8:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=t;break;case 9:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]=t;break;case 10:a.Scope[n[0]]=a.EnsureObjectExists(a.Scope[n[0]]),a.Scope[n[0]][n[1]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]]),a.Scope[n[0]][n[1]][n[2]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]]),a.Scope[n[0]][n[1]][n[2]][n[3]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]=a.EnsureObjectExists(a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]]),a.Scope[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]][n[6]][n[7]][n[8]][n[9]]=t}}else a.Scope[e]=a.Scope[e]?a.Scope[e]:"",t=a.Scope[e];return t},this.EnsureObjectExists=function(e){return e?e:new Object};var o=this;if(o.Name=t,o.Module=n,o.Dependencies=new Array,o.BoundFields=new Array,o.Scope=new Object,o.Iterations=new p,o.StopIterations=function(){void 0!==o.Iterations&&o.Iterations.StopAll()},o.SetView=function(e){o.View=e;var t=$$(o.View).find("[iteration]");if(void 0!==t&&null!==t&&void 0!==t.length){for(var n=0;n<t.length;n++){var a;try{a=new i(o.View,t[n].Element,o.Scope)}catch(r){a=void 0}o.Iterations.Add(a)}o.Iterations.RenderAll()}},o.WatchProperty=function(e,t){setInterval(function(e,t){var n=e.innerHTML,a=o.GetObject(t);if(a)if(t.indexOf(".")>-1){var r=t.split(".");switch(r.length){case 2:n=o.GetDynamicValue(a[r[1]],e.innerHTML);break;case 3:n=o.GetDynamicValue(a[r[2]],e.innerHTML);break;case 4:n=o.GetDynamicValue(a[r[3]],e.innerHTML);break;case 5:n=o.GetDynamicValue(a[r[4]],e.innerHTML)}}else n=o.GetDynamicValue(o.Scope[t],e.innerHTML);e.innerHTML=removeEscapeChars(n)},200,e,t)},o.Scope.ShowModal=function(t,n){var a=new Array,r=t.getElementsByTagName("variable");if(void 0!==r&&r.length>0)for(var s=0;s<r.length;s++)if(r[s].hasAttribute("model")){var l,c=r[s].getAttribute("model");if(c.indexOf(".")>-1){var d=c.split(".");l=d[0]}else l=c;o.Scope[l]&&o.WatchProperty(r[s],c)}var u=$(t).find("[click]");if(u&&u.length>0)for(var s=0;s<u.length;s++)!function(e){var t=u[e],n=u[e].getAttribute("click");n=n.substring(0,n.indexOf("(")),o.Scope[n]&&$(t).on("click",function(e){o.Scope[n](e)})}(s);e.Views.ModalWindow.showDialog(t,new e.Views.ModalWindowArgs(o.Scope,n.ModalWidth,n.ModalCaption,n.FooterText,n.ExecutionHtml,n.CancelHtml,n.ShowExecuteButton,n.ShowCancelButton,function(e){var t;t=function(t,n){e(t,n)},n.ExecuteButtonCallback(t),o.Iterations.Refresh()},n.CancelButtonCallback)),setTimeout(function(){var e=$(t).find("[binding]");if(e&&e.length>0)for(var n=0;n<e.length;n++){var r=e[n],s=g.CreateBoundField(o.Scope,r);a.push(s)}var l=new p,c=$$(t).find("[iteration]");if(void 0!==c&&null!==c&&void 0!==c.length){for(var n=0;n<c.length;n++){var d;try{d=new i(t,c[n].Element,o.Scope)}catch(u){d=void 0}l.Add(d)}l.RenderAll()}},200)},o.Scope.ShowMessageBox=function(t,n,a,r,i){e.Views.MessageBox.showDialog(t,n,a,r,new e.Views.MessageBoxWindowArgs(o.Scope,"modal-400",n,r,i))},n.arguments)if(n.arguments.length)for(var r=0;r<n.arguments.length;r++)o.Dependencies.push(n.arguments[r]);else o.Dependencies.push(n.arguments)}return t}();e.Controller=r;var i=function(){function t(t,n,a){var o=this;this.IntervalID=-1,this.GetModel=function(e){var t;if(void 0!==o.Scope)if(e.indexOf(".")>-1)for(var n=e.split("."),a=0;a<n.length;a++)t=void 0===t?o.Scope[n[a]]:t[n[a]];else t=o.Scope[e];return t};var r=this,i=new e.Data.FilterObjectCollection,p=new Array,d=function(e,t){e===s.Desktop?r.IterationViews.DesktopView.UpdatePaginationValues(t):r.IterationViews.DesktopView.UpdatePaginationValues(t)};if(r.StartWatch=function(){void 0!==r.Element&&void 0!==r.Model&&null!==r.Model&&(r.IntervalID=setInterval(function(e){e.UpdateView()},500,r.SelectedView))},r.EndWatch=function(){clearInterval(r.IntervalID)},r.Refresh=function(){r.Model&&i&&r.SelectedView.UpdateDisplay()},r.Element=n,r.Scope=a,r.IterationViews=new l,r.Element){var u=$$(r.Element).attrKVP("iteration");if(r.Model=r.GetModel(u.MODEL?u.MODEL:""),!r.Model)return;var g=$$(r.Element).find("[template]");g.each(function(e){var t=$$(e).attrKVP("template");if(t.TYPE){var n=new c(e.Element,r.Scope,r.Model,p,d);switch(t.TYPE.toUpperCase()){case"DESKTOP":r.IterationViews.Add(s.Desktop,n);break;default:r.IterationViews.Add(s.Mobile,n)}}}),$$(r.IterationViews.DesktopView.MainElement).hide(),$$(r.IterationViews.MobileView.MainElement).hide();var h=$$(document).width();h>=500?($$(r.IterationViews.DesktopView.MainElement).show(),r.SelectedView=r.IterationViews.DesktopView):($$(r.IterationViews.MobileView.MainElement).show(),r.SelectedView=r.IterationViews.MobileView),window.addEventListener("resize",function(e){setTimeout(function(){var e=$$(document).width();e>=500?$$(r.IterationViews.DesktopView.MainElement).visible()||($$(r.IterationViews.MobileView.MainElement).hide(),$$(r.IterationViews.DesktopView.MainElement).show(),r.SelectedView=r.IterationViews.DesktopView,r.SelectedView.UpdateView()):$$(r.IterationViews.MobileView.MainElement).visible()||($$(r.IterationViews.DesktopView.MainElement).hide(),$$(r.IterationViews.MobileView.MainElement).show(),r.SelectedView=r.IterationViews.MobileView,r.SelectedView.UpdateView())},100)})}setTimeout(function(){p.forEach(function(e){var t=e.Control instanceof HTMLInputElement?e.Control:void 0;void 0!==t&&"INPUT"===t.tagName.toUpperCase()&&"CHECKBOX"!==t.type.toUpperCase()&&$(e.Control).on("keyup",function(t){i.Add(e.Attribute,$(this).val(),5),r.FilteredItems=r.Model.filter(i.MeetsCriteria),r.FilteredItems&&r.SelectedView.UpdateView(r.FilteredItems)})})},500);var f=r.Model&&r.Model.length?r.Model.length:0;setInterval(function(){r.Model&&r.Model.length?r.Model.length!==f&&(f=r.Model.length,r.FilteredItems=r.Model.filter(i.MeetsCriteria),r.SelectedView.UpdateView()):(r.Model=[],r.FilteredItems=[])},100)}return t}();!function(e){e[e.Desktop=1]="Desktop",e[e.Mobile=2]="Mobile"}(e.IterationTemplateType||(e.IterationTemplateType={}));var s=e.IterationTemplateType,l=function(){function e(){var e=this,t=this;t._iterationViews=new Array,t._iterationViews.push(void 0),t._iterationViews.push(void 0),t.Add=function(t,n){t&&(t===s.Desktop?e._iterationViews[0]=n?n:void 0:e._iterationViews[1]=n?n:void 0)}}return Object.defineProperty(e.prototype,"DesktopView",{get:function(){return this._iterationViews[0]?this._iterationViews[1]?this._iterationViews[0]:this._iterationViews[1]:this._iterationViews[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MobileView",{get:function(){return this._iterationViews[1]?this._iterationViews[0]?this._iterationViews[1]:this._iterationViews[0]:this._iterationViews[1]},enumerable:!0,configurable:!0}),e}(),c=function(){function t(e,t,n,a,o){var r=this;this.TemplateType=s.Desktop,this.PageTotal=15,this.ShowFilterText='Show Filter <i class="fa fa- chevron - down" aria-hidden="true"></i>',this.HideFilterText='Hide Filter <i class="fa fa-chevron-up" aria-hidden="true"></i>',this.TotalItems=-1,this.IntervalID=-1,this.UpdateDisplay=function(){if(void 0!==r.FilteredItems&&null!==r.FilteredItems&&void 0!==r.FilteredItems.length&&r.FilteredItems.length>0){if(void 0!==r.PaginationCtl&&r.PageTotal>0){r.TotalPages=r.PageTotal>0&&void 0!==r.FilteredItems&&null!==r.FilteredItems&&void 0!==r.FilteredItems.length?Math.ceil(r.FilteredItems.length/r.PageTotal):1,r.PageIndex=r.PageIndex+1>r.TotalPages?r.TotalPages-1:r.PageIndex;var e=r.PageIndex*r.PageTotal,t=e+r.PageTotal>r.FilteredItems.length?r.FilteredItems.length:e+r.PageTotal;r.DisplayItems(r.FilteredItems.slice(e,t)),$(r.PaginationCtl).find('[pagination-display="true"]').html("Page "+(r.PageIndex+1)+" of "+r.TotalPages)}else r.DisplayItems(r.FilteredItems)}},this.DisplayItems=function(e){var t=0,n=/\{\{\w{1,}\}\}/gm,a="",o=new Promise,i=r.ModelTemplate.toString();if(o.then(function(e){$$(e.View.TemplateContainer).html(""!==e.HTML?e.HTML:e.View.NoItemTemplate);var t=$$(e.View.TemplateContainer).find("[click]");void 0!==e.View.Scope&&void 0!==t&&null!==t&&void 0!==t.length&&$$(t).each(function(t){var n=$$(t).attr("click").toString().split("("),a=n&&n.length&&2===n.length?n[0]:void 0,o=isNaN(parseInt($$(t).attr("index")))?-1:parseInt($$(t).attr("index").toString()),r=n&&n.length&&2===n.length?new Object:void 0;if(a){if(r&&o>-1){var i=n[1].replace(")","").split(",");if(r.Refresh=e.View.UpdateDisplay,i&&i.length)for(var s=0;s<i.length;s++)if(i[s].trim().indexOf("$item.")>-1){var l=i[s].trim().replace("$item.","");""!==l&&e.View.FilteredItems[o][l]&&(r[l]=e.View.FilteredItems[o][l])}}$$(t).on("click",function(t){e.View.Scope[a](e.View.FilteredItems[o],r)})}})}),void 0!==e&&null!==e&&void 0!==e.length&&void 0!==o&&null!==o&&""!==i.trim())for(var s=0;s<e.length;s++)!function(r,s){var l=i.replace('hidden="hidden"',""),c=l.match(n),p=s.PageIndex*s.PageTotal;c.forEach(function(t){var n=t.replace("{{","").replace("}}","").trim(),a=void 0!==e[r][n]?removeEscapeChars(e[r][n]):"",o=new RegExp("{{"+n+"}}","gm");l=l.replace(o,a)});var d=document.createElement(s.TemplateContainer.nodeName);$$(d).html(l);var u=$$(d).find("[click]");if(void 0!==u&&null!==u&&void 0!==u.length&&($$(u).each(function(e){$$(e).attr("index",r+p)}),l=$$(d).html()),a+=l,t++,t===e.length){var g={View:s,HTML:a};o.resolve(g)}}(s,r)},this.CreateNavigationButton=function(e,t){var n=document.createElement("button");return $$(n).addClass("btn"),$$(n).addClass("btn-default"),r.TemplateType===s.Desktop?($$(n).addClass("btn-xs"),$$(n).css({width:"23px",height:"23px","float":"left",margin:"1.5px"})):($$(n).addClass("btn-sm"),$$(n).css({width:"30px",height:"30px","float":"left",margin:"1.5px"})),$$(n).html(e),n.onclick=t,n};var i=this;if(i.First=function(e){if(i.FilteredItems){i.PageIndex=0;var t=i.PageIndex*i.PageTotal,n=t+i.PageTotal>i.FilteredItems.length?i.FilteredItems.length:t+i.PageTotal;i.DisplayItems(i.FilteredItems.slice(t,n)),$(i.PaginationCtl).find('[pagination-display="true"]').html("Page "+(i.PageIndex+1)+" of "+i.TotalPages),o&&o(i.TemplateType,t)}},i.Previous=function(e){if(i.FilteredItems){i.PageIndex=i.PageIndex-1<0?0:i.PageIndex-1;var t=i.PageIndex*i.PageTotal,n=t+i.PageTotal>i.FilteredItems.length?i.FilteredItems.length:t+i.PageTotal;i.DisplayItems(i.FilteredItems.slice(t,n)),$(i.PaginationCtl).find('[pagination-display="true"]').html("Page "+(i.PageIndex+1)+" of "+i.TotalPages),o&&o(i.TemplateType,t)}},i.Next=function(e){if(i.FilteredItems){i.PageIndex=i.PageIndex+2>i.TotalPages?i.TotalPages-1:i.PageIndex+1;var t=i.PageIndex*i.PageTotal,n=t+i.PageTotal>i.FilteredItems.length?i.FilteredItems.length:t+i.PageTotal;i.DisplayItems(i.FilteredItems.slice(t,n)),$(i.PaginationCtl).find('[pagination-display="true"]').html("Page "+(i.PageIndex+1)+" of "+i.TotalPages),o&&o(i.TemplateType,t)}},i.Last=function(e){if(i.FilteredItems){i.PageIndex=i.TotalPages-1;var t=i.PageIndex*i.PageTotal,n=t+i.PageTotal>i.FilteredItems.length?i.FilteredItems.length:t+i.PageTotal;i.DisplayItems(i.FilteredItems.slice(t,n)),$(i.PaginationCtl).find('[pagination-display="true"]').html("Page "+(i.PageIndex+1)+" of "+i.TotalPages),o&&o(i.TemplateType,t)}},i.MainElement=e,i.Scope=t,i.FilteredItems=n,i.UpdateView=function(e){if(i.FilteredItems=e?e:i.FilteredItems,void 0!==i.FilteredItems&&null!==i.FilteredItems&&void 0!==i.FilteredItems.length&&i.FilteredItems.length>0){if(i.FilteredItems.length!==i.TotalItems){i.TotalItems=i.FilteredItems.length;if(void 0!==i.PaginationCtl&&i.PageTotal>0){i.TotalPages=i.PageTotal>0&&void 0!==i.FilteredItems&&null!==i.FilteredItems&&void 0!==i.FilteredItems.length?Math.ceil(i.FilteredItems.length/i.PageTotal):1,i.PageIndex=i.PageIndex+1>i.TotalPages?i.TotalPages-1:i.PageIndex;var t=i.PageIndex*i.PageTotal,n=t+i.PageTotal>i.FilteredItems.length?i.FilteredItems.length:t+i.PageTotal;i.DisplayItems(i.FilteredItems.slice(t,n)),$(i.PaginationCtl).find('[pagination-display="true"]').html("Page "+(i.PageIndex+1)+" of "+i.TotalPages)}else i.DisplayItems(i.FilteredItems)}}else i.TotalItems=0,void 0!==i.NoItemTemplate?$(i.TemplateContainer).html(i.NoItemTemplate.replace('hidden="hidden"',"")):$(i.TemplateContainer).html("<h4>No Data</h4>");
},i.UpdatePaginationValues=function(e){},i.MainElement){var l=new Promise;l.then(function(e){$$("").isString(e)&&$$(i.MainElement).html(e),i.InitializeView(a),i.ModelTemplate=i.GetHtmlTemplate("data",void 0),i.LoadingTemplate=i.GetHtmlTemplate("dataloading",'<i class="fa fa-refresh fa-spin fa-fw"></i>&nbsp;&nbsp;<span>Loading Data...</span>'),i.NoItemTemplate=i.GetHtmlTemplate("nodata",void 0),i.PageIndex=0,i.TemplateContainer&&($$(i.TemplateContainer).clear(),$$(i.TemplateContainer).html(i.LoadingTemplate)),i.PaginationCtl&&i.InitializePagination(o),i.FilterToggle&&i.FilterContainer&&($$(i.FilterToggle).html(i.ShowFilterText),$$(i.FilterContainer).hide(),$$(i.FilterToggle).on("click",function(e){$$(i.FilterContainer).toggle(),$$(i.FilterContainer).visible()?$$(i.FilterToggle).html(i.HideFilterText):$$(i.FilterToggle).html(i.ShowFilterText)}))}),i.LoadTemplate(l)}else i.MainElement=document.createElement("div"),$$(i.MainElement).html("<h4>Invalid Iteration Template</h4>")}return Object.defineProperty(t.prototype,"width",{get:function(){return this.MainElement?$$(this.MainElement).width():0},enumerable:!0,configurable:!0}),t.prototype.LoadTemplate=function(t){var n=$$(this.MainElement).attrKVP("template");if(t)if(n.SRC){var a=window.location.getAbsolutePath()+n.SRC;e.Data.WebQuery.load(a,!1).then(function(e){t.resolve(e)})}else t.resolve(this)},t.prototype.InitializeView=function(e){var t=$$(this.MainElement).attrKVP("template"),n=$$(this.MainElement).attrKVP("pagination"),a=$$(this.MainElement).attrKVP("filter"),o=void 0;if(t.CONTAINERID&&(o=$$(this.MainElement).find("#"+t.CONTAINERID),this.TemplateContainer=o.length>0?o[0].Element:void 0),t.TYPE&&(this.TemplateType="MOBILE"===t.TYPE.toUpperCase()?s.Mobile:s.Desktop),this.TemplateContainer){if(n.CONTAINERID&&(o=$$(this.MainElement).find("#"+n.CONTAINERID),this.PaginationCtl=o.length>0?o[0].Element:void 0),n.PAGETOTAL&&!isNaN(n.PAGETOTAL)?this.PageTotal=n.PAGETOTAL:this.PageTotal=this.TemplateType===s.Mobile?1:this.PageTotal,a.SHOWTEXT&&(this.ShowFilterText=a.SHOWTEXT),a.HIDETEXT&&(this.HideFilterText=a.HIDETEXT),a.TOGGLE)for(var r=a.TOGGLE.split(","),i=0;i<r.length;i++){var l=r[i].trim().split("=");if(2===l.length)switch(l[0].trim().toUpperCase()){case"TOGGLEID":o=$$(this.MainElement).find("#"+l[1].trim()),this.FilterToggle=o.length>0?o[0].Element:void 0;break;case"CONTAINERID":o=$$(this.MainElement).find("#"+l[1].trim()),this.FilterContainer=o.length>0?o[0].Element:void 0}}if(a.FIELDS)for(var c=a.FIELDS.split(","),i=0;i<c.length;i++){var p=c[i].trim().split("=");2===p.length&&(o=$$(this.MainElement).find("#"+p[1].trim()),o.length>0&&e.push(new d(p[0].trim(),o[0].Element)))}}else this.MainElement=document.createElement("div"),$$(this.MainElement).html("<h4>Invalid Iteration Template</h4>")},t.prototype.InitializePagination=function(e){var t=document.createElement("div"),n=this.CreateNavigationButton('<i class="fa fa-angle-double-left" aria-hidden="true"></i>',this.First),a=this.CreateNavigationButton('<i class="fa fa-angle-left" aria-hidden="true"></i>',this.Previous),o=this.CreateNavigationButton('<i class="fa fa-angle-right" aria-hidden="true"></i>',this.Next),r=this.CreateNavigationButton('<i class="fa fa-angle-double-right" aria-hidden="true"></i>',this.Last);if(this.PaginationDisplay=document.createElement("div"),$$(this.PaginationDisplay).css({"font-family":"'Lucida Sans Unicode', Arial, Helvetica, sans-serif",color:"#333","-webkit-border-radius":"3px","-moz-border-radius":"3px","-ms-border-radius":"3px","border-radius":"3px",border:"1px solid #666","float":"left",margin:"1.5px","font-size":"0.85em","text-align":"center","min-width":"150px",height:"23px","padding-top":"2px","font-weight":"bold"}),$$(this.PaginationDisplay).attr("pagination-display","true"),this.TemplateType===s.Desktop)$$(t).css({display:"inline-table",height:"35px"}),$$(t).append(n),$$(t).append(a),$$(t).append(this.PaginationDisplay),$$(t).append(o),$$(t).append(r);else{var i=document.createElement("div"),l=document.createElement("div");$$(this.PaginationDisplay).css({width:"125px","min-width":"125px","max-width":"125px","float":"left",margin:"1.5px"}),$$(l).css({display:"inline-table",height:"35px",width:"100%"}),$$(i).css({display:"inline-table",height:"35px",width:"100%"}),$$(l).append(this.PaginationDisplay),$$(i).append(n),$$(i).append(a),$$(i).append(o),$$(i).append(r),$$(t).css({display:"inline-block",height:"70px"}),$$(t).append(l),$$(t).append(i)}$$(this.PaginationCtl).append(t)},t.prototype.GetHtmlTemplate=function(e,t){var n=$$(this.TemplateContainer).find("[template-type="+e+"]");return n.length>0?n.body():t},t.prototype.Sleep=function(e){for(var t=0;e>t;t++)console.count()},t}(),p=function(){function e(){var e=this;e.Iterations=new Array,e.Add=function(t){void 0!==t&&(t.StartWatch(),e.Iterations.push(t))},e.Refresh=function(){e.Iterations.forEach(function(e){e.Refresh()})},e.RenderAll=function(){e.Iterations.forEach(function(e){e.StartWatch()})},e.StopAll=function(){e.Iterations.forEach(function(e){e.EndWatch()})}}return e}();e.IterationCollection=p;var d=function(){function e(e,t){var n=this;n.Attribute=e,n.Control=t}return e}(),u=function(){function e(){}return e}();e.BindingModel=u;var g=function(){function e(e,a){var o=this;this.SetDefaultValue=function(e,t,n){if(e.indexOf(".")>-1){var a=e.split(".");switch(a.length){case 2:o.Scope[a[0]]||(o.Scope[a[0]]=new Object),o.Model=o.Scope[a[0]],o.PropertyName=a[1],o.Model[o.PropertyName]||(o.Model[o.PropertyName]=o.Cast(t,n,o.Model[o.PropertyName]));break;case 3:o.Scope[a[0]]||(o.Scope[a[0]]=new Object),o.Scope[a[0]][a[1]]||(o.Scope[a[0]][a[1]]=new Object),o.Model=o.Scope[a[0]][a[1]],o.PropertyName=a[2],o.Model[o.PropertyName]||(o.Model[o.PropertyName]=o.Cast(t,n,o.Model[o.PropertyName]));break;case 4:o.Scope[a[0]]||(o.Scope[a[0]]=new Object),o.Scope[a[0]][a[1]]||(o.Scope[a[0]][a[1]]=new Object),o.Scope[a[0]][a[1]][a[2]]||(o.Scope[a[0]][a[1]][a[2]]=new Object),o.Model=o.Scope[a[0]][a[1]][a[2]],o.PropertyName=a[3],o.Model[o.PropertyName]||(o.Model[o.PropertyName]=o.Cast(t,n,o.Model[o.PropertyName]));break;case 5:o.Scope[a[0]]||(o.Scope[a[0]]=new Object),o.Scope[a[0]][a[1]]||(o.Scope[a[0]][a[1]]=new Object),o.Scope[a[0]][a[1]][a[2]]||(o.Scope[a[0]][a[1]][a[2]]=new Object),o.Scope[a[0]][a[1]][a[2]][a[3]]||(o.Scope[a[0]][a[1]][a[2]][a[3]]=new Object),o.Model=o.Scope[a[0]][a[1]][a[2]][a[3]],o.PropertyName=a[4],o.Model[o.PropertyName]||(o.Model[o.PropertyName]=o.Cast(t,n,o.Model[o.PropertyName]))}}else o.Model=o.Scope,o.PropertyName=e,o.Model[o.PropertyName]||(o.Model[o.PropertyName]=o.Cast(t,n,o.Model[o.PropertyName]))},this.GetObject=function(e){var t;if(e.indexOf(".")>-1){var n=e.split(".");switch(n.length){case 2:o.Scope[n[0]]||(o.Scope[n[0]]=new Object),t=o.Scope[n[0]];break;case 3:o.Scope[n[0]]||(o.Scope[n[0]]=new Object),o.Scope[n[0]][n[1]]||(o.Scope[n[0]][n[1]]=new Object),t=o.Scope[n[0]][n[1]];break;case 4:o.Scope[n[0]]||(o.Scope[n[0]]=new Object),o.Scope[n[0]][n[1]]||(o.Scope[n[0]][n[1]]=new Object),o.Scope[n[0]][n[1]][n[2]]||(o.Scope[n[0]][n[1]][n[2]]=new Object),t=o.Scope[n[0]][n[1]][n[2]];break;case 5:o.Scope[n[0]]||(o.Scope[n[0]]=new Object),o.Scope[n[0]][n[1]]||(o.Scope[n[0]][n[1]]=new Object),o.Scope[n[0]][n[1]][n[2]]||(o.Scope[n[0]][n[1]][n[2]]=new Object),o.Scope[n[0]][n[1]][n[2]][n[3]]||(o.Scope[n[0]][n[1]][n[2]][n[3]]=new Object),t=o.Scope[n[0]][n[1]][n[2]][n[3]]}}else t=o.Scope;return t},this.Cast=function(e,n,a){if(void 0===a&&(a=void 0),n===t.Int||n===t.Float)return isNaN(n===t.Int?parseInt(e):parseFloat(e))?void 0===a||isNaN(n===t.Int?parseInt(a):parseFloat(a))?0:n===t.Int?parseInt(a):parseFloat(a):n===t.Int?parseInt(e):parseFloat(e);if(!(void 0===e||null===e||"Invalid Date"===new Date(e).toDateString()&&"Invalid Date"===new Date("1/1/1900 "+e).toDateString()||n!==t.Date&&n!==t.Time&&n!==t.DateTime)){var o=n===t.Time?"1/1/1900 "+e:e,r="TODAY"===e.toUpperCase()?new Date:new Date(o);if("Invalid Date"!==r.toDateString()){var i=r.getMonth()+1,s=r.getDate(),l=r.getFullYear(),c=r.getHours()>12?r.getHours()-12:0==r.getHours()?12:r.getHours(),p=r.getMinutes(),d=r.getSeconds(),u=r.getHours()>=12?"PM":"AM";if(n===t.Date)return new String(("0"+i).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(l));if(n===t.Time)return c=r.getHours(),new String(("0"+c).slice(-2)+":"+("0"+p).slice(-2)+":"+("0"+d).slice(-2));if(n===t.DateTime)return new String(("0"+i).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(l)+" "+("0"+c).slice(-2)+":"+("0"+p).slice(-2)+" "+u)}}if(n===t.Boolean)if(void 0!==e&&null!==e){if("boolean"==typeof e)return e;if("object"==typeof e&&"[object Boolean]"===Object.prototype.toString.call(e))return e;if("true"===e==!0||"false"===e==!0)return new Boolean(e)}else{if(void 0===a||null===a)return!1;if("boolean"==typeof a)return a;if("object"==typeof a&&"[object Boolean]"===Object.prototype.toString.call(a))return a;if("true"===a==!0||"false"===a==!0)return new Boolean(a)}return n===t.String?new String(void 0!==e?encodeURIComponent(e):""):void 0},this.GetParameterValue=function(e,t){for(var n=0;n<t.length;n++){var a=t[n].split(":");if(a&&2===a.length&&a[0].trim().toUpperCase()===e.toUpperCase())return a[1].trim()}return void 0};var r=this;r.Scope=e,r.Field=a;var i=$(r.Field).attr("binding").split(";");if(i&&i.length>0){var s=r.GetParameterValue("DATATYPE",i),l=r.GetParameterValue("MODEL",i),c=r.GetParameterValue("DEFAULTVALUE",i),p=r.GetParameterValue("GET",i),d=r.GetParameterValue("SET",i);n.Instance()[s.toUpperCase()],n.Instance().INT;r.DataType=void 0!==n.Instance()[s.toUpperCase()]?n.Instance()[s.toUpperCase()]:t.String,r.FullModel=l,r.SetDefaultValue(l,c,r.DataType),void 0!==r.Scope[p]&&(r.Get=r.Scope[p]),void 0!==r.Scope[d]&&(r.Set=r.Scope[d])}}return e.CreateBoundField=function(e,t){if(void 0===e||void 0===t)return void 0;switch(t.tagName.toUpperCase()){case"SELECT":return new h(e,t);case"INPUT":var n=t.type;return"CHECKBOX"===n.toUpperCase()?new m(e,t):new f(e,t);case"TEXTAREA":return new v(e,t)}},e}();e.BoundFieldBase=g;var h=function(e){function t(t,n){var a=this;e.call(this,t,n),this.OptionsChanged=function(e){if(a.SelectField.options&&a.SelectField.options.length&&e&&e.length){if(a.SelectField.options.length===e.length){for(var t=0;t<e.length;t++){for(var n=e[t],o=!1,r=0;r<a.SelectField.options.length;r++){var i=a.SelectField.options[r];if(n.isSameNode(i)){o=!0;break}}if(!o)return!0}return!1}return!0}return!0};var o,r=this,i=!1;r.SelectField=n,r.SelectField.selectedIndex=-1,r.Options=new Array;for(var s=0;s<r.SelectField.options.length;s++){var l=r.SelectField.options[s];r.Options.push(l)}r.SelectField.onchange=function(e){i=!0,r.Get?(r.Model[r.PropertyName]=r.Get(),o=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(removeEscapeChars(r.SelectField.value),r.DataType),o=r.Model[r.PropertyName]),i=!1},setInterval(function(){if(!i){if(r.Model=r.GetObject(r.FullModel),r.OptionsChanged(r.Options)){r.SelectField.selectedIndex=-1,r.Options=new Array;for(var e=0;e<r.SelectField.options.length;e++){var t=r.SelectField.options[e];r.Options.push(t)}r.Set?r.Set(r.SelectField,r.Model):r.SelectField.value=removeEscapeChars(r.Model[r.PropertyName])}r.Model[r.PropertyName]!==o&&(r.Set?r.Set(r.SelectField,r.Model):r.SelectField.value=removeEscapeChars(r.Model[r.PropertyName]),o=r.Model[r.PropertyName])}},1e3)}return __extends(t,e),t}(g);e.BoundSelectField=h;var f=function(e){function t(t,n){e.call(this,t,n);var a=this,o=a.Model[a.PropertyName],r=!1;a.InputField=n,a.InputField.value=removeEscapeChars(a.Model[a.PropertyName]),a.InputField.onkeyup=function(e){r=!0,void 0!==a.Get?(a.Model[a.PropertyName]=a.Get(),o=a.Model[a.PropertyName]):(a.Model[a.PropertyName]=a.Cast(a.InputField.value,a.DataType),o=a.Model[a.PropertyName]),r=!1},a.InputField.onchange=function(e){r=!0,void 0!==a.Get?(a.Model[a.PropertyName]=a.Get(),o=a.Model[a.PropertyName]):(a.Model[a.PropertyName]=a.Cast(a.InputField.value,a.DataType),o=a.Model[a.PropertyName]),r=!1},setInterval(function(){r||(a.Model=a.GetObject(a.FullModel),a.Model[a.PropertyName]!==o&&(void 0!==a.Set?a.Set(a.InputField,a.Model):a.InputField.value=removeEscapeChars(a.Model[a.PropertyName]),o=a.Model[a.PropertyName]))},1e3)}return __extends(t,e),t}(g);e.BoundInputField=f;var m=function(e){function t(t,n){e.call(this,t,n);var a=this,o=a.Model[a.PropertyName],r=!1;a.CheckBox=n,void 0!==a.Set?a.Set(a.CheckBox,a.Model):$(a.CheckBox).prop("checked",a.Cast(a.Model[a.PropertyName],a.DataType)),a.CheckBox.onclick=function(e){r=!0,void 0!==a.Get?(a.Model[a.PropertyName]=a.Get(),o=a.Cast(a.Model[a.PropertyName],a.DataType)):(a.Model[a.PropertyName]=$(a.CheckBox).prop("checked"),o=a.Cast(a.Model[a.PropertyName],a.DataType)),r=!1},setInterval(function(){r||(a.Model=a.GetObject(a.FullModel),a.Model[a.PropertyName]!==o&&(void 0!==a.Set?a.Set(a.CheckBox,a.Model):$(a.CheckBox).prop("checked",a.Cast(a.Model[a.PropertyName],a.DataType)),o=a.Cast(a.Model[a.PropertyName],a.DataType)))},500)}return __extends(t,e),t}(g);e.BoundCheckBoxField=m;var v=function(e){function t(t,n){e.call(this,t,n);var a=this,o=a.Model[a.PropertyName],r=!1;a.InputField=n,a.InputField.value=removeEscapeChars(a.Model[a.PropertyName]),a.InputField.onkeyup=function(e){r=!0,void 0!==a.Get?(a.Model[a.PropertyName]=a.Get(),o=a.Model[a.PropertyName]):(a.Model[a.PropertyName]=a.Cast(a.InputField.value,a.DataType),o=a.Model[a.PropertyName]),r=!1},a.InputField.onchange=function(e){r=!0,void 0!==a.Get?(a.Model[a.PropertyName]=a.Get(),o=a.Model[a.PropertyName]):(a.Model[a.PropertyName]=a.Cast(a.InputField.value,a.DataType),o=a.Model[a.PropertyName]),r=!1},setInterval(function(){r||(a.Model=a.GetObject(a.FullModel),a.Model[a.PropertyName]!==o&&(void 0!==a.Set?a.Set(a.InputField,a.Model):a.InputField.value=removeEscapeChars(a.Model[a.PropertyName]),o=a.Model[a.PropertyName]))},500)}return __extends(t,e),t}(g);e.BoundTextAreaField=v}(KrodSpa||(KrodSpa={}));var KrodSpa;!function(e){var t;!function(e){!function(e){e[e.Opened=1]="Opened",e[e.HeadersReceived=2]="HeadersReceived",e[e.LoadingResponse=3]="LoadingResponse",e[e.Done=4]="Done"}(e.HttpReadyStateArgs||(e.HttpReadyStateArgs={}));var t=e.HttpReadyStateArgs;!function(e){e[e.CacheControl=0]="CacheControl",e[e.Accept=1]="Accept",e[e.ContentType=2]="ContentType",e[e.Authorization=5]="Authorization"}(e.HeaderTypeArgs||(e.HeaderTypeArgs={}));var n=e.HeaderTypeArgs,a=function(){function e(e,t){var a=this;switch(a.Value=t,e){case n.Accept:a.Key="Accept";break;case n.Authorization:a.Key="Authorization";break;case n.CacheControl:a.Key="Cache-Control";break;case n.ContentType:a.Key="Content-Type"}}return e.GetHeaderKeyValue=function(e){switch(e){case n.Accept:return"Accept";case n.Authorization:return"Authorization";case n.CacheControl:return"Cache-Control";case n.ContentType:return"Content-Type";default:return""}},e.NoCache=function(){return new e(n.CacheControl,"no-cache")},e.AcceptJSon=function(){return new e(n.Accept,"text/json")},e.AcceptXML=function(){return new e(n.Accept,"text/xml")},e.ContentTypeFormUrlEncoded=function(){return new e(n.ContentType,"application/x-www-form-urlencoded")},e.ContentTypeApplicationJSon=function(){return new e(n.ContentType,"application/json")},e}();e.HttpHeader=a;var o=function(){function e(){var e=this,t=new Array;e.Length=function(){return t.length},e.Item=function(e){return e<t.length?t[e]:null},e.Get=function(e){for(var n=void 0,o=0;o<t.length;o++)if(t[o].Key===a.GetHeaderKeyValue(e)){n=t[o];break}return n},e.HasHeader=function(e){for(var n=0;n<t.length;n++)if(t[n].Key===a.GetHeaderKeyValue(e))return!0;return!1},e.AddHeader=function(e){if(e){for(var n=0;n<t.length;n++)if(t[n].Key===e.Key)return void(t[n].Value+=", "+e.Value);t.push(e)}},e.CreateHeader=function(e,n){for(var o=new a(e,n),r=0;r<t.length;r++)if(t[r].Key===o.Key)return void(t[r].Value+=", "+n);t.push(o)}}return e}();e.HttpHeaderCollection=o;var r=function(){function e(){}return e.load=function(n,a){void 0===a&&(a=!1);var o=$("body")[0],r=e.CreateElement("div","",void 0,void 0),i=e.CreateElement("div","",void 0,void 0),s=e.CreateProgressWindow(r,i);a===!0&&($(o).append(r),$(o).append(s));var l=new XMLHttpRequest,c=new Promise;try{l.onreadystatechange=function(e){if(l.readyState===t.Opened&&$(i).html("Sending Request..."),l.readyState===t.HeadersReceived&&$(i).html("Receiving Response..."),l.readyState===t.LoadingResponse&&$(i).html("Processing Data..."),l.readyState===t.Done&&200===l.status&&(a===!0&&($(s).remove(),$(r).remove()),c.resolve(l.responseText?l.responseText:l.responseXML?l.responseXML:l.response?l.response:"")),l.readyState===t.Done&&200!==l.status){a===!0&&($(s).remove(),$(r).remove());var n;try{n=JSON.parse(l.responseText.replace("error","Message")),n.Status=l.status}catch(o){(void 0===n||null===n)&&(n=new Object),n.Message=l.responseText.replace('"error":',"").replace('"Message":',""),n.Status=l.status}c.reject(n)}},l.open("GET",n+"?ranID="+Math.ceil(100*Math.random()+1),!0),l.onerror=function(e){a===!0&&($(s).remove(),$(r).remove()),c.reject(e)},l.send(null)}catch(p){a===!0&&($(s).remove(),$(r).remove()),c.reject(p)}return c},e.RestfulGet=function(n,a,o,r){void 0===r&&(r=!0);var i=$("body")[0],s=e.CreateElement("div","",void 0,void 0),l=e.CreateElement("div","",void 0,void 0),c=e.CreateProgressWindow(s,l);r===!0&&($(i).append(s),$(i).append(c));var p=new XMLHttpRequest,d=new Promise;try{if(p.onreadystatechange=function(e){if(p.readyState===t.Opened&&$(l).html("Sending Request..."),p.readyState===t.HeadersReceived&&$(l).html("Receiving Response..."),p.readyState===t.LoadingResponse&&$(l).html("Processing Data..."),p.readyState===t.Done&&200===p.status){r===!0&&($(c).remove(),$(s).remove());try{d.resolve(JSON.parse(p.responseText))}catch(n){d.resolve(p.responseText?p.responseText:p.responseXML?p.responseXML:p.response?p.response:"")}}if(p.readyState===t.Done&&200!==p.status){r===!0&&($(c).remove(),$(s).remove());var a;try{a=JSON.parse(p.responseText.replace("error","Message")),a.Status=p.status}catch(n){(void 0===a||null===a)&&(a=new Object),a.Message=p.responseText.replace('"error":',"").replace('"Message":',""),a.Status=p.status}d.reject(a)}},a=void 0!==a&&""!==a?"?"+a+"&ranID="+Math.ceil(1e4*Math.random()+1):"?ranID="+Math.ceil(1e4*Math.random()+1),p.open("GET",n+a,!0),o)for(var u=0;u<o.Length();u++)p.setRequestHeader(o.Item(u).Key,o.Item(u).Value);p.onerror=function(e){r===!0&&($(c).remove(),$(s).remove()),d.reject(e)},p.send(null)}catch(g){r===!0&&($(c).remove(),$(s).remove()),d.reject(g)}return d},e.RestfulPost=function(n,a,o){var r=$("body")[0],i=e.CreateElement("div","",void 0,void 0),s=e.CreateElement("div","",void 0,void 0),l=e.CreateProgressWindow(i,s);$(r).append(i),$(r).append(l);var c=new XMLHttpRequest,p=new Promise;try{if(c.onreadystatechange=function(e){if(c.readyState===t.Opened&&$(s).html("Sending Request..."),c.readyState===t.HeadersReceived&&$(s).html("Receiving Response..."),c.readyState===t.LoadingResponse&&$(s).html("Processing Data..."),c.readyState===t.Done&&200===c.status){$(l).remove(),$(i).remove();try{p.resolve(JSON.parse(c.responseText))}catch(n){p.resolve(c.responseText?c.responseText:c.responseXML?c.responseXML:c.response?c.response:"")}}if(c.readyState===t.Done&&200!==c.status){$(l).remove(),$(i).remove();var a;try{a=JSON.parse(c.responseText.replace("error","Message")),a.Status=c.status}catch(n){(void 0===a||null===a)&&(a=new Object),a.Message=c.responseText.replace('"error":',"").replace('"Message":',""),a.Status=c.status}p.reject(a)}},c.open("POST",n,!0),o)for(var d=0;d<o.Length();d++)c.setRequestHeader(o.Item(d).Key,o.Item(d).Value);c.onerror=function(e){$(l).remove(),$(i).remove(),p.reject(e)},c.send("object"==typeof a&&null!==a?Object.toKeyString(a):"string"==typeof a?a:"")}catch(u){$(l).remove(),$(i).remove(),p.reject(u)}return p},e.RestfulPostAll=function(t,n){var a=$("body")[0],o=e.CreateElement("div","",void 0,void 0),r=e.CreateElement("div","",void 0,void 0),i=e.CreateProgressWindow(o,r);$(a).append(o),$(a).append(i);var s=(new XMLHttpRequest,new Promise);return s},e.CreateProgressWindow=function(t,n){var a=$("body")[0],o=e.CreateElement("div","",void 0,void 0),r=e.CreateElement("div","",void 0,void 0);$(t).css("position","fixed"),$(t).css("left","0"),$(t).css("top","0"),$(t).css("width","100%"),$(t).css("height","100%"),$(t).css("background-color","transparent");var i=0,s=0;return s=(a.clientWidth-150)/2,i=(a.clientHeight-150)/2,$(o).css("width","150px"),$(o).css("height","150px"),$(o).css("position","absolute"),$(o).css("left",s+"px"),$(o).css("top",i+"px"),$(o).css("color","#000"),$(o).css("font-family","Arial, Helvetica, sans-serif"),$(o).css("padding","35px 5px 5px 5px"),$(o).css("border","1px solid #e8e4e4"),$(o).css("border-radius","5px"),$(o).css("background-color","#fff"),$(r).css("width","50px"),$(r).css("font-size","95%"),$(r).css("margin-left","auto"),$(r).css("margin-right","auto"),$(r).html('<i class="fa fa-spinner fa-pulse fa-3x"></i>'),$(o).append(r),$(n).css("font-size","75%"),$(n).css("padding-top","20px"),$(n).css("text-align","center"),$(o).append(n),o},e.CreateElement=function(e,t,n,a){var o=document.createElement(e);return void 0!==n&&n.forEach(function(e){$(o).addClass(e)}),void 0!==a&&a.forEach(function(e){$(o).attr(e.Key,e.Value)}),o.innerHTML=t,o},e}();e.WebQuery=r;var i=function(){function e(){}return e}();e.FilterObject=i;var s=function(){function e(){var e=this;e.Filter=new Array,e.Add=function(t,n,a){if(e.ContainsField(t))e.UpdateValue(t,n);else{var o=new i;o.FieldName=t,o.FilterValue=n,o.DataType=a,e.Filter.push(o)}},e.UpdateValue=function(t,n){for(var a=0;a<e.Filter.length;a++)if(e.Filter[a].FieldName.toLowerCase()===t.toLowerCase()){e.Filter[a].FilterValue=n;break}},e.ContainsField=function(t){for(var n=0;n<e.Filter.length;n++)if(e.Filter[n].FieldName.toLowerCase()===t.toLowerCase())return!0;return!1},e.MeetsCriteria=function(t){for(var n=e.Filter.length,a=0,o=0;o<e.Filter.length;o++)if(void 0!==t[e.Filter[o].FieldName]){var r=function(e,t){if(Krodzone.KrodzoneDate.dateValid(e)&&Krodzone.KrodzoneDate.dateValid(t)){var n=new Date(e),a=new Date(t);return n>=a}return!0};switch(e.Filter[o].DataType){case 0:var i=isNaN(parseInt(t[e.Filter[o].FieldName]))?-1:parseInt(t[e.Filter[o].FieldName]),s=isNaN(parseInt(e.Filter[o].FilterValue))?-1:parseInt(e.Filter[o].FilterValue);i>-1&&s>-1&&i>=s&&a++;break;case 1:var l=isNaN(parseFloat(t[e.Filter[o].FieldName]))?-1:parseFloat(t[e.Filter[o].FieldName]),c=isNaN(parseFloat(e.Filter[o].FilterValue))?-1:parseFloat(e.Filter[o].FilterValue);l>-1&&c>-1&&l>=c&&a++;break;case 2:var p=r(t[e.Filter[o].FieldName],e.Filter[o].FilterValue);p&&a++;break;case 3:var d=r("1/1/1900 "+t[e.Filter[o].FieldName],"1/1/1900 "+e.Filter[o].FilterValue);d&&a++;break;case 4:var u=r(t[e.Filter[o].FieldName],e.Filter[o].FilterValue);u&&a++,r(t[e.Filter[o].FieldName],e.Filter[o].FilterValue)&&a++;break;default:var g=t[e.Filter[o].FieldName].toString().toLowerCase(),h=e.Filter[o].FilterValue.toString().toLowerCase();"none"===h?""===g.trim()&&a++:g.indexOf(h)>-1&&a++}}else a++;return a===n}}return e}();e.FilterObjectCollection=s}(t=e.Data||(e.Data={}))}(KrodSpa||(KrodSpa={}));var KrodSpa;!function(e){var t;!function(t){var n=function(){function e(){this.CreateElement=function(e,t,n,a){var o=document.createElement(e);if(void 0!==n)for(var r=0;r<n.length;r++)o.classList.add(n[r]);if(void 0!==a)for(var r=0;r<a.Keys.length;r++)o.setAttribute(a.Keys[r],a.Values[r]);return o.innerHTML=t,o},this.GetCssValue=function(e,t){for(var n=0;n<document.styleSheets.length;n++)try{var a=document.styleSheets[n],o=a.rules?a.rules:a.cssRules?a.cssRules:void 0;if(void 0!==o)for(var r=0;r<o.length;r++)if(o[r].selectorText===e)return o[r].style[t]?o[r].style[t]:""}catch(i){if("SecurityError"!==i.name)throw i;return""}return""},this.GetElementCoordinates=function(e,t,n){var o=e.getBoundingClientRect(),r=document.documentElement,i=Math.ceil(o.top+window.pageYOffset-r.clientTop),s=Math.ceil(o.left+window.pageXOffset-r.clientLeft),l=e.clientHeight;return t&&n&&t===!0&&(s-=Math.abs(e.clientWidth-n)),new a(s,i+l+2)}}return e}();t.HtmlControl=n;var a=function(){function e(e,t){var n=this;n.X=e+"px",n.Y=t+"px"}return e}();t.ElementLocation=a,function(e){e[e.Information=0]="Information",e[e.Question=1]="Question",e[e.Exclamation=2]="Exclamation"}(t.MessageBoxTypeArgs||(t.MessageBoxTypeArgs={}));var o=t.MessageBoxTypeArgs;!function(e){e[e.Ok=0]="Ok",e[e.OkCancel=1]="OkCancel",e[e.YesNo=2]="YesNo"}(t.MessageBoxButtonArgs||(t.MessageBoxButtonArgs={}));var r=t.MessageBoxButtonArgs;!function(e){e[e.Ok=0]="Ok",e[e.Cancel=1]="Cancel",e[e.Yes=2]="Yes",e[e.No=3]="No"}(t.MessageBoxResultArgs||(t.MessageBoxResultArgs={}));var i=t.MessageBoxResultArgs,s=function(e){function t(t,n){var a=this;e.call(this),this.CreateModalWindow=function(){a.ModalContainer=a.CreateElement("div","",["modal-window",a.ModalArgs.ModalWidth],void 0),a.ModalClose=a.CreateElement("div",'<i class="fa fa-close"></i>',void 0,void 0),a.ExecuteButton=a.CreateElement("button",a.ModalArgs.ExecutionHtml,["btn","btn-primary","pull-right"],void 0),a.CancelButton=a.CreateElement("button",a.ModalArgs.CancelHtml,["btn","btn-warning","pull-right"],void 0);var e=a.CreateElement("div","<span>"+a.ModalArgs.ModalCaption+"</span>",["title"],void 0);e.appendChild(a.ModalClose),a.ModalContainer.appendChild(e);var t=a.CreateElement("div","",["body"],void 0);if(t.appendChild(a.View),a.ModalContainer.appendChild(t),a.ModalArgs.ShowExecuteButton||a.ModalArgs.ShowCancelButton){var n=a.CreateElement("div","",["button"],void 0);a.ModalArgs.ShowCancelButton&&n.appendChild(a.CancelButton),a.ModalArgs.ShowExecuteButton&&n.appendChild(a.ExecuteButton),a.ModalContainer.appendChild(n)}var o=a.CreateElement("div",a.ModalArgs.FooterText,["footer"],void 0);a.ModalContainer.appendChild(o)};var o=this;o.View=t,o.ModalArgs=n,o.Mask=new y("opaque"),void 0===o.View&&(o.View=o.CreateElement("div","<strong>Invalid Template</strong>",void 0,void 0),o.ModalArgs.ShowCancelButton=!1,o.ModalArgs.ShowExecuteButton=!1),o.Validator=new d(o.View,o.ModalArgs.Scope);var r=function(e,t,n){var a=$(e).find("formvalidator");if(a&&a.length>0){var o=a[0],r=$("#"+$(o).attr("errorcontainerid"))?$("#"+$(o).attr("errorcontainerid"))[0]:void 0,i=$("#"+$(o).attr("errormessageid"))?$("#"+$(o).attr("errormessageid"))[0]:void 0;r&&i&&($(i).removeClass("alert-danger"),$(i).removeClass("alert-success"),$(i).addClass(t),$(i).html(n),$(r).show())}};o.CreateModalWindow(),document.documentElement.onscroll=function(e){var t=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);$(".modal-window").toArray();$(".modal-window").each(function(){var e=$(this)[0];t<e.offsetTop&&e.offsetTop>50&&(e.style.top=t+"px")})},o.SuccessResult=function(e,t){r(o.View,e?"alert-success":"alert-danger",t),e?setTimeout(function(){o.Close()},2e3):(o.ExecuteButton.disabled=!1,o.CancelButton.disabled=!1)},o.Close=function(){void 0!==o.ModalArgs.CancelButtonCallback&&o.ModalArgs.CancelButtonCallback(o);var e=document.getElementsByTagName("body")[0];if(void 0!==e)try{e.removeChild(o.Mask.MaskElement),e.removeChild(o.ModalContainer)}catch(t){}},o.CancelButton.onclick=function(e){o.Close()},o.ModalClose.onclick=function(e){o.Close()},o.ExecuteButton.onclick=function(e){o.ModalArgs.ExecuteButtonCallback&&o.Validator.FormValid()&&(o.ExecuteButton.disabled=!0,o.CancelButton.disabled=!0,o.ModalArgs.ExecuteButtonCallback(o.SuccessResult))},$(o.ModalContainer).find("input").on("keypress",function(e){13===e.keyCode&&o.ExecuteButton.click()})}return __extends(t,e),t.showDialog=function(e,n){var a=new t(e,n),o=document.getElementsByTagName("body")[0],r=a.GetCssValue(".modal-window ."+a.ModalArgs.ModalWidth,"width"),i=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),s=0,l=0;try{""===r?(s=.5*o.clientWidth,l=(o.clientWidth-s)/2):(s=r.indexOf("%")>0?o.clientWidth*parseFloat("."+r.replace("%","")):parseInt(r.replace("px","")),l=(o.clientWidth-s)/2),s>window.innerWidth&&(s=Math.ceil(.95*window.innerWidth),l=Math.ceil((window.innerWidth-s)/2),$$(a.ModalContainer).removeClass(a.ModalArgs.ModalWidth),$$(a.ModalContainer).find(".form-control").addClass("form-control-inline"))}catch(c){s=.95*window.innerWidth,l=(window.innerWidth-s)/2}a.ModalContainer.style.width=s+"px",a.ModalContainer.style.left=l+"px",a.ModalContainer.style.top=i+"px",o.appendChild(a.Mask.MaskElement),o.appendChild(a.ModalContainer)},t}(n);t.ModalWindow=s;var l=function(e){function t(t,n,a,s,l){var c=this;e.call(this),this.CreateModalWindow=function(){c.ModalContainer=c.CreateElement("div","",["modal-window",c.ModalArgs.ModalWidth],void 0),c.ModalClose=c.CreateElement("div",'<i class="fa fa-close"></i>',void 0,void 0);var e=c.MsgBoxButtons===r.Ok||c.MsgBoxButtons===r.OkCancel?"OK":c.MsgBoxButtons===r.YesNo?"Yes":"OK",t=c.MsgBoxButtons===r.OkCancel?"Cancel":c.MsgBoxButtons===r.YesNo?"No":"Cancel";c.AssentButton=c.CreateElement("button",e,["btn","btn-sm","btn-default","pull-right"],void 0),c.AbortButton=c.CreateElement("button",t,["btn","btn-sm","btn-danger","pull-right"],void 0);var n=c.CreateElement("div","<span>"+c.ModalArgs.ModalCaption+"</span>",["title"],void 0);n.appendChild(c.ModalClose),c.ModalContainer.appendChild(n);var a=c.CreateElement("div","",["body"],void 0);a.appendChild(c.View),c.ModalContainer.appendChild(a);var o=c.CreateElement("div","",["button"],void 0);c.MsgBoxButtons!==r.Ok&&o.appendChild(c.AbortButton),o.appendChild(c.AssentButton),c.ModalContainer.appendChild(o);var i=c.CreateElement("div","&nbsp;",["footer"],void 0);c.ModalContainer.appendChild(i)};var p=this,d=function(e,t){var n=p.CreateElement("div","",["row"],void 0),a=t===o.Information?"information-icon":t===o.Question?"question-icon":t===o.Exclamation?"exclamation-icon":"information-icon",r=p.CreateElement("div",'<div class="'+a+'">&nbsp;</div>',["col-md-2"],void 0),i=p.CreateElement("div",e,["col-md-10","padding-top-10"],void 0);return n.appendChild(r),n.appendChild(i),n};p.View=d(t,a),p.ModalArgs=l,p.MsgBoxType=a,p.MsgBoxButtons=s,p.Mask=new y("opaque"),p.CreateModalWindow(),document.documentElement.onscroll=function(e){var t=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);$(".modal-window").toArray();$(".modal-window").each(function(){var e=$(this)[0];t<e.offsetTop&&e.offsetTop>50&&(e.style.top=t+"px")})},p.Close=function(e){void 0!==p.ModalArgs.MessageBoxCallback&&p.ModalArgs.MessageBoxCallback(e);var t=document.getElementsByTagName("body")[0];if(void 0!==t)try{t.removeChild(p.Mask.MaskElement),t.removeChild(p.ModalContainer)}catch(n){}},p.AbortButton.onclick=function(e){var t=p.MsgBoxButtons===r.Ok||p.MsgBoxButtons===r.OkCancel?i.Cancel:i.No;p.Close(t)},p.ModalClose.onclick=function(e){var t=p.MsgBoxButtons===r.Ok||p.MsgBoxButtons===r.OkCancel?i.Cancel:i.No;p.Close(t)},p.AssentButton.onclick=function(e){var t=p.MsgBoxButtons===r.Ok||p.MsgBoxButtons===r.OkCancel?i.Ok:i.Yes;p.Close(t)}}return __extends(t,e),t.showDialog=function(e,n,a,o,r){var i=new t(e,n,a,o,r),s=document.getElementsByTagName("body")[0],l=i.GetCssValue(".modal-window ."+i.ModalArgs.ModalWidth,"width"),c=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),p=0,d=0;try{""===l?(p=.5*s.clientWidth,d=(s.clientWidth-p)/2):(p=l.indexOf("%")>0?s.clientWidth*parseFloat("."+l.replace("%","")):parseInt(l.replace("px","")),d=(s.clientWidth-p)/2),p>window.innerWidth&&(p=Math.ceil(.95*window.innerWidth),
d=Math.ceil((window.innerWidth-p)/2),$$(i.ModalContainer).removeClass(i.ModalArgs.ModalWidth),$$(i.ModalContainer).find(".form-control").addClass("form-control-inline"),document.documentElement.scrollLeft=0)}catch(u){p=Math.ceil(.95*window.innerWidth),d=Math.ceil((window.innerWidth-p)/2),$$(i.ModalContainer).removeClass(i.ModalArgs.ModalWidth),$$(i.ModalContainer).find(".form-control").addClass("form-control-inline"),document.documentElement.scrollLeft=0}i.ModalContainer.style.width=p+"px",i.ModalContainer.style.left=d+"px",i.ModalContainer.style.top=c+"px",s.appendChild(i.Mask.MaskElement),s.appendChild(i.ModalContainer)},t}(n);t.MessageBox=l;var c=function(){function e(e,t,n,a,o,r,i,s,l,c){var p=this;p.Scope=e,p.ModalWidth=t,p.ModalCaption=n,p.FooterText=a,p.ExecutionHtml=o,p.CancelHtml=r,p.ShowExecuteButton=i,p.ShowCancelButton=s,p.ExecuteButtonCallback=l,p.CancelButtonCallback=c}return e}();t.ModalWindowArgs=c;var p=function(){function e(e,t,n,a,o){var i=this;i.Scope=e,i.ModalWidth=t,i.ModalCaption=n,i.ShowAbortButton=a===r.OkCancel||a===r.YesNo,i.MessageBoxCallback=o}return e}();t.MessageBoxWindowArgs=p;var d=function(){function e(e,t){var n=this;if(n.View=e,n.Scope=t,n.CanValidate=!1,n.Fields=new Array,n.View&&(n.CanValidate=$(n.View).find("formvalidator")&&$(n.View).find("formvalidator").length>0,n.CanValidate===!0)){var a=$(n.View).find("formvalidator")[0],o=$(a).attr("errorcontainerid"),r=$(a).attr("errormessageid");n.ErrorContainer=$(n.View).find('[id="'+o+'"]')&&$(n.View).find('[id="'+o+'"]').length>0?$(n.View).find('[id="'+o+'"]')[0]:void 0,n.ErrorMessage=$(n.View).find('[id="'+r+'"]')&&$(n.View).find('[id="'+r+'"]').length>0?$(n.View).find('[id="'+r+'"]')[0]:void 0,n.ErrorMessage&&($(n.ErrorMessage).removeClass("alert-danger"),$(n.ErrorMessage).removeClass("alert-warning"),$(n.ErrorMessage).removeClass("alert-success"),$(n.ErrorMessage).html("")),n.ErrorContainer&&$(n.ErrorContainer).hide();var i=$(a).find("[validation]").toArray();i&&i.length>0?i.forEach(function(e){var t=new u(e,n.Scope,n.View);n.Fields.push(t)}):n.CanValidate=!1}n.FormValid=function(){if(n.CanValidate!==!0)return!0;var e=new g;try{return n.Fields.forEach(function(t){var n=t.GetValidationResult();$(t.Field).removeClass("form-error"),n.IsValid===!1&&($(t.Field).addClass("form-error"),e.IsValid=!1,e.Message=""===e.Message?n.Message:e.Message+"<br>"+n.Message)}),e.IsValid===!1&&n.ErrorContainer&&n.ErrorMessage&&($(n.ErrorMessage).addClass("alert-danger"),$(n.ErrorMessage).html(e.Message),$(n.ErrorContainer).show()),e.IsValid}catch(t){return!1}}}return e}();t.ViewValidator=d;var u=function(){function e(e,t,n){this.GetParameterValue=function(e,t){if("RULE"===e.toUpperCase()||"MESSAGE"===e.toUpperCase())for(var n=0;n<t.length;n++){var a=t[n].split(":");if(a&&2===a.length&&a[0].trim().toUpperCase()===e.toUpperCase())return a[1].trim().split(",")}for(var n=0;n<t.length;n++){var a=t[n].split(":");if(a&&2===a.length&&a[0].trim().toUpperCase()===e.toUpperCase())return a[1].trim()}return void 0};var a=this;a.Field=e,a.Scope=t,a.Rules=new Array,a.Messages=new Array;var o=$(a.Field).attr("validation").split(";");if(o&&o.length>0){var r=a.GetParameterValue("RULE",o),i=a.GetParameterValue("MESSAGE",o),s=a.GetParameterValue("MIN",o),l=a.GetParameterValue("MAX",o),c=a.GetParameterValue("NEGATIONID",o),p=a.GetParameterValue("MATCHID",o),d=a.GetParameterValue("METHOD",o),u=a.GetParameterValue("PATTERN",o),y=a.GetParameterValue("DATATYPE",o);if(r&&i&&r.length>0&&i.length>0&&r.length===i.length)for(var M=0;M<r.length;M++){var T,w=r[M].trim().toUpperCase(),C=i[M].trim();switch(w){case"RANGE":T=new h(y),T.SetMin(s),T.SetMax(l);break;case"NEGATION":c=c?c:"",T=new f(y,$(n).find("#"+c)&&$(n).find("#"+c).length>0?$(n).find("#"+c)[0]:void 0);break;case"MATCH":p=p?p:"",T=new m(y,$(n).find("#"+p)&&$(n).find("#"+p).length>0?$(n).find("#"+p)[0]:void 0);break;case"CALLBACK":d=d?d:"",T=new v(y,a.Scope,d);break;case"REGEX":u=u?u:"(([0-9]|[a-z])s*){0,}",T=new S(u)}void 0!==T&&void 0!==T.IsValid&&(a.Rules.push(T),a.Messages.push(C))}}a.GetValidationResult=function(){for(var e=new g,t=0;t<a.Rules.length;t++){var n=a.Rules[t];n.SetValue(D(a.Field)),!n.IsValid()==!0&&(e.IsValid=!1,e.Message=""===e.Message?a.Messages[t]:e.Message+"<br>"+a.Messages[t])}return e};var D=function(e){if(void 0===e)return void 0;switch(e.tagName.toUpperCase()){case"SELECT":return $(e).val();case"INPUT":var t=e.type;return"CHECKBOX"===t.toUpperCase()?$(e).prop("checked"):$(e).val();case"TEXTAREA":return $(e).val()}}}return e}();t.ValidationField=u;var g=function(){function e(){var e=this;e.IsValid=!0,e.Message=""}return e}();t.ValidationMessage=g;var h=function(){function t(t){var n=this,a=0,o=100,r=!1,i=-1,s=e.DataTypeCollection.Instance();n.DataType=void 0!==s[t.toUpperCase()]?s[t.toUpperCase()]:e.DataTypeArgs.Int,n.SetMin=function(t){a=isNaN(n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))?0:n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t)},n.SetMax=function(t){return"*"===t?void(r=!0):void(o=isNaN(n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))?100:n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))},n.SetValue=function(t){i=isNaN(n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))?a-1:n.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t)},n.IsValid=function(){return a>i||i>(r===!0?i+a+10:o)?!1:!0}}return t}();t.RangeValidationRule=h;var f=function(){function t(t,n){var a=this,o=void 0;a.DataType=e.DataTypeCollection.Instance[t.toUpperCase()]?e.DataTypeCollection.Instance[t.toUpperCase()]:e.DataTypeArgs.String,a.NegationObj=n,a.SetValue=function(t){if((a.DataType===e.DataTypeArgs.Int||a.DataType===e.DataTypeArgs.Float)&&NaN!==(a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))&&(o=a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t)),a.DataType===e.DataTypeArgs.Date||a.DataType===e.DataTypeArgs.Time||a.DataType===e.DataTypeArgs.DateTime){var n=new Date(t);if("Invalid Date"!==n.toDateString()){var r=n.getMonth()+1,i=n.getDate(),s=n.getFullYear(),l=n.getHours()>12?n.getHours()-12:0==n.getHours()?12:n.getHours(),c=n.getMinutes(),p=n.getHours()>=12?"PM":"AM";a.DataType===e.DataTypeArgs.Date&&(o=new String(("0"+r).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s))),a.DataType===e.DataTypeArgs.Time&&(o=new String(("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p)),a.DataType===e.DataTypeArgs.DateTime&&(o=new String(("0"+r).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s)+" "+("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p))}}a.DataType===e.DataTypeArgs.Boolean&&("object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)&&(o=new Boolean(t)),("true"===t==!0||"false"===t==!0)&&(o=new Boolean(t))),a.DataType===e.DataTypeArgs.String&&(o=new String(t))},a.IsValid=function(){if(a.NegationObj){var t=$(a.NegationObj).val(),n=void 0,r=void 0;if((a.DataType===e.DataTypeArgs.Int||a.DataType===e.DataTypeArgs.Float)&&NaN!==(a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))&&(n=a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t),r=a.DataType===e.DataTypeArgs.Int?parseInt(o):parseFloat(o)),a.DataType===e.DataTypeArgs.Date||a.DataType===e.DataTypeArgs.Time||a.DataType===e.DataTypeArgs.DateTime){var i=new Date(t);if("Invalid Date"!==i.toDateString()){var s=i.getMonth()+1,l=i.getDate(),c=i.getFullYear(),p=i.getHours()>12?i.getHours()-12:0==i.getHours()?12:i.getHours(),d=i.getMinutes(),u=i.getHours()>=12?"PM":"AM";a.DataType===e.DataTypeArgs.Date&&(n=new String(("0"+s).slice(-2)+"/"+("0"+l).slice(-2)+"/"+String(c))),a.DataType===e.DataTypeArgs.Time&&(n=new String(("0"+p).slice(-2)+":"+("0"+d).slice(-2)+" "+u)),a.DataType===e.DataTypeArgs.DateTime&&(n=new String(("0"+s).slice(-2)+"/"+("0"+l).slice(-2)+"/"+String(c)+" "+("0"+p).slice(-2)+":"+("0"+d).slice(-2)+" "+u)),r=new String(o)}}return a.DataType===e.DataTypeArgs.Boolean&&("object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)&&(n=new Boolean(t),r=new Boolean(o)),("true"===t==!0||"false"===t==!0)&&(n=new Boolean(t),r=new Boolean(o))),a.DataType===e.DataTypeArgs.String&&(n=new String(t),r=new String(o)),void 0!==r&&void 0!==n?r.valueOf()!==n.valueOf():!1}return!1}}return t}();t.NegationValidationRule=f;var m=function(){function t(t,n){var a=this,o=void 0;a.DataType=e.DataTypeCollection.Instance[t.toUpperCase()]?e.DataTypeCollection.Instance[t.toUpperCase()]:e.DataTypeArgs.String,a.MatchObj=n,a.SetValue=function(t){if((a.DataType===e.DataTypeArgs.Int||a.DataType===e.DataTypeArgs.Float)&&NaN!==(a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))&&(o=a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t)),a.DataType===e.DataTypeArgs.Date||a.DataType===e.DataTypeArgs.Time||a.DataType===e.DataTypeArgs.DateTime){var n=new Date(t);if("Invalid Date"!==n.toDateString()){var r=n.getMonth()+1,i=n.getDate(),s=n.getFullYear(),l=n.getHours()>12?n.getHours()-12:0==n.getHours()?12:n.getHours(),c=n.getMinutes(),p=n.getHours()>=12?"PM":"AM";a.DataType===e.DataTypeArgs.Date&&(o=new String(("0"+r).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s))),a.DataType===e.DataTypeArgs.Time&&(o=new String(("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p)),a.DataType===e.DataTypeArgs.DateTime&&(o=new String(("0"+r).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s)+" "+("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p))}}a.DataType===e.DataTypeArgs.Boolean&&("object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)&&(o=new Boolean(t)),("true"===t==!0||"false"===t==!0)&&(o=new Boolean(t))),a.DataType===e.DataTypeArgs.String&&(o=new String(t))},a.IsValid=function(){if(a.MatchObj){var t=$(a.MatchObj).val(),n=void 0,r=void 0;if((a.DataType===e.DataTypeArgs.Int||a.DataType===e.DataTypeArgs.Float)&&NaN!==(a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))&&(n=a.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t),r=a.DataType===e.DataTypeArgs.Int?parseInt(o):parseFloat(o)),a.DataType===e.DataTypeArgs.Date||a.DataType===e.DataTypeArgs.Time||a.DataType===e.DataTypeArgs.DateTime){var i=new Date(t);if("Invalid Date"!==i.toDateString()){var s=i.getMonth()+1,l=i.getDate(),c=i.getFullYear(),p=i.getHours()>12?i.getHours()-12:0==i.getHours()?12:i.getHours(),d=i.getMinutes(),u=i.getHours()>=12?"PM":"AM";a.DataType===e.DataTypeArgs.Date&&(n=new String(("0"+s).slice(-2)+"/"+("0"+l).slice(-2)+"/"+String(c))),a.DataType===e.DataTypeArgs.Time&&(n=new String(("0"+p).slice(-2)+":"+("0"+d).slice(-2)+" "+u)),a.DataType===e.DataTypeArgs.DateTime&&(n=new String(("0"+s).slice(-2)+"/"+("0"+l).slice(-2)+"/"+String(c)+" "+("0"+p).slice(-2)+":"+("0"+d).slice(-2)+" "+u)),r=new String(o)}}return a.DataType===e.DataTypeArgs.Boolean&&("object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)&&(n=new Boolean(t),r=new Boolean(o)),("true"===t==!0||"false"===t==!0)&&(n=new Boolean(t),r=new Boolean(o))),a.DataType===e.DataTypeArgs.String&&(n=new String(t),r=new String(o)),void 0!==r&&void 0!==n?r.valueOf()===n.valueOf():!1}return!1}}return t}();t.MatchValidationRule=m;var v=function(){function t(t,n,a){var o=this,r=void 0;o.DataType=e.DataTypeCollection.Instance[t.toUpperCase()]?e.DataTypeCollection.Instance[t.toUpperCase()]:e.DataTypeArgs.String,o.Scope=n,o.ValidationMethod=a,o.SetValue=function(t){if((o.DataType===e.DataTypeArgs.Int||o.DataType===e.DataTypeArgs.Float)&&NaN!==(o.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t))&&(r=o.DataType===e.DataTypeArgs.Int?parseInt(t):parseFloat(t)),o.DataType===e.DataTypeArgs.Date||o.DataType===e.DataTypeArgs.Time||o.DataType===e.DataTypeArgs.DateTime){var n=new Date(t);if("Invalid Date"!==n.toDateString()){var a=n.getMonth()+1,i=n.getDate(),s=n.getFullYear(),l=n.getHours()>12?n.getHours()-12:0==n.getHours()?12:n.getHours(),c=n.getMinutes(),p=n.getHours()>=12?"PM":"AM";o.DataType===e.DataTypeArgs.Date&&(r=new String(("0"+a).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s))),o.DataType===e.DataTypeArgs.Time&&(r=new String(("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p)),o.DataType===e.DataTypeArgs.DateTime&&(r=new String(("0"+a).slice(-2)+"/"+("0"+i).slice(-2)+"/"+String(s)+" "+("0"+l).slice(-2)+":"+("0"+c).slice(-2)+" "+p))}}o.DataType===e.DataTypeArgs.Boolean&&("object"==typeof t&&"[object Boolean]"===Object.prototype.toString.call(t)&&(r=new Boolean(t)),("true"===t==!0||"false"===t==!0)&&(r=new Boolean(t))),o.DataType===e.DataTypeArgs.String&&(r=new String(t))},o.IsValid=function(){return o.Scope&&o.Scope[o.ValidationMethod]?o.Scope[o.ValidationMethod](r)===!0:!1}}return t}();t.CallbackValidationRule=v;var S=function(){function e(e){var t=this,n="";t.ValidationPattern=e,t.SetValue=function(e){n=void 0===e?"":e},t.IsValid=function(){var e=n.match(new RegExp(t.ValidationPattern,"i"));return void 0!==e&&null!==e&&e.length>0}}return e}();t.RegExValidationRule=S;var y=function(){function e(e){var t=this;t.MaskElement=document.createElement("div"),t.MaskElement.classList.add("modal-mask"),t.MaskElement.classList.add(e)}return e}();t.ModalMask=y,function(e){e[e.URL=1]="URL",e[e.Hash=2]="Hash",e[e.Method=3]="Method"}(t.MenuItemCommandTypeArgs||(t.MenuItemCommandTypeArgs={}));var M=t.MenuItemCommandTypeArgs,T=function(){function e(e){var t=this;if(void 0!==e)try{t.MenuItemID=e.MenuItemID,t.MenuGroup=e.MenuGroup,t.ControlID=e.ControlID,t.ApplySeparator=e.ApplySeparator,t.Controller=e.Controller,t.CommandType=e.CommandType,t.Command=e.Command,t.MenuIcon=e.MenuIcon,t.LabelText=e.LabelText,t.IsActive=e.IsActive,t.CreatedBy=e.CreatedBy,t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date(e.DateCreated)),t.UpdatedBy=e.UpdatedBy,t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date(e.DateUpdated))}catch(n){t.MenuItemID=0,t.MenuGroup="",t.ControlID="",t.ApplySeparator=!1,t.Controller="",t.CommandType=M.Hash,t.Command="",t.MenuIcon="",t.LabelText="",t.IsActive=!0,t.CreatedBy=0,t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date),t.UpdatedBy=0,t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date)}else t.MenuItemID=0,t.MenuGroup="",t.ControlID="",t.ApplySeparator=!1,t.Controller="",t.CommandType=M.Hash,t.Command="",t.MenuIcon="",t.LabelText="",t.IsActive=!0,t.CreatedBy=0,t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date),t.UpdatedBy=0,t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date);t.toLineItem=function(){var e=document.createElement("li"),n=document.createElement("a"),a='<i class="fa '+t.MenuIcon+'"></i>&nbsp;&nbsp;';switch(t.CommandType){case M.Hash:n.href=t.Command;break;case M.URL:n.href=t.Command;break;case M.Method:$(n).css("cursor","pointer")}return t.ApplySeparator===!0&&$(e).addClass("mnu-separator"),n.innerHTML=a+t.LabelText,e.id=t.ControlID,e.appendChild(n),e}}return e.toArray=function(t){var n=new Array;if(void 0!==t){var a;try{a="string"==typeof t?JSON.parse(t):t}catch(o){a=void 0}if(void 0!==a&&void 0!==a.length)for(var r=0;r<a.length;r++){var i=new e(a[r]);n.push(i)}}return n},e}();t.MenuItem=T;var w=function(){function e(e,t){var n=this;n.Sender=e,n.Model=t}return e}();t.ContextMenuCallbackArgs=w;var C=function(){function e(e,t){var n=this;n.ElementID=e,n.ItemCallback=t}return e}();t.ContextMenuCallback=C;var D=function(t){function n(n,a){t.call(this),this.CreateMenu=function(e){var t=document.createElement("div");if(void 0!==e&&e.length>0){var n=document.createElement("ul");e.forEach(function(e){n.appendChild(e.toLineItem())}),t.appendChild(n)}else $(t).css("text-align","center"),$(t).html("<h4>Unable to Create Menu</h4>");return t};var o=this,r=!1;if(o.Model=a,o.MenuItems=n,document.getElementsByTagName("body")[0].onclick=function(e){setTimeout(function(){r?r=!1:$("body").find(o.Menu).length&&document.getElementsByTagName("body")[0].removeChild(o.Menu)},100)},o.ShowMenu=function(e){$("body").find("context-menu").length&&document.getElementsByTagName("body")[0].removeChild($("context-menu")[0]),setTimeout(function(){var t=o.GetElementCoordinates(e);$(o.Menu).css("position","absolute"),$(o.Menu).css("left",t.X),$(o.Menu).css("top",t.Y),$(o.Menu).css("display","block"),document.getElementsByTagName("body")[0].appendChild(o.Menu)},200)},o.Menu=document.createElement("context-menu"),o.Menu.appendChild(o.CreateMenu(o.MenuItems)),void 0!==o.MenuItems&&o.MenuItems.length>0)for(var i=0;i<o.MenuItems.length;i++)!function(t){var n=o.MenuItems[t];n.CommandType===M.Method&&$(o.Menu).find('[id="'+n.ControlID+'"]').length&&$(o.Menu).find('[id="'+n.ControlID+'"]').on("click",function(t){void 0!==e.Application.Applications&&e.Application.Applications.length>0&&e.Application.Applications.forEach(function(e){var t=controllerFetcher(n.Controller,e.Controllers);void 0!==t&&t.Scope[n.Command](o)})})}(i)}return __extends(n,t),n}(n);t.ContextMenu=D}(t=e.Views||(e.Views={}))}(KrodSpa||(KrodSpa={}));var Krodzone;!function(e){!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(e.DayOfWeek||(e.DayOfWeek={}));var t=e.DayOfWeek,n=function(){function e(t){e.dateValid(t)||(t=new Date),this.CurrentDate=t,this.Month=this.CurrentDate.getMonth()+1,this.Day=this.CurrentDate.getDate(),this.Year=this.CurrentDate.getFullYear(),this.DOW=this.CurrentDate.getDay(),this.CurrentTime=new a(t)}return e.prototype.setDate=function(t){e.dateValid(t)&&(this.CurrentDate=t,this.Month=this.CurrentDate.getMonth()+1,this.Day=this.CurrentDate.getDate(),this.Year=this.CurrentDate.getFullYear(),this.DOW=this.CurrentDate.getDay(),this.CurrentTime.setTime(this.CurrentDate))},e.prototype.toShortDateString=function(){return("0"+this.Month).slice(-2)+"/"+("0"+this.Day).slice(-2)+"/"+String(this.Year)},e.prototype.toDateTimeString=function(){return this.toShortDateString()+" "+this.CurrentTime.toTimeString()},e.prototype.toString=function(){return"KrodzoneDate ("+this.toShortDateString()+")"},e.toShortDateString=function(t){e.dateValid(t)||(t=new Date);var n=t.getMonth()+1,a=t.getDate(),o=t.getFullYear();return("0"+n).slice(-2)+"/"+("0"+a).slice(-2)+"/"+String(o)},e.toDateTimeString=function(t){e.dateValid(t)||(t=new Date);var n=t.getMonth()+1,a=t.getDate(),o=t.getFullYear(),r=t.getHours()>12?t.getHours()-12:0==t.getHours()?12:t.getHours(),i=t.getMinutes(),s=t.getHours()>=12?"PM":"AM";return("0"+n).slice(-2)+"/"+("0"+a).slice(-2)+"/"+String(o)+" "+("0"+r).slice(-2)+":"+("0"+i).slice(-2)+" "+s},e.dateDiff=function(t,n,a){if(!e.dateValid(n)||!e.dateValid(a))return-1;switch(t){case"DAY":var o=Math.ceil(365.25*(n.getFullYear()-1900)+n.getDate()),r=Math.ceil(365.25*(a.getFullYear()-1900)+a.getDate());if(n.getMonth()-1>=0)for(var i=n.getMonth()-1;i>=0;)o+=e.daysInMonth(new Date(i+1+"/1/"+n.getFullYear())),i--;if(a.getMonth()-1>=0)for(var s=a.getMonth()-1;s>=0;)r+=e.daysInMonth(new Date(s+1+"/1/"+a.getFullYear())),s--;return r-o;case"MONTH":var l=n.getMonth(),c=a.getMonth();return c-l;case"YEAR":var p=n.getFullYear(),d=a.getFullYear();return d-p;case"HOUR":var u=n.getHours(),g=a.getHours();return g-u;case"MINUTES":var o=Math.ceil(365.25*(n.getFullYear()-1900)+(n.getDate()-1)),r=Math.ceil(365.25*(a.getFullYear()-1900)+(a.getDate()-1));if(n.getMonth()-1>=0)for(var i=n.getMonth()-1;i>=0;)o+=e.daysInMonth(new Date(i+1+"/1/"+n.getFullYear())),i--;if(a.getMonth()-1>=0)for(var s=a.getMonth()-1;s>=0;)r+=e.daysInMonth(new Date(s+1+"/1/"+a.getFullYear())),s--;var h=n.getMinutes()+60*n.getHours()+24*o*60,f=a.getMinutes()+60*a.getHours()+24*r*60;return f-h;case"SECONDS":var m=n.getSeconds(),v=a.getSeconds();return v-m;default:return-1}},e.dateAdd=function(t,n,a){if(!e.dateValid(a))return new Date("1/1/1900");if(isNaN(n))return new Date("1/1/1900");var o=a.getDate(),r=a.getMonth(),i=a.getFullYear(),s=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),p=0,d=function(t){var n=e.daysInMonth(a);if(0>t){if(0>=o+t){for(p=t+o===0?n:t+o;0>=p;)i=r+1==1?i-1:i,r=r+1==1?11:r-1,n=e.daysInMonth(new Date(r+1+"/1/"+i)),p=p+n===0?n:p+n;var d=r+1+"/"+p+"/"+i+" "+s+":"+l+":"+c;return new Date(d)}p=o+t;var d=r+1+"/"+p+"/"+i+" "+s+":"+l+":"+c;return new Date(d)}if(o+t>n){for(p=o+t;p>n;)i=r+1==12?i+1:i,r=r+1==12?0:r+1,p-=n,n=e.daysInMonth(new Date(r+1+"/1/"+i));var d=r+1+"/"+p+"/"+i+" "+s+":"+l+":"+c;return new Date(d)}var d=r+1+"/"+(o+t)+"/"+i+" "+s+":"+l+":"+c;return new Date(d)},u=function(t){var n,a;if(r+t>=12){var p=12-(r+1),d=t-p,u=Math.floor(d/12);return d-=12*u,u+=i+1,n=e.daysInMonth(new Date(d+"/1/"+u)),a=o>n?d+"/"+n+"/"+u+" "+s+":"+l+":"+c:d+"/"+o+"/"+u+" "+s+":"+l+":"+c,new Date(a)}if(0>r+t){var d=Math.abs(t)-(r+1),u=Math.floor(d/12),g=12-(d-12*u);return u=i-(u+1),n=e.daysInMonth(new Date(g+"/1/"+u)),a=o>n?g+"/"+n+"/"+u+" "+s+":"+l+":"+c:g+"/"+o+"/"+u+" "+s+":"+l+":"+c,new Date(a)}return a=r+t+1+"/"+o+"/"+i+" "+s+":"+l+":"+c,new Date(a)},g=function(t){if(s+t>23){var n=e.daysInMonth(a),d=Math.floor((s+t)/24);if(t=s+t-24*d,o+d>n){for(p=o+d;p>n;)i=r+1==12?i+1:i,r=r+1==12?0:r+1,p-=n,n=e.daysInMonth(new Date(r+1+"/1/"+i));var u=r+1+"/"+p+"/"+i+" "+t+":"+l+":"+c;return new Date(u)}var g=i,h=r+1,f=o,m=s;0>t?(g=Math.abs(t)>s&&0===s&&1===o&&0===r?i-1:i,h=Math.abs(t)>s&&0===s&&1===o?0===r?12:r:r+1,f=Math.abs(t)>s&&0===s&&1===o?e.daysInMonth(new Date(h+"/1/"+g)):o,m=Math.abs(t)>s?s-(Math.abs(t)-s)<0?23-(s-(Math.abs(t)-s)):s-(Math.abs(t)-s):s+t):(g=t+s>23&&o===e.daysInMonth(new Date(r+1+"/1/"+i))&&11===r?i+1:i,h=t+s>23&&o===e.daysInMonth(new Date(r+1+"/1/"+i))?11===r?1:r+2:r+1,f=t+s>23?o===e.daysInMonth(new Date(r+1+"/1/"+i))?1:o+1:o,m=t+s>23?t+s-23:t+s);var u=h+"/"+f+"/"+g+" "+m+":"+l+":"+c;return new Date(u)}var g=i,h=r+1,f=o,m=s;0>t?(g=Math.abs(t)>s&&0===s&&1===o&&0===r?i-1:i,h=Math.abs(t)>s&&0===s&&1===o?0===r?12:r:r+1,f=Math.abs(t)>s?1===o?e.daysInMonth(new Date(h+"/1/"+g)):o-1:o,m=Math.abs(t)>s?24+(s+t):s+t):(g=t+s>23&&o===e.daysInMonth(new Date(r+1+"/1/"+i))&&11===r?i+1:i,h=t+s>23&&o===e.daysInMonth(new Date(r+1+"/1/"+i))?11===r?1:r+2:r+1,f=t+s>23?o===e.daysInMonth(new Date(r+1+"/1/"+i))?1:o+1:o,m=t+s>23?t+s-23:t+s);var u=h+"/"+f+"/"+g+" "+m+":"+l+":"+c;return new Date(u)},h=function(t){if(l+t>60){var n=Math.floor((l+t)/60);if(t=l+t-60*n,s+n>23){var d=e.daysInMonth(a),u=Math.floor((s+n)/24);if(n=s+n-24*u,o+u>d){for(p=o+u;p>d;)i=r+1==12?i+1:i,r=r+1==12?0:r+1,p-=d,d=e.daysInMonth(new Date(r+1+"/1/"+i));var g=r+1+"/"+p+"/"+i+" "+n+":"+t+":"+c;return new Date(g)}var g=r+1+"/"+(o+u)+"/"+i+" "+n+":"+t+":"+c;return new Date(g)}var g=r+1+"/"+o+"/"+i+" "+(s+n)+":"+t+":"+c;return new Date(g)}var h=i,f=r+1,m=o,v=s,S=l;0>t?(h=Math.abs(t)>l&&0===s&&1===o&&0===r?i-1:i,f=Math.abs(t)>l&&0===s&&1===o?0===r?12:r:r+1,m=Math.abs(t)>l&&0===s&&1===o?e.daysInMonth(new Date(f+"/1/"+h)):o,v=Math.abs(t)>l?0===s?23:s-1:s,S=Math.abs(t)>l?60+(l+t):l+t):(h=l+t>60&&23===s&&o===e.daysInMonth(new Date(r+1+"/1/"+i))&&11===r?i+1:i,f=l+t>60&&23===s&&o===e.daysInMonth(new Date(r+1+"/1/"+i))&&11===r?1:r+1,m=l+t>60&&23===s&&o===e.daysInMonth(new Date(f+"/1/"+h))?1:o,v=l+t>60&&23===s?0:s,S=l+t>60?60-(l+t):l+t);var g=f+"/"+m+"/"+h+" "+v+":"+S+":"+c;return new Date(g)};switch(t){case"DAY":return d(n);case"MONTH":return u(n);case"YEAR":var f=r+1+"/"+o+"/"+(i+n)+" "+s+":"+l+":"+c;return new Date(f);case"HOUR":if(Math.abs(n)>=24){var m=0>n?Math.ceil(n/24):Math.floor(n/24);return a=d(m),o=a.getDate(),r=a.getMonth(),i=a.getFullYear(),s=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),p=0,n=0>n?Math.ceil(n-24*m):Math.floor(n-24*m),g(n)}return g(n);case"MINUTES":if(Math.abs(n)>=60){var v=0>n?Math.ceil(n/60):Math.floor(n/60),m=0;return Math.abs(v)>=24&&(m=0>v?Math.ceil(v/24):Math.floor(v/24),v-=24*m,a=d(m),o=a.getDate(),r=a.getMonth(),i=a.getFullYear(),s=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),p=0),Math.abs(v)>0&&(a=g(v),o=a.getDate(),r=a.getMonth(),i=a.getFullYear(),s=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),p=0),n-=24*m*60+60*v,h(n)}return h(n);case"SECONDS":if(c+n>60){var S=Math.floor((c+n)/60);if(n=c+n-60*S,l+S>60){var y=Math.floor((l+S)/60);if(S=l+S-60*y,s+y>23){var M=e.daysInMonth(a),T=Math.floor((s+y)/24);if(y=s+y-24*T,o+T>M){for(p=o+T;p>M;)i=r+1==12?i+1:i,r=r+1==12?0:r+1,p-=M,M=e.daysInMonth(new Date(r+1+"/1/"+i));var f=r+1+"/"+p+"/"+i+" "+y+":"+S+":"+n;return new Date(f)}var f=r+1+"/"+(o+T)+"/"+i+" "+y+":"+S+":"+n;return new Date(f)}var f=r+1+"/"+o+"/"+i+" "+(s+y)+":"+S+":"+n;return new Date(f)}var f=r+1+"/"+o+"/"+i+" "+s+":"+(l+S)+":"+n;return new Date(f)}var f=r+1+"/"+o+"/"+i+" "+s+":"+l+":"+(c+n);return new Date(f);default:return new Date("1/1/1900")}},e.isLeapYear=function(e){return isNaN(e)?!1:1==new Date(e,1,29).getMonth()},e.daysInMonth=function(t){if(!e.dateValid(t))return 0;var n=t.getMonth(),a=t.getFullYear(),o=0;o=e.isLeapYear(a)?29:28;var r=[31,o,31,30,31,30,31,31,30,31,30,31];return r[n]},e.dateValid=function(e){var t=!1;try{var n=new Date(e);t="Invalid Date"!=n.toDateString()?!0:!1}catch(a){t=!1}return t},e.firstDayOfMonth=function(t){e.dateValid(t)||(t=new Date);var n=t.getMonth()+1,a=t.getFullYear();return("0"+n).slice(-2)+"/01/"+String(a)},e.lastDayOfMonth=function(t){e.dateValid(t)||(t=new Date);var n=t.getMonth()+1,a=e.daysInMonth(t),o=t.getFullYear();return("0"+n).slice(-2)+"/"+("0"+a).slice(-2)+"/"+String(o)},e.isWeekDay=function(n){if(e.dateValid(n)){var a=new Date(n),o=a.getDay();return o!==t.Sunday&&o!==t.Saturday}return!1},e.isWeekendDay=function(n){if(e.dateValid(n)){var a=new Date(n),o=a.getDay();return o===t.Sunday||o===t.Saturday}return!1},e.getDayOfWeek=function(t){if(e.dateValid(t)){var n=new Date(t),a=n.getDay();return a}return void 0},e}();e.KrodzoneDate=n;var a=function(){function e(e){n.dateValid(e)||(e=new Date),this.Hour=e.getHours()>12?e.getHours()-12:0==e.getHours()?12:e.getHours(),this.Minutes=e.getMinutes(),this.Seconds=e.getSeconds(),this.Meridian=e.getHours()>=12?"PM":"AM"}return e.prototype.setTime=function(e){n.dateValid(e)&&(this.Hour=e.getHours()>12?e.getHours()-12:0==e.getHours()?12:e.getHours(),this.Minutes=e.getMinutes(),this.Seconds=e.getSeconds(),this.Meridian=e.getHours()>=12?"PM":"AM")},e.prototype.toHourString=function(){return("0"+this.Hour).slice(-2)},e.prototype.toMinuteString=function(){return("0"+this.Minutes).slice(-2)},e.prototype.toTimeString=function(){return(this.Hour<10?"0"+this.Hour:this.Hour)+":"+(this.Minutes<10?"0"+this.Minutes:this.Minutes)+" "+this.Meridian},e.toTimeString=function(e){n.dateValid(e)||(e=new Date);var t=e.getHours()>12?e.getHours()-12:0==e.getHours()?12:e.getHours(),a=e.getMinutes(),o=e.getHours()>=12?"PM":"AM";return("0"+t).slice(-2)+":"+("0"+a).slice(-2)+" "+o},e}();e.KrodzoneTime=a}(Krodzone||(Krodzone={}));