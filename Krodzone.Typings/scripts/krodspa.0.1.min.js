/*******************************************************************************************
 *
 *  KrodSpa (Krodzone's Spa Framework) provides a lightweight JavaScript based framework for
 *  creating SPA (Single Page Application) applications.
 *
 *  Copyright (C) 2005  Krodzone Technologies, LLC.
 *
 *  This program is free software: you can redistribute it and/or modify it under the terms
 *  of the GNU General Public License as published by the Free Software Foundation, either
 *  version 3 of the License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 *  See the GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along with this program.
 *  If not, see <http://www.gnu.org/licenses/>.
 *
 *******************************************************************************************/
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},_this=this,currentApplication,pageController,currentController,container,removeEscapeChars=function(n){try{return decodeURIComponent(n)}catch(t){return n}},settingFetcher=function(n,t){var r=undefined,i;if(t&&t.length>0)for(i=0;i<t.length;i++)if(t[i].Hash.toUpperCase()===n.toUpperCase()){r=t[i];break}return r},controllerFetcher=function(n,t){var r=undefined,i;if(t&&t.length>0)for(i=0;i<t.length;i++)if(t[i].Name.toUpperCase()===n.toUpperCase()){r=t[i];break}return r},Promise,KrodSpa,Krodzone;$(document).ready(function(){var o=$("div[view-container]"),u=$("body")[0],f,s,e,i;if(KrodSpa.Application.Applications!==undefined&&KrodSpa.Application.Applications.length>0&&(f=$("html")[0],f&&f.hasAttribute("application")&&(s=f.getAttribute("application"),currentApplication=KrodSpa.Application.Get(s),currentApplication!==undefined))){if(u!==undefined&&$(u).attr("controller")){var h=window.location.href,c=$(u).attr("controller"),r=h.indexOf("?")>-1?h.split("?")[1].split("&"):undefined;if(pageController=controllerFetcher(c,currentApplication.Controllers),pageController!==undefined){if(r!==undefined)for(pageController.Scope.Parameters={},e=0;e<r.length;e++)i=r[e].split("="),i!==undefined&&i.length===2&&(pageController.Scope.Parameters[i[0]]=i[1].indexOf("#")>-1?i[1].substring(0,i[1].indexOf("#")):i[1]);currentApplication.InitializeController(pageController,u)}}if(o&&o.length>0){container=o[0];var n=window.location.hash,r=n.indexOf("?")>-1?n.split("?")[1].split("&"):undefined,t=undefined;n=n.indexOf("?")>-1?n.split("?")[0]:n;n=n.lastIndexOf("/")!==n.indexOf("/")?n.substring(0,n.lastIndexOf("/")+1)+"{id}":n;n=n.lastIndexOf("/")===n.indexOf("/")&&!isNaN(parseInt(n.substring(2)))?"#/{id}":n;n!==""?(t=settingFetcher(n.replace("#",""),currentApplication.Settings),t?(currentController=controllerFetcher(t.Controller,currentApplication.Controllers),KrodSpa.Data.WebQuery.load(t.Template).then(function(t){var u,i;if($(container).html(t),currentController){if(r!==undefined)for(currentController.Scope.Parameters={},u=0;u<r.length;u++)i=r[u].split("="),i!==undefined&&i.length===2&&(currentController.Scope.Parameters[i[0]]=i[1]);n.indexOf("{id}")>-1&&(currentController.Scope.ID=window.location.hash.substring(window.location.hash.lastIndexOf("/")+1));currentApplication.InitializeController(currentController,container)}}).catch(function(){$(container).html("<h3>Error Loading View<\/h3>")})):(t=settingFetcher(currentApplication.DefaultHash,currentApplication.Settings),t&&(window.location.hash=t.Hash))):(t=settingFetcher(currentApplication.DefaultHash,currentApplication.Settings),t&&(window.location.hash=t.Hash))}}});window.onhashchange=function(){var n,t,i;currentApplication!==undefined&&container!==undefined&&(n=window.location.hash.replace("#",""),t=n.indexOf("?")>-1?n.split("?")[1].split("&"):undefined,n=n.indexOf("?")>-1?n.split("?")[0]:n,n=n.lastIndexOf("/")!==n.indexOf("/")?n.substring(0,n.lastIndexOf("/")+1)+"{id}":n,n=n.lastIndexOf("/")===n.indexOf("/")&&!isNaN(parseInt(n.substring(2)))?"/{id}":n,i=settingFetcher(n,currentApplication.Settings),i&&(currentController&&currentController.StopIterations(),currentController=controllerFetcher(i.Controller,currentApplication.Controllers),KrodSpa.Data.WebQuery.load(i.Template).then(function(i){var u,r;if($(container).html(i),currentController){if(t!==undefined)for(currentController.Scope.Parameters={},u=0;u<t.length;u++)r=t[u].split("="),r!==undefined&&r.length===2&&(currentController.Scope.Parameters[r[0]]=r[1]);n.indexOf("{id}")>-1&&(currentController.Scope.ID=window.location.hash.substring(window.location.hash.lastIndexOf("/")+1));currentApplication.InitializeController(currentController,container)}}).catch(function(){$(container).html("<h3>Error Loading View<\/h3>")})))};HTMLElement.prototype.enable=function(){_this.setAttribute("disabled","")};HTMLElement.prototype.disable=function(){_this.setAttribute("disabled","disabled")};Function.prototype.toKeyString=function(n){if(typeof n!="object"&&typeof n!="function"||n===null)throw new TypeError("Object.toKeyString called on a non-object");var i=Object.keys(n),t="";return i.forEach(function(i){if((typeof n[i]=="string"||typeof n[i]=="number"||typeof n[i]=="boolean")&&(t=t===""?i+"="+encodeURI(n[i]):t+"&"+i+"="+encodeURI(n[i])),typeof n[i]=="object"&&(Object.prototype.toString.call(n[i])==="[object String]"||Object.prototype.toString.call(n[i])==="[object Number]"||Object.prototype.toString.call(n[i])==="[object Boolean]")&&(t=t===""?i+"="+encodeURI(n[i]):t+"&"+i+"="+encodeURI(n[i])),typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object Date]"){var u=n[i].getMonth()+1,f=n[i].getDate(),e=n[i].getFullYear(),o=n[i].getHours()>12?n[i].getHours()-12:n[i].getHours()==0?12:n[i].getHours(),s=n[i].getMinutes(),h=n[i].getHours()>=12?"PM":"AM",r=("0"+u).slice(-2)+"/"+("0"+f).slice(-2)+"/"+String(e)+" "+("0"+o).slice(-2)+":"+("0"+s).slice(-2)+" "+h;t=t===""?i+"="+r:t+"&"+i+"="+r}}),t};Function.prototype.toJson=function(n){if(typeof n!="object"&&typeof n!="function"||n===null)throw new TypeError("Object.toKeyString called on a non-object");var i=Object.keys(n),t="{";return i.forEach(function(i){if((typeof n[i]=="string"||typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object String]")&&(t=(t==="{"?t+'"'+i+'":':t+',"'+i+'":')+('"'+n[i]+'"')),(typeof n[i]=="number"||typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object Number]")&&(t=(t==="{"?t+'"'+i+'":':t+',"'+i+'":')+n[i]),(typeof n[i]=="boolean"||typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object Boolean]")&&(t=t==="{"?t+'"'+i+'":':t+',"'+i+'":',t=n[i]===!0?t+"true":t+"false"),typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object Date]"){var r=n[i].getMonth()+1,u=n[i].getDate(),f=n[i].getFullYear(),e=n[i].getHours(),o=n[i].getMinutes(),s=n[i].getSeconds(),h=String(f)+"-"+("0"+r).slice(-2)+"-"+("0"+u).slice(-2)+"T"+("0"+e).slice(-2)+":"+("0"+o).slice(-2)+":"+("0"+s).slice(-2);t=(t==="{"?t+'"'+i+'":':t+',"'+i+'":')+('"'+h+'"')}typeof n[i]=="object"&&Object.prototype.toString.call(n[i])==="[object Object]"&&(t=(t==="{"?t+'"'+i+'":':t+',"'+i+'":')+Object.toJson(n[i]))}),t+="}"};Function.prototype.hasKey=function(n,t){for(var f,r=!1,u=Object.keys(n),i=0;i<u.length;i++)if(f=u[i],f===t){r=!0;break}return r};window.location.getParameterByName=function(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i),t=r.exec(window.location.href);return t==null?"":removeEscapeChars(t[1].replace(/\+/g," "))};window.location.getAbsolutePath=function(){for(var r=window.location.protocol,u=window.location.host,f=window.location.pathname,t=f.split("/"),i=r+"//"+u,n=0;n<t.length;n++)if(t[n].indexOf(".")===-1)i+=t[n]+"/";else break;return i};Promise=function(){function n(){var n=this;n.then=function(t){return n.onResolved=t,n};n.catch=function(t){return n.onRejected=t,n};n.resolve=function(t){if(n.onResolved)n.onResolved(t)};n.reject=function(t){if(n.onRejected)n.onRejected(t)}}return n}(),function(n){var t,r,a,e,o,u,f,v,y,i,s,h,c,l;(function(n){n[n.Int=0]="Int";n[n.Float=1]="Float";n[n.Date=2]="Date";n[n.Time=3]="Time";n[n.DateTime=4]="DateTime";n[n.Boolean=5]="Boolean";n[n.String=6]="String"})(n.DataTypeArgs||(n.DataTypeArgs={}));t=n.DataTypeArgs;r=function(){function n(){var n=this}return n.Instance=function(){var i=new n;return i.INT=t.Int,i.FLOAT=t.Float,i.DATE=t.Date,i.TIME=t.Time,i.DATETIME=t.DateTime,i.BOOLEAN=t.Boolean,i.STRING=t.String,i},n}();n.DataTypeCollection=r;a=function(){function t(t){var r=this,u;this.Config=function(n){if(n&&n.length)for(var t=0;t<n.length;t++)(function(n,t){for(var i=-1,u,r=0;r<n.length;r++)if(n[r].Hash.toUpperCase()===t.Hash.toUpperCase()){i=r;break}i===-1?(u=new e(t.Hash?t.Hash:"",t.Template?t.Template:"",t.Controller?t.Controller:""),n.push(u)):(n[i].Hash=t.Hash?t.Hash:n[i].Hash,n[i].Template=t.Template?t.Template:n[i].Template,n[i].Controller=t.Controller?t.Controller:n[i].Controller)})(r.Settings,n[t]);return r};this.Default=function(n){return r.DefaultHash=n,r};this.Controller=function(n,t){for(var i=-1,f,u=0;u<r.Controllers.length;u++)if(r.Controllers[u].Name.toUpperCase()===n.toUpperCase()){i=u;break}return i===-1?(f=new o(n,t),r.Controllers.push(f)):(r.Controllers[i].Name=n,r.Controllers[i].Module=t),r};this.InitializeController=function(t,u){return t.Module(t.Scope,n.Data.WebQuery),setTimeout(function(){var r=u.getElementsByTagName("variable"),e,s,h,f,o,n,c,l;if(r!==undefined&&r.length>0)for(n=0;n<r.length;n++)r[n].hasAttribute("model")&&(e=r[n].getAttribute("model"),e.indexOf(".")>-1?(h=e.split("."),s=h[0]):s=e,t.Scope[s]&&t.WatchProperty(r[n],e));if(f=$(u).find("[click]"),f&&f.length>0)for(n=0;n<f.length;n++)(function(n){var r=f[n],i=f[n].getAttribute("click");if(i=i.substring(0,i.indexOf("(")),t.Scope[i])$(r).on("click",function(n){t.Scope[i](n)})})(n);if(o=$(u).find("[binding]"),o&&o.length>0)for(n=0;n<o.length;n++)c=o[n],l=i.CreateBoundField(t.Scope,c),t.BoundFields.push(l);t.SetView(u)},200),r};u=this;u.Name=t;u.DefaultHash="";u.Controllers=[];u.Settings=[]}return t.Create=function(n){var i,r;for(t.Applications||(t.Applications=[]),r=0;r<t.Applications.length;r++)if(t.Applications[r].Name.toUpperCase()===n.toUpperCase()){i=t.Applications[r];break}return i===undefined&&(i=new t(n),t.Applications.push(i)),i},t.Get=function(n){var r=undefined,i;if(t.Applications)for(i=0;i<t.Applications.length;i++)if(t.Applications[i].Name.toUpperCase()===n.toUpperCase()){r=t.Applications[i];break}return r},t}();n.Application=a;e=function(){function n(n,t,i){var r=this;r.Hash=n;r.Template=t;r.Controller=i}return n}();n.ConfigSetting=e;o=function(){function t(t,r){var e=this,o,s;if(this.GetDynamicValue=function(n,t){return n?n:t},this.GetObject=function(n){var i,t;if(n.indexOf(".")>-1){t=n.split(".");switch(t.length){case 2:e.Scope[t[0]]||(e.Scope[t[0]]={});i=e.Scope[t[0]];break;case 3:e.Scope[t[0]]||(e.Scope[t[0]]={});e.Scope[t[0]][t[1]]||(e.Scope[t[0]][t[1]]={});i=e.Scope[t[0]][t[1]];break;case 4:e.Scope[t[0]]||(e.Scope[t[0]]={});e.Scope[t[0]][t[1]]||(e.Scope[t[0]][t[1]]={});e.Scope[t[0]][t[1]][t[2]]||(e.Scope[t[0]][t[1]][t[2]]={});i=e.Scope[t[0]][t[1]][t[2]];break;case 5:e.Scope[t[0]]||(e.Scope[t[0]]={});e.Scope[t[0]][t[1]]||(e.Scope[t[0]][t[1]]={});e.Scope[t[0]][t[1]][t[2]]||(e.Scope[t[0]][t[1]][t[2]]={});e.Scope[t[0]][t[1]][t[2]][t[3]]||(e.Scope[t[0]][t[1]][t[2]][t[3]]={});i=e.Scope[t[0]][t[1]][t[2]][t[3]]}}else i=e.Scope;return i},this.GetModelValue=function(n){var i,t;if(n.indexOf(".")>-1){t=n.split(".");switch(t.length){case 2:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.Scope[t[0]][t[1]]?e.Scope[t[0]][t[1]]:"";i=e.Scope[t[0]][t[1]];break;case 3:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.Scope[t[0]][t[1]][t[2]]?e.Scope[t[0]][t[1]][t[2]]:"";i=e.Scope[t[0]][t[1]][t[2]];break;case 4:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.Scope[t[0]][t[1]][t[2]][t[3]]?e.Scope[t[0]][t[1]][t[2]][t[3]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]];break;case 5:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]];break;case 6:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]];break;case 7:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]];break;case 8:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]];break;case 9:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]];break;case 10:e.Scope[t[0]]=e.EnsureObjectExists(e.Scope[t[0]]);e.Scope[t[0]][t[1]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]]);e.Scope[t[0]][t[1]][t[2]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]]);e.Scope[t[0]][t[1]][t[2]][t[3]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]]=e.EnsureObjectExists(e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]]);e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]][t[9]]=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]][t[9]]?e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]][t[9]]:"";i=e.Scope[t[0]][t[1]][t[2]][t[3]][t[4]][t[5]][t[6]][t[7]][t[8]][t[9]]}}else e.Scope[n]=e.Scope[n]?e.Scope[n]:"",i=e.Scope[n];return i},this.SetModelValue=function(n,t){if(n.indexOf(".")>-1){var i=n.split(".");switch(i.length){case 2:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=t;break;case 3:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=t;break;case 4:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=t;break;case 5:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=t;break;case 6:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]=t;break;case 7:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]=t;break;case 8:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]]=t;break;case 9:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]]=t;break;case 10:e.Scope[i[0]]=e.EnsureObjectExists(e.Scope[i[0]]);e.Scope[i[0]][i[1]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]]);e.Scope[i[0]][i[1]][i[2]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]]);e.Scope[i[0]][i[1]][i[2]][i[3]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]]=e.EnsureObjectExists(e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]]);e.Scope[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]][i[9]]=t}}else e.Scope[n]=e.Scope[n]?e.Scope[n]:"",t=e.Scope[n];return t},this.EnsureObjectExists=function(n){return n?n:{}},o=this,o.Name=t,o.Module=r,o.Dependencies=[],o.BoundFields=[],o.Scope={},o.Iterations=new f,o.StopIterations=function(){o.Iterations!==undefined&&o.Iterations.StopAll()},o.SetView=function(n){var t,i,r;if(o.View=n,t=$(o.View).find("[iteration]"),t!==undefined&&t!==null&&t.length!==undefined){for(i=0;i<t.length;i++){try{r=new u(o.View,t[i],o.Scope)}catch(f){r=undefined}o.Iterations.Add(r)}o.Iterations.RenderAll()}},o.WatchProperty=function(n,t){setInterval(function(n,t){var i=n.innerHTML,u=o.GetObject(t),r;if(u)if(t.indexOf(".")>-1){r=t.split(".");switch(r.length){case 2:i=o.GetDynamicValue(u[r[1]],n.innerHTML);break;case 3:i=o.GetDynamicValue(u[r[2]],n.innerHTML);break;case 4:i=o.GetDynamicValue(u[r[3]],n.innerHTML);break;case 5:i=o.GetDynamicValue(u[r[4]],n.innerHTML)}}else i=o.GetDynamicValue(o.Scope[t],n.innerHTML);n.innerHTML=removeEscapeChars(i)},200,n,t)},o.Scope.ShowModal=function(t,r){var v=[],s=t.getElementsByTagName("variable"),c,l,a,h,e;if(s!==undefined&&s.length>0)for(e=0;e<s.length;e++)s[e].hasAttribute("model")&&(c=s[e].getAttribute("model"),c.indexOf(".")>-1?(a=c.split("."),l=a[0]):l=c,o.Scope[l]&&o.WatchProperty(s[e],c));if(h=$(t).find("[click]"),h&&h.length>0)for(e=0;e<h.length;e++)(function(n){var i=h[n],t=h[n].getAttribute("click");if(t=t.substring(0,t.indexOf("(")),o.Scope[t])$(i).on("click",function(n){o.Scope[t](n)})})(e);n.Views.ModalWindow.showDialog(t,new n.Views.ModalWindowArgs(o.Scope,r.ModalWidth,r.ModalCaption,r.FooterText,r.ExecutionHtml,r.CancelHtml,r.ShowExecuteButton,r.ShowCancelButton,function(n){var t;t=function(t,i){n(t,i)};r.ExecuteButtonCallback(t);o.Iterations.Refresh()},r.CancelButtonCallback));setTimeout(function(){var e=$(t).find("[binding]"),c,l,s,r,n,h;if(e&&e.length>0)for(n=0;n<e.length;n++)c=e[n],l=i.CreateBoundField(o.Scope,c),v.push(l);if(s=new f,r=$(t).find("[iteration]"),r!==undefined&&r!==null&&r.length!==undefined){for(n=0;n<r.length;n++){try{h=new u(t,r[n],o.Scope)}catch(a){h=undefined}s.Add(h)}s.RenderAll()}},200)},o.Scope.ShowMessageBox=function(t,i,r,u,f){n.Views.MessageBox.showDialog(t,i,r,u,new n.Views.MessageBoxWindowArgs(o.Scope,"modal-400",i,u,f))},r.arguments)if(r.arguments.length)for(s=0;s<r.arguments.length;s++)o.Dependencies.push(r.arguments[s]);else o.Dependencies.push(r.arguments)}return t}();n.Controller=o;u=function(){function t(t,i,r){var l=this,a,y,p,c,w,o,f,b;this.ShowFilterText="Show Filter";this.HideFilterText="Hide Filter";this.TotalItems=-1;this.IntervalID=-1;var u=this,s=new n.Data.FilterObjectCollection,k=[],d=function(n){var t,r,i;if(u.Scope!==undefined)if(n.indexOf(".")>-1)for(r=n.split("."),i=0;i<r.length;i++)t=t===undefined?u.Scope[r[i]]:t[r[i]];else t=u.Scope[n];return t},h=function(n,t){var i=document.createElement("button");return $(i).addClass("btn"),$(i).addClass("btn-xs"),$(i).addClass("btn-default"),$(i).css({width:"23px",height:"23px",float:"left",margin:"1.5px"}),$(i).html(n),i.onclick=t,i},e=function(n,t){var f=0,o=/\{\{\w{1,}\}\}/gm,e="",i=new Promise,r;if(i.then(function(n){$(u.Element).html(n!==""?n:u.NoItemTemplate);var t=$(u.Element).find("[click]");u.Scope!==undefined&&t!==undefined&&t!==null&&t.length!==undefined&&$(t).each(function(){var n=$(this).attr("click").split("("),o=n&&n.length&&n.length===2?n[0]:undefined,f=isNaN(parseInt($(this).attr("index")))?-1:parseInt($(this).attr("index")),e=n&&n.length&&n.length===2?{}:undefined,t,i,r;if(o){if(e&&(t=n[1].replace(")","").split(","),t&&t.length))for(i=0;i<t.length;i++)t[i].trim().indexOf("$item.")>-1&&(r=t[i].trim().replace("$item.",""),r!==""&&u.FilteredItems[f][r]&&(e[r]=u.FilteredItems[f][r]));$(this).on("click",function(){u.Scope[o](u.FilteredItems[f],e)})}})}),n!==undefined&&n!==null&&n.length!==undefined&&i!==undefined&&i!==null&&t.trim()!=="")for(r=0;r<n.length;r++)(function(r){var u=t.replace('hidden="hidden"',""),c=u.match(o),h,s;c.forEach(function(t){var i=t.replace("{{","").replace("}}","").trim(),f=n[r][i]!==undefined?removeEscapeChars(n[r][i]):"",e=new RegExp("{{"+i+"}}","gm");u=u.replace(e,f)});h=document.createElement("div");$(h).html(u);s=$(h).find("[click]");s!==undefined&&s!==null&&s.length!==undefined&&($(s).each(function(){$(this).attr("index",r)}),u=$(h).html());e+=u;f++;f===n.length&&i.resolve(e)})(r)};if(u.StartWatch=function(){if(u.Element!==undefined&&u.Model!==undefined&&u.Model!==null){if(u.PaginationCtl!==undefined&&u.PageTotal>0){var n=document.createElement("div"),t=document.createElement("div"),i=h('<i class="fa fa-angle-double-left" aria-hidden="true"><\/i>',function(){if(u.FilteredItems){u.PageIndex=0;var n=u.PageIndex*u.PageTotal,t=n+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:n+u.PageTotal;e(u.FilteredItems.slice(n,t),u.ModelTemplate);$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}}),r=h('<i class="fa fa-angle-left" aria-hidden="true"><\/i>',function(){if(u.FilteredItems){u.PageIndex=u.PageIndex-1<0?0:u.PageIndex-1;var n=u.PageIndex*u.PageTotal,t=n+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:n+u.PageTotal;e(u.FilteredItems.slice(n,t),u.ModelTemplate);$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}}),f=h('<i class="fa fa-angle-right" aria-hidden="true"><\/i>',function(){if(u.FilteredItems){u.PageIndex=u.PageIndex+2>u.TotalPages?u.TotalPages-1:u.PageIndex+1;var n=u.PageIndex*u.PageTotal,t=n+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:n+u.PageTotal;e(u.FilteredItems.slice(n,t),u.ModelTemplate);$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}}),o=h('<i class="fa fa-angle-double-right" aria-hidden="true"><\/i>',function(){if(u.FilteredItems){u.PageIndex=u.TotalPages-1;var n=u.PageIndex*u.PageTotal,t=n+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:n+u.PageTotal;e(u.FilteredItems.slice(n,t),u.ModelTemplate);$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}});$(t).css({"font-family":"'Lucida Sans Unicode', Arial, Helvetica, sans-serif",color:"#333","-webkit-border-radius":"3px","-moz-border-radius":"3px","-ms-border-radius":"3px","border-radius":"3px",border:"1px solid #666",float:"left",margin:"1.5px","font-size":"0.85em","text-align":"center","min-width":"150px",height:"23px","padding-top":"2px","font-weight":"bold"});$(t).attr("pagination-display","true");$(n).css({display:"inline-table",height:"35px"});$(n).append(i);$(n).append(r);$(n).append(t);$(n).append(f);$(n).append(o);$(l.PaginationCtl).empty();$(l.PaginationCtl).append(n)}u.IntervalID=setInterval(function(n){var r,t,i;n.FilteredItems!==undefined&&n.FilteredItems!==null&&n.FilteredItems.length!==undefined&&n.FilteredItems.length>0?n.FilteredItems.length!==n.TotalItems&&(n.TotalItems=n.FilteredItems.length,r=/\{\{\w{1,}\}\}/gm,n.PaginationCtl!==undefined&&n.PageTotal>0?(n.TotalPages=n.PageTotal>0&&n.FilteredItems!==undefined&&n.FilteredItems!==null&&n.FilteredItems.length!==undefined?Math.ceil(n.FilteredItems.length/n.PageTotal):1,n.PageIndex=n.PageIndex+1>n.TotalPages?n.TotalPages-1:n.PageIndex,t=n.PageIndex*n.PageTotal,i=t+n.PageTotal>n.FilteredItems.length?n.FilteredItems.length:t+n.PageTotal,e(n.FilteredItems.slice(t,i),n.ModelTemplate),$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)):e(n.FilteredItems,n.ModelTemplate)):(n.TotalItems=0,n.NoItemTemplate!==undefined?$(n.Element).html(n.NoItemTemplate.replace('hidden="hidden"',"")):$(n.Element).html("<h4>No Data<\/h4>"))},500,l)}},u.EndWatch=function(){clearInterval(u.IntervalID)},u.Refresh=function(){if(u.Model&&s&&(u.FilteredItems=u.Model.filter(s.MeetsCriteria),u.FilteredItems)){u.TotalItems=u.FilteredItems!==undefined?u.FilteredItems.length:0;u.TotalPages=Math.ceil((u.FilteredItems!==undefined?u.FilteredItems.length:0)/(u.PageTotal?u.PageTotal>0?u.PageTotal:5:5));u.PageIndex=u.PageIndex>u.TotalPages?0:u.PageIndex;var n=u.PageIndex*u.PageTotal,t=n+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:n+u.PageTotal;e(u.FilteredItems.slice(n,t),u.ModelTemplate);u.PaginationCtl&&$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}},u.Element=i,u.Scope=r,u.ModelTemplate=u.Element&&$(u.Element).find('[template-type="data"]')&&$(u.Element).find('[template-type="data"]').length>0?$(u.Element).find('[template-type="data"]')[0].outerHTML:undefined,u.LoadingTemplate=u.Element&&$(u.Element).find('[template-type="dataloading"]')&&$(u.Element).find('[template-type="dataloading"]').length>0?$(u.Element).find('[template-type="dataloading"]')[0].outerHTML:'<i class="fa fa-refresh fa-spin fa-fw"><\/i><span class="sr-only">Loading Data...<\/span>',u.NoItemTemplate=u.Element&&$(u.Element).find('[template-type="nodata"]')&&$(u.Element).find('[template-type="nodata"]').length>0?$(u.Element).find('[template-type="nodata"]')[0].outerHTML:undefined,u.PageIndex=0,u.Element){if(a=$(u.Element).attr("iteration"),y=$(u.Element).attr("filter-toggle"),a)for(p=a.split(";"),o=0;o<p.length;o++)if(f=p[o].trim().split(":"),f&&f.length&&f.length===2)switch(f[0].trim().toUpperCase()){case"MODEL":if(u.Model=d(f[1].trim()),u.FilteredItems=u.Model&&u.Model.length?u.Model.slice(0,u.Model.length):undefined,u.TotalPages=u.PageTotal>0&&u.FilteredItems!==undefined&&u.FilteredItems!==null&&u.FilteredItems.length!==undefined?Math.ceil(u.FilteredItems.length/u.PageTotal):1,!u.Model&&!u.FilteredItems)return;break;case"PAGINATIONID":u.PaginationCtl=$(t).find("#"+f[1].trim())!==undefined&&$(t).find("#"+f[1].trim()).length>0?$(t).find("#"+f[1].trim())[0]:undefined;break;case"PAGETOTAL":u.PageTotal=isNaN(parseInt(f[1].trim()))?-1:parseInt(f[1].trim());u.TotalPages=u.PageTotal>0&&u.FilteredItems!==undefined&&u.FilteredItems!==null&&u.FilteredItems.length!==undefined?Math.ceil(u.FilteredItems.length/u.PageTotal):1;break;case"FILTER":c=f[1].trim().split(",");c&&c.length&&c.forEach(function(n){var i=n.trim().split("="),r;i&&i.length&&i.length===2&&(r=$(t).find("#"+i[1].trim())!==undefined&&$(t).find("#"+i[1].trim()).length>0?$(t).find("#"+i[1].trim())[0]:undefined,k.push(new v(i[0].trim(),r)))})}if(y)for(w=y.split(";"),o=0;o<w.length;o++)if(f=w[o].trim().split(":"),f&&f.length&&f.length===2)switch(f[0].trim().toUpperCase()){case"TOGGLEID":u.FilterToggle=$(t).find("#"+f[1].trim())!==undefined&&$(t).find("#"+f[1].trim()).length>0?$(t).find("#"+f[1].trim())[0]:undefined;break;case"CONTAINERID":u.FilterContainer=$(t).find("#"+f[1].trim())!==undefined&&$(t).find("#"+f[1].trim()).length>0?$(t).find("#"+f[1].trim())[0]:undefined;break;case"SHOWTEXT":u.ShowFilterText=f[1].trim();break;case"HIDETEXT":u.HideFilterText=f[1].trim()}$(u.Element).empty();$(u.Element).html(u.LoadingTemplate)}if(u.FilterToggle&&u.FilterContainer){$(u.FilterToggle).html(u.ShowFilterText);$(u.FilterContainer).hide();$(u.FilterToggle).on("click",function(){$(u.FilterContainer).toggle();$(u.FilterContainer).is(":visible")?$(u.FilterToggle).html(u.HideFilterText):$(u.FilterToggle).html(u.ShowFilterText)})}k.forEach(function(n){var t=n.Control instanceof HTMLInputElement?n.Control:undefined;if(t!==undefined&&t.tagName.toUpperCase()==="INPUT"&&t.type.toUpperCase()!=="CHECKBOX")$(n.Control).on("keyup",function(){if(s.Add(n.Attribute,$(this).val(),5),u.FilteredItems=u.Model.filter(s.MeetsCriteria),u.FilteredItems){u.PageIndex=0;u.TotalItems=u.FilteredItems!==undefined?u.FilteredItems.length:0;u.TotalPages=Math.ceil((u.FilteredItems!==undefined?u.FilteredItems.length:0)/(u.PageTotal?u.PageTotal>0?u.PageTotal:5:5));var t=u.PageIndex*u.PageTotal,i=t+u.PageTotal>u.FilteredItems.length?u.FilteredItems.length:t+u.PageTotal;e(u.FilteredItems.slice(t,i),u.ModelTemplate);u.PaginationCtl&&$(u.PaginationCtl).find('[pagination-display="true"]').html("Page "+(u.PageIndex+1)+" of "+u.TotalPages)}})});b=u.Model&&u.Model.length?u.Model.length:0;setInterval(function(){u.Model&&u.Model.length?u.Model.length!==b&&(b=u.Model.length,u.FilteredItems=u.Model.filter(s.MeetsCriteria)):(u.Model=[],u.FilteredItems=[])},100)}return t}();n.Iteration=u;f=function(){function n(){var n=this;n.Iterations=[];n.Add=function(t){t!==undefined&&(t.StartWatch(),n.Iterations.push(t))};n.Refresh=function(){n.Iterations.forEach(function(n){n.Refresh()})};n.RenderAll=function(){n.Iterations.forEach(function(n){n.StartWatch()})};n.StopAll=function(){n.Iterations.forEach(function(n){n.EndWatch()})}}return n}();n.IterationCollection=f;v=function(){function n(n,t){var i=this;i.Attribute=n;i.Control=t}return n}();y=function(){function n(){}return n}();n.BindingModel=y;i=function(){function n(n,i){var u=this,f,e;if(this.SetDefaultValue=function(n,t,i){if(n.indexOf(".")>-1){var r=n.split(".");switch(r.length){case 2:u.Scope[r[0]]||(u.Scope[r[0]]={});u.Model=u.Scope[r[0]];u.PropertyName=r[1];u.Model[u.PropertyName]||(u.Model[u.PropertyName]=u.Cast(t,i,u.Model[u.PropertyName]));break;case 3:u.Scope[r[0]]||(u.Scope[r[0]]={});u.Scope[r[0]][r[1]]||(u.Scope[r[0]][r[1]]={});u.Model=u.Scope[r[0]][r[1]];u.PropertyName=r[2];u.Model[u.PropertyName]||(u.Model[u.PropertyName]=u.Cast(t,i,u.Model[u.PropertyName]));break;case 4:u.Scope[r[0]]||(u.Scope[r[0]]={});u.Scope[r[0]][r[1]]||(u.Scope[r[0]][r[1]]={});u.Scope[r[0]][r[1]][r[2]]||(u.Scope[r[0]][r[1]][r[2]]={});u.Model=u.Scope[r[0]][r[1]][r[2]];u.PropertyName=r[3];u.Model[u.PropertyName]||(u.Model[u.PropertyName]=u.Cast(t,i,u.Model[u.PropertyName]));break;case 5:u.Scope[r[0]]||(u.Scope[r[0]]={});u.Scope[r[0]][r[1]]||(u.Scope[r[0]][r[1]]={});u.Scope[r[0]][r[1]][r[2]]||(u.Scope[r[0]][r[1]][r[2]]={});u.Scope[r[0]][r[1]][r[2]][r[3]]||(u.Scope[r[0]][r[1]][r[2]][r[3]]={});u.Model=u.Scope[r[0]][r[1]][r[2]][r[3]];u.PropertyName=r[4];u.Model[u.PropertyName]||(u.Model[u.PropertyName]=u.Cast(t,i,u.Model[u.PropertyName]))}}else u.Model=u.Scope,u.PropertyName=n,u.Model[u.PropertyName]||(u.Model[u.PropertyName]=u.Cast(t,i,u.Model[u.PropertyName]))},this.GetObject=function(n){var i,t;if(n.indexOf(".")>-1){t=n.split(".");switch(t.length){case 2:u.Scope[t[0]]||(u.Scope[t[0]]={});i=u.Scope[t[0]];break;case 3:u.Scope[t[0]]||(u.Scope[t[0]]={});u.Scope[t[0]][t[1]]||(u.Scope[t[0]][t[1]]={});i=u.Scope[t[0]][t[1]];break;case 4:u.Scope[t[0]]||(u.Scope[t[0]]={});u.Scope[t[0]][t[1]]||(u.Scope[t[0]][t[1]]={});u.Scope[t[0]][t[1]][t[2]]||(u.Scope[t[0]][t[1]][t[2]]={});i=u.Scope[t[0]][t[1]][t[2]];break;case 5:u.Scope[t[0]]||(u.Scope[t[0]]={});u.Scope[t[0]][t[1]]||(u.Scope[t[0]][t[1]]={});u.Scope[t[0]][t[1]][t[2]]||(u.Scope[t[0]][t[1]][t[2]]={});u.Scope[t[0]][t[1]][t[2]][t[3]]||(u.Scope[t[0]][t[1]][t[2]][t[3]]={});i=u.Scope[t[0]][t[1]][t[2]][t[3]]}}else i=u.Scope;return i},this.Cast=function(n,i,r){var e,u;if(r===void 0&&(r=undefined),i===t.Int||i===t.Float)return isNaN(i===t.Int?parseInt(n):parseFloat(n))?r===undefined||isNaN(i===t.Int?parseInt(r):parseFloat(r))?0:i===t.Int?parseInt(r):parseFloat(r):i===t.Int?parseInt(n):parseFloat(n);if(n!==undefined&&n!==null&&(new Date(n).toDateString()!=="Invalid Date"||new Date("1/1/1900 "+n).toDateString()!=="Invalid Date")&&(i===t.Date||i===t.Time||i===t.DateTime)&&(e=i===t.Time?"1/1/1900 "+n:n,u=n.toUpperCase()==="TODAY"?new Date:new Date(e),u.toDateString()!=="Invalid Date")){var o=u.getMonth()+1,s=u.getDate(),h=u.getFullYear(),f=u.getHours()>12?u.getHours()-12:u.getHours()==0?12:u.getHours(),c=u.getMinutes(),l=u.getSeconds(),a=u.getHours()>=12?"PM":"AM";if(i===t.Date)return new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h));if(i===t.Time)return f=u.getHours(),new String(("0"+f).slice(-2)+":"+("0"+c).slice(-2)+":"+("0"+l).slice(-2));if(i===t.DateTime)return new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h)+" "+("0"+f).slice(-2)+":"+("0"+c).slice(-2)+" "+a)}if(i===t.Boolean)if(n!==undefined&&n!==null){if(typeof n=="boolean"||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Boolean]")return n;if(n==="true"==!0||n==="false"==!0)return new Boolean(n)}else if(r!==undefined&&r!==null){if(typeof r=="boolean"||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Boolean]")return r;if(r==="true"==!0||r==="false"==!0)return new Boolean(r)}else return!1;if(i===t.String)return new String(n!==undefined?encodeURIComponent(n):"")},this.GetParameterValue=function(n,t){for(var i,r=0;r<t.length;r++)if(i=t[r].split(":"),i&&i.length===2&&i[0].trim().toUpperCase()===n.toUpperCase())return i[1].trim();return undefined},f=this,f.Scope=n,f.Field=i,e=$(f.Field).attr("binding").split(";"),e&&e.length>0){var o=f.GetParameterValue("DATATYPE",e),s=f.GetParameterValue("MODEL",e),l=f.GetParameterValue("DEFAULTVALUE",e),h=f.GetParameterValue("GET",e),c=f.GetParameterValue("SET",e),a=r.Instance()[o.toUpperCase()],v=r.Instance().INT;f.DataType=r.Instance()[o.toUpperCase()]!==undefined?r.Instance()[o.toUpperCase()]:t.String;f.FullModel=s;f.SetDefaultValue(s,l,f.DataType);f.Scope[h]!==undefined&&(f.Get=f.Scope[h]);f.Scope[c]!==undefined&&(f.Set=f.Scope[c])}}return n.CreateBoundField=function(n,t){if(n===undefined||t===undefined)return undefined;switch(t.tagName.toUpperCase()){case"SELECT":return new s(n,t);case"INPUT":var i=t.type;return i.toUpperCase()==="CHECKBOX"?new c(n,t):new h(n,t);case"TEXTAREA":return new l(n,t)}},n}();n.BoundFieldBase=i;s=function(n){function t(t,i){var u=this,r,f,e,o,s;for(n.call(this,t,i),this.OptionsChanged=function(n){var t,f,r,i,e;if(u.SelectField.options&&u.SelectField.options.length&&n&&n.length){if(u.SelectField.options.length===n.length){for(t=0;t<n.length;t++){for(f=n[t],r=!1,i=0;i<u.SelectField.options.length;i++)if(e=u.SelectField.options[i],f.isSameNode(e)){r=!0;break}if(!r)return!0}return!1}return!0}return!0},r=this,e=!1,r.SelectField=i,r.SelectField.selectedIndex=-1,r.Options=[],o=0;o<r.SelectField.options.length;o++)s=r.SelectField.options[o],r.Options.push(s);r.SelectField.onchange=function(){e=!0;r.Get?(r.Model[r.PropertyName]=r.Get(),f=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(removeEscapeChars(r.SelectField.value),r.DataType),f=r.Model[r.PropertyName]);e=!1};setInterval(function(){var n,t;if(!e){if(r.Model=r.GetObject(r.FullModel),r.OptionsChanged(r.Options)){for(r.SelectField.selectedIndex=-1,r.Options=[],n=0;n<r.SelectField.options.length;n++)t=r.SelectField.options[n],r.Options.push(t);r.Set?r.Set(r.SelectField,r.Model):r.SelectField.value=removeEscapeChars(r.Model[r.PropertyName])}r.Model[r.PropertyName]!==f&&(r.Set?r.Set(r.SelectField,r.Model):r.SelectField.value=removeEscapeChars(r.Model[r.PropertyName]),f=r.Model[r.PropertyName])}},1e3)}return __extends(t,n),t}(i);n.BoundSelectField=s;h=function(n){function t(t,i){n.call(this,t,i);var r=this,u=r.Model[r.PropertyName],f=!1;r.InputField=i;r.InputField.value=removeEscapeChars(r.Model[r.PropertyName]);r.InputField.onkeyup=function(){f=!0;r.Get!==undefined?(r.Model[r.PropertyName]=r.Get(),u=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(r.InputField.value,r.DataType),u=r.Model[r.PropertyName]);f=!1};r.InputField.onchange=function(){f=!0;r.Get!==undefined?(r.Model[r.PropertyName]=r.Get(),u=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(r.InputField.value,r.DataType),u=r.Model[r.PropertyName]);f=!1};setInterval(function(){f||(r.Model=r.GetObject(r.FullModel),r.Model[r.PropertyName]!==u&&(r.Set!==undefined?r.Set(r.InputField,r.Model):r.InputField.value=removeEscapeChars(r.Model[r.PropertyName]),u=r.Model[r.PropertyName]))},1e3)}return __extends(t,n),t}(i);n.BoundInputField=h;c=function(n){function t(t,i){n.call(this,t,i);var r=this,u=r.Model[r.PropertyName],f=!1;r.CheckBox=i;r.Set!==undefined?r.Set(r.CheckBox,r.Model):$(r.CheckBox).prop("checked",r.Cast(r.Model[r.PropertyName],r.DataType));r.CheckBox.onclick=function(){f=!0;r.Get!==undefined?(r.Model[r.PropertyName]=r.Get(),u=r.Cast(r.Model[r.PropertyName],r.DataType)):(r.Model[r.PropertyName]=$(r.CheckBox).prop("checked"),u=r.Cast(r.Model[r.PropertyName],r.DataType));f=!1};setInterval(function(){f||(r.Model=r.GetObject(r.FullModel),r.Model[r.PropertyName]!==u&&(r.Set!==undefined?r.Set(r.CheckBox,r.Model):$(r.CheckBox).prop("checked",r.Cast(r.Model[r.PropertyName],r.DataType)),u=r.Cast(r.Model[r.PropertyName],r.DataType)))},500)}return __extends(t,n),t}(i);n.BoundCheckBoxField=c;l=function(n){function t(t,i){n.call(this,t,i);var r=this,u=r.Model[r.PropertyName],f=!1;r.InputField=i;r.InputField.value=removeEscapeChars(r.Model[r.PropertyName]);r.InputField.onkeyup=function(){f=!0;r.Get!==undefined?(r.Model[r.PropertyName]=r.Get(),u=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(r.InputField.value,r.DataType),u=r.Model[r.PropertyName]);f=!1};r.InputField.onchange=function(){f=!0;r.Get!==undefined?(r.Model[r.PropertyName]=r.Get(),u=r.Model[r.PropertyName]):(r.Model[r.PropertyName]=r.Cast(r.InputField.value,r.DataType),u=r.Model[r.PropertyName]);f=!1};setInterval(function(){f||(r.Model=r.GetObject(r.FullModel),r.Model[r.PropertyName]!==u&&(r.Set!==undefined?r.Set(r.InputField,r.Model):r.InputField.value=removeEscapeChars(r.Model[r.PropertyName]),u=r.Model[r.PropertyName]))},500)}return __extends(t,n),t}(i);n.BoundTextAreaField=l}(KrodSpa||(KrodSpa={})),function(n){var t;(function(n){var t,i,r,f,e,u,o;(function(n){n[n.Opened=1]="Opened";n[n.HeadersReceived=2]="HeadersReceived";n[n.LoadingResponse=3]="LoadingResponse";n[n.Done=4]="Done"})(n.HttpReadyStateArgs||(n.HttpReadyStateArgs={}));t=n.HttpReadyStateArgs,function(n){n[n.CacheControl=0]="CacheControl";n[n.Accept=1]="Accept";n[n.ContentType=2]="ContentType";n[n.Authorization=5]="Authorization"}(n.HeaderTypeArgs||(n.HeaderTypeArgs={}));i=n.HeaderTypeArgs;r=function(){function n(n,t){var r=this;r.Value=t;switch(n){case i.Accept:r.Key="Accept";break;case i.Authorization:r.Key="Authorization";break;case i.CacheControl:r.Key="Cache-Control";break;case i.ContentType:r.Key="Content-Type"}}return n.GetHeaderKeyValue=function(n){switch(n){case i.Accept:return"Accept";case i.Authorization:return"Authorization";case i.CacheControl:return"Cache-Control";case i.ContentType:return"Content-Type";default:return""}},n.NoCache=function(){return new n(i.CacheControl,"no-cache")},n.AcceptJSon=function(){return new n(i.Accept,"text/json")},n.AcceptXML=function(){return new n(i.Accept,"text/xml")},n.ContentTypeFormUrlEncoded=function(){return new n(i.ContentType,"application/x-www-form-urlencoded")},n.ContentTypeApplicationJSon=function(){return new n(i.ContentType,"application/json")},n}();n.HttpHeader=r;f=function(){function n(){var t=this,n=[];t.Length=function(){return n.length};t.Item=function(t){return t<n.length?n[t]:null};t.Get=function(t){for(var u=undefined,i=0;i<n.length;i++)if(n[i].Key===r.GetHeaderKeyValue(t)){u=n[i];break}return u};t.HasHeader=function(t){for(var i=0;i<n.length;i++)if(n[i].Key===r.GetHeaderKeyValue(t))return!0;return!1};t.AddHeader=function(t){if(t){for(var i=0;i<n.length;i++)if(n[i].Key===t.Key){n[i].Value+=", "+t.Value;return}n.push(t)}};t.CreateHeader=function(t,i){for(var f=new r(t,i),u=0;u<n.length;u++)if(n[u].Key===f.Key){n[u].Value+=", "+i;return}n.push(f)}}return n}();n.HttpHeaderCollection=f;e=function(){function n(){}return n.load=function(i,r){var u,e;r===void 0&&(r=!1);var h=$("body")[0],f=n.CreateElement("div","",undefined,undefined),s=n.CreateElement("div","",undefined,undefined),o=n.CreateProgressWindow(f,s);r===!0&&($(h).append(f),$(h).append(o));u=new XMLHttpRequest;e=new Promise;try{u.onreadystatechange=function(){if(u.readyState===t.Opened&&$(s).html("Sending Request..."),u.readyState===t.HeadersReceived&&$(s).html("Receiving Response..."),u.readyState===t.LoadingResponse&&$(s).html("Processing Data..."),u.readyState===t.Done&&u.status===200&&(r===!0&&($(o).remove(),$(f).remove()),e.resolve(u.responseText?u.responseText:u.responseXML?u.responseXML:u.response?u.response:"")),u.readyState===t.Done&&u.status!==200){r===!0&&($(o).remove(),$(f).remove());var n;try{n=JSON.parse(u.responseText.replace("error","Message"));n.Status=u.status}catch(i){(n===undefined||n===null)&&(n={});n.Message=u.responseText.replace('"error":',"").replace('"Message":',"");n.Status=u.status}e.reject(n)}};u.open("GET",i+"?ranID="+Math.ceil(Math.random()*100+1),!0);u.onerror=function(n){r===!0&&($(o).remove(),$(f).remove());e.reject(n)};u.send(null)}catch(c){r===!0&&($(o).remove(),$(f).remove());e.reject(c)}return e},n.RestfulGet=function(i,r,u,f){var e,o,c;f===void 0&&(f=!0);var a=$("body")[0],s=n.CreateElement("div","",undefined,undefined),l=n.CreateElement("div","",undefined,undefined),h=n.CreateProgressWindow(s,l);f===!0&&($(a).append(s),$(a).append(h));e=new XMLHttpRequest;o=new Promise;try{if(e.onreadystatechange=function(){if(e.readyState===t.Opened&&$(l).html("Sending Request..."),e.readyState===t.HeadersReceived&&$(l).html("Receiving Response..."),e.readyState===t.LoadingResponse&&$(l).html("Processing Data..."),e.readyState===t.Done&&e.status===200){f===!0&&($(h).remove(),$(s).remove());try{o.resolve(JSON.parse(e.responseText))}catch(i){o.resolve(e.responseText?e.responseText:e.responseXML?e.responseXML:e.response?e.response:"")}}if(e.readyState===t.Done&&e.status!==200){f===!0&&($(h).remove(),$(s).remove());var n;try{n=JSON.parse(e.responseText.replace("error","Message"));n.Status=e.status}catch(i){(n===undefined||n===null)&&(n={});n.Message=e.responseText.replace('"error":',"").replace('"Message":',"");n.Status=e.status}o.reject(n)}},r=r!==undefined&&r!==""?"?"+r+"&ranID="+Math.ceil(Math.random()*1e4+1):"?ranID="+Math.ceil(Math.random()*1e4+1),e.open("GET",i+r,!0),u)for(c=0;c<u.Length();c++)e.setRequestHeader(u.Item(c).Key,u.Item(c).Value);e.onerror=function(n){f===!0&&($(h).remove(),$(s).remove());o.reject(n)};e.send(null)}catch(v){f===!0&&($(h).remove(),$(s).remove());o.reject(v)}return o},n.RestfulPost=function(i,r,u){var l=$("body")[0],o=n.CreateElement("div","",undefined,undefined),c=n.CreateElement("div","",undefined,undefined),s=n.CreateProgressWindow(o,c),f,e,h;$(l).append(o);$(l).append(s);f=new XMLHttpRequest;e=new Promise;try{if(f.onreadystatechange=function(){if(f.readyState===t.Opened&&$(c).html("Sending Request..."),f.readyState===t.HeadersReceived&&$(c).html("Receiving Response..."),f.readyState===t.LoadingResponse&&$(c).html("Processing Data..."),f.readyState===t.Done&&f.status===200){$(s).remove();$(o).remove();try{e.resolve(JSON.parse(f.responseText))}catch(i){e.resolve(f.responseText?f.responseText:f.responseXML?f.responseXML:f.response?f.response:"")}}if(f.readyState===t.Done&&f.status!==200){$(s).remove();$(o).remove();var n;try{n=JSON.parse(f.responseText.replace("error","Message"));n.Status=f.status}catch(i){(n===undefined||n===null)&&(n={});n.Message=f.responseText.replace('"error":',"").replace('"Message":',"");n.Status=f.status}e.reject(n)}},f.open("POST",i,!0),u)for(h=0;h<u.Length();h++)f.setRequestHeader(u.Item(h).Key,u.Item(h).Value);f.onerror=function(n){$(s).remove();$(o).remove();e.reject(n)};f.send(typeof r=="object"&&r!==null?Object.toKeyString(r):typeof r=="string"?r:"")}catch(a){$(s).remove();$(o).remove();e.reject(a)}return e},n.RestfulPostAll=function(){var t=$("body")[0],i=n.CreateElement("div","",undefined,undefined),u=n.CreateElement("div","",undefined,undefined),f=n.CreateProgressWindow(i,u),e,r;return $(t).append(i),$(t).append(f),e=new XMLHttpRequest,r=new Promise,r},n.CreateProgressWindow=function(t,i){var o=$("body")[0],r=n.CreateElement("div","",undefined,undefined),u=n.CreateElement("div","",undefined,undefined),f,e;return $(t).css("position","fixed"),$(t).css("left","0"),$(t).css("top","0"),$(t).css("width","100%"),$(t).css("height","100%"),$(t).css("background-color","transparent"),f=0,e=0,e=(o.clientWidth-150)/2,f=(o.clientHeight-150)/2,$(r).css("width","150px"),$(r).css("height","150px"),$(r).css("position","absolute"),$(r).css("left",e+"px"),$(r).css("top",f+"px"),$(r).css("color","#000"),$(r).css("font-family","Arial, Helvetica, sans-serif"),$(r).css("padding","35px 5px 5px 5px"),$(r).css("border","1px solid #e8e4e4"),$(r).css("border-radius","5px"),$(r).css("background-color","#fff"),$(u).css("width","50px"),$(u).css("font-size","95%"),$(u).css("margin-left","auto"),$(u).css("margin-right","auto"),$(u).html('<i class="fa fa-spinner fa-pulse fa-3x"><\/i>'),$(r).append(u),$(i).css("font-size","75%"),$(i).css("padding-top","20px"),$(i).css("text-align","center"),$(r).append(i),r},n.CreateElement=function(n,t,i,r){var u=document.createElement(n);return i!==undefined&&i.forEach(function(n){$(u).addClass(n)}),r!==undefined&&r.forEach(function(n){$(u).attr(n.Key,n.Value)}),u.innerHTML=t,u},n}();n.WebQuery=e;u=function(){function n(){var n=this}return n}();n.FilterObject=u;o=function(){function n(){var n=this;n.Filter=[];n.Add=function(t,i,r){if(n.ContainsField(t))n.UpdateValue(t,i);else{var f=new u;f.FieldName=t;f.FilterValue=i;f.DataType=r;n.Filter.push(f)}};n.UpdateValue=function(t,i){for(var r=0;r<n.Filter.length;r++)if(n.Filter[r].FieldName.toLowerCase()===t.toLowerCase()){n.Filter[r].FilterValue=i;break}};n.ContainsField=function(t){for(var i=0;i<n.Filter.length;i++)if(n.Filter[i].FieldName.toLowerCase()===t.toLowerCase())return!0;return!1};n.MeetsCriteria=function(t){for(var u,f,e,o,s,l,a,v,h,c,y=n.Filter.length,r=0,i=0;i<n.Filter.length;i++)if(t[n.Filter[i].FieldName]!==undefined){u=function(n,t){if(Krodzone.KrodzoneDate.dateValid(n)&&Krodzone.KrodzoneDate.dateValid(t)){var i=new Date(n),r=new Date(t);return i>=r}return!0};switch(n.Filter[i].DataType){case 0:f=isNaN(parseInt(t[n.Filter[i].FieldName]))?-1:parseInt(t[n.Filter[i].FieldName]);e=isNaN(parseInt(n.Filter[i].FilterValue))?-1:parseInt(n.Filter[i].FilterValue);f>-1&&e>-1&&f>=e&&r++;break;case 1:o=isNaN(parseFloat(t[n.Filter[i].FieldName]))?-1:parseFloat(t[n.Filter[i].FieldName]);s=isNaN(parseFloat(n.Filter[i].FilterValue))?-1:parseFloat(n.Filter[i].FilterValue);o>-1&&s>-1&&o>=s&&r++;break;case 2:l=u(t[n.Filter[i].FieldName],n.Filter[i].FilterValue);l&&r++;break;case 3:a=u("1/1/1900 "+t[n.Filter[i].FieldName],"1/1/1900 "+n.Filter[i].FilterValue);a&&r++;break;case 4:v=u(t[n.Filter[i].FieldName],n.Filter[i].FilterValue);v&&r++;u(t[n.Filter[i].FieldName],n.Filter[i].FilterValue)&&r++;break;default:h=t[n.Filter[i].FieldName].toString().toLowerCase();c=n.Filter[i].FilterValue.toString().toLowerCase();c==="none"?h.trim()===""&&r++:h.indexOf(c)>-1&&r++}}else r++;return r===y}}return n}();n.FilterObjectCollection=o})(t=n.Data||(n.Data={}))}(KrodSpa||(KrodSpa={})),function(n){var t;(function(t){var f=function(){function n(){this.CreateElement=function(n,t,i,r){var f=document.createElement(n),u;if(i!==undefined)for(u=0;u<i.length;u++)f.classList.add(i[u]);if(r!==undefined)for(u=0;u<r.Keys.length;u++)f.setAttribute(r.Keys[u],r.Values[u]);return f.innerHTML=t,f};this.GetCssValue=function(n,t){for(var u,i,r,f=0;f<document.styleSheets.length;f++)try{if(u=document.styleSheets[f],i=u.rules?u.rules:u.cssRules?u.cssRules:undefined,i!==undefined)for(r=0;r<i.length;r++)if(i[r].selectorText===n)return i[r].style[t]?i[r].style[t]:""}catch(e){if(e.name!=="SecurityError")throw e;return""}return""};this.GetElementCoordinates=function(n,t,i){var u=n.getBoundingClientRect(),f=document.documentElement,e=Math.ceil(u.top+window.pageYOffset-f.clientTop),r=Math.ceil(u.left+window.pageXOffset-f.clientLeft),o=n.clientHeight;return t&&i&&t===!0&&(r=r-Math.abs(n.clientWidth-i)),new h(r,e+o+2)}}return n}(),h,e,i,r,b,k,d,g,c,l,o,a,v,y,p,w,s,u,nt,tt,it,rt;t.HtmlControl=f;h=function(){function n(n,t){var i=this;i.X=n+"px";i.Y=t+"px"}return n}();t.ElementLocation=h,function(n){n[n.Information=0]="Information";n[n.Question=1]="Question";n[n.Exclamation=2]="Exclamation"}(t.MessageBoxTypeArgs||(t.MessageBoxTypeArgs={}));e=t.MessageBoxTypeArgs,function(n){n[n.Ok=0]="Ok";n[n.OkCancel=1]="OkCancel";n[n.YesNo=2]="YesNo"}(t.MessageBoxButtonArgs||(t.MessageBoxButtonArgs={}));i=t.MessageBoxButtonArgs,function(n){n[n.Ok=0]="Ok";n[n.Cancel=1]="Cancel";n[n.Yes=2]="Yes";n[n.No=3]="No"}(t.MessageBoxResultArgs||(t.MessageBoxResultArgs={}));r=t.MessageBoxResultArgs;b=function(n){function t(t,i){var u=this,r,e,f;n.call(this);this.CreateModalWindow=function(){var t,i,n,r;u.ModalContainer=u.CreateElement("div","",["modal-window",u.ModalArgs.ModalWidth],undefined);u.ModalClose=u.CreateElement("div",'<i class="fa fa-close"><\/i>',undefined,undefined);u.ExecuteButton=u.CreateElement("button",u.ModalArgs.ExecutionHtml,["btn","btn-primary","pull-right"],undefined);u.CancelButton=u.CreateElement("button",u.ModalArgs.CancelHtml,["btn","btn-warning","pull-right"],undefined);t=u.CreateElement("div","<span>"+u.ModalArgs.ModalCaption+"<\/span>",["title"],undefined);t.appendChild(u.ModalClose);u.ModalContainer.appendChild(t);i=u.CreateElement("div","",["body"],undefined);i.appendChild(u.View);u.ModalContainer.appendChild(i);(u.ModalArgs.ShowExecuteButton||u.ModalArgs.ShowCancelButton)&&(n=u.CreateElement("div","",["button"],undefined),u.ModalArgs.ShowCancelButton&&n.appendChild(u.CancelButton),u.ModalArgs.ShowExecuteButton&&n.appendChild(u.ExecuteButton),u.ModalContainer.appendChild(n));r=u.CreateElement("div",u.ModalArgs.FooterText,["footer"],undefined);u.ModalContainer.appendChild(r)};r=this;r.View=t;r.ModalArgs=i;r.Mask=new s("opaque");r.View===undefined&&(r.View=r.CreateElement("div","<strong>Invalid Template<\/strong>",undefined,undefined),r.ModalArgs.ShowCancelButton=!1,r.ModalArgs.ShowExecuteButton=!1);r.Validator=new c(r.View,r.ModalArgs.Scope);e=function(n){var v=$(n).find("formvalidator"),r,i,l,p,o,g,u,w,it,b,rt,k,ut,d;if(v&&v.length>0){var s=v[0],y=$(s).find("[validate]").toArray(),c=$("#"+$(s).attr("errorcontainerid"))?$("#"+$(s).attr("errorcontainerid"))[0]:undefined,e=$("#"+$(s).attr("errormessageid"))?$("#"+$(s).attr("errormessageid"))[0]:undefined;if(e&&($(e).removeClass("alert-danger"),$(e).removeClass("alert-success")),c&&$(c).hide(),y){for(r=!0,i="",l=0;l<y.length;l++){var t=y[l],a=$(t).attr("validationrule").split(","),f=$(t).val();if($(t).removeClass("form-error"),a&&a.length>0)for(p=($(t).attr("validationmessage")?$(t).attr("validationmessage"):"Required field!").split(","),o=0;o<a.length;o++){g=a[o];u=p[o]?p[o]:"Required Field!";switch(g.toUpperCase()){case"RANGE":try{var h=parseFloat(f)===NaN?-1:parseFloat(f),nt=parseFloat(f)===NaN?0:parseFloat($(t).attr("min-range"))===NaN?h+1:parseFloat($(t).attr("min-range")),ft=parseFloat(f)===NaN?1:$(t).attr("max-range")==="*"?h+nt+10:parseFloat($(t).attr("max-range"))===NaN?h-1:parseFloat($(t).attr("max-range"));(h<nt||h>ft)&&($(t).addClass("form-error"),r=!1,i=i===""?u:i+"<br>"+u)}catch(tt){$(t).addClass("form-error");r=!1;i=i===""?tt:i+"<br>"+tt}break;case"NEGATION":w=$("#"+($(t).attr("negationid")?$(t).attr("negationid"):"000"));w?(it=$(w).val(),it===f&&($(t).addClass("form-error"),r=!1,i=i===""?u:i+"<br>"+u)):($(t).addClass("form-error"),r=!1,i=i===""?"A Negation ID must be provided for this type of validation!":i+"<br>A Negation ID must be provided for this type of validation!");break;case"MATCH":b=$("#"+($(t).attr("matchid")?$(t).attr("matchid"):"000"));b?(rt=$(b).val(),rt!==f&&($(t).addClass("form-error"),r=!1,i=i===""?u:i+"<br>"+u)):($(t).addClass("form-error"),r=!1,i=i===""?"A Negation ID must be provided for this type of validation!":i+"<br>A Negation ID must be provided for this type of validation!");break;case"CALLBACK":k=$(t).attr("validationmethod")?$(t).attr("validationmethod").substring(0,$(t).attr("validationmethod").indexOf("(")):"0000";currentController.Scope[k]&&!currentController.Scope[k](f)&&($(t).addClass("form-error"),r=!1,i=i===""?u:i+"<br>"+u);break;case"REGEX":ut=$(t).attr("validationpattern")?$(t).attr("validationpattern"):"(([0-9]|[a-z])s*){0,}";d=f.match(new RegExp(ut,"i"));(!d||d.length<=0)&&($(t).addClass("form-error"),r=!1,i=i===""?u:i+"<br>"+u)}}}return!r&&c&&e&&($(e).addClass("alert-danger"),$(e).html(i),$(c).show()),r}return!0}return!0};f=function(n,t,i){var f=$(n).find("formvalidator");if(f&&f.length>0){var u=f[0],e=$("#"+$(u).attr("errorcontainerid"))?$("#"+$(u).attr("errorcontainerid"))[0]:undefined,r=$("#"+$(u).attr("errormessageid"))?$("#"+$(u).attr("errormessageid"))[0]:undefined;e&&r&&($(r).removeClass("alert-danger"),$(r).removeClass("alert-success"),$(r).addClass(t),$(r).html(i),$(e).show())}};r.CreateModalWindow();document.documentElement.onscroll=function(){var n=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop),t=$(".modal-window").toArray();$(".modal-window").each(function(){var t=$(this)[0];n<t.offsetTop&&t.offsetTop>50&&(t.style.top=n+"px")})};r.SuccessResult=function(n,t){f(r.View,n?"alert-success":"alert-danger",t);n?setTimeout(function(){r.Close()},2e3):(r.ExecuteButton.disabled=!1,r.CancelButton.disabled=!1)};r.Close=function(){r.ModalArgs.CancelButtonCallback!==undefined&&r.ModalArgs.CancelButtonCallback(r);var n=document.getElementsByTagName("body")[0];if(n!==undefined)try{n.removeChild(r.Mask.MaskElement);n.removeChild(r.ModalContainer)}catch(t){}};r.CancelButton.onclick=function(){r.Close()};r.ModalClose.onclick=function(){r.Close()};r.ExecuteButton.onclick=function(){r.ModalArgs.ExecuteButtonCallback&&r.Validator.FormValid()&&(r.ExecuteButton.disabled=!0,r.CancelButton.disabled=!0,r.ModalArgs.ExecuteButtonCallback(r.SuccessResult))};$(r.ModalContainer).find("input").on("keypress",function(n){n.keyCode===13&&r.ExecuteButton.click()})}return __extends(t,n),t.showDialog=function(n,i){var u=new t(n,i),r=document.getElementsByTagName("body")[0],e=u.GetCssValue(".modal-window ."+u.ModalArgs.ModalWidth,"width"),s=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop),f=0,o=0;try{e===""?(f=r.clientWidth*.5,o=(r.clientWidth-f)/2):(f=e.indexOf("%")>0?r.clientWidth*parseFloat("."+e.replace("%","")):parseInt(e.replace("px","")),o=(r.clientWidth-f)/2)}catch(h){f=r.clientWidth*.8;o=(r.clientWidth-f)/2}u.ModalContainer.style.width=f+"px";u.ModalContainer.style.left=o+"px";u.ModalContainer.style.top=s+"px";r.appendChild(u.Mask.MaskElement);r.appendChild(u.ModalContainer)},t}(f);t.ModalWindow=b;k=function(n){function t(t,u,f,o,h){var c=this,l,a;n.call(this);this.CreateModalWindow=function(){var u,f,t,r,n,e;c.ModalContainer=c.CreateElement("div","",["modal-window",c.ModalArgs.ModalWidth],undefined);c.ModalClose=c.CreateElement("div",'<i class="fa fa-close"><\/i>',undefined,undefined);u=c.MsgBoxButtons===i.Ok||c.MsgBoxButtons===i.OkCancel?"OK":c.MsgBoxButtons===i.YesNo?"Yes":"OK";f=c.MsgBoxButtons===i.OkCancel?"Cancel":c.MsgBoxButtons===i.YesNo?"No":"Cancel";c.AssentButton=c.CreateElement("button",u,["btn","btn-sm","btn-default","pull-right"],undefined);c.AbortButton=c.CreateElement("button",f,["btn","btn-sm","btn-danger","pull-right"],undefined);t=c.CreateElement("div","<span>"+c.ModalArgs.ModalCaption+"<\/span>",["title"],undefined);t.appendChild(c.ModalClose);c.ModalContainer.appendChild(t);r=c.CreateElement("div","",["body"],undefined);r.appendChild(c.View);c.ModalContainer.appendChild(r);n=c.CreateElement("div","",["button"],undefined);c.MsgBoxButtons!==i.Ok&&n.appendChild(c.AbortButton);n.appendChild(c.AssentButton);c.ModalContainer.appendChild(n);e=c.CreateElement("div","&nbsp;",["footer"],undefined);c.ModalContainer.appendChild(e)};l=this;a=function(n,t){var i=l.CreateElement("div","",["row"],undefined),r=t===e.Information?"information-icon":t===e.Question?"question-icon":t===e.Exclamation?"exclamation-icon":"information-icon",u=l.CreateElement("div",'<div class="'+r+'">&nbsp;<\/div>',["col-md-2"],undefined),f=l.CreateElement("div",n,["col-md-10","padding-top-10"],undefined);return i.appendChild(u),i.appendChild(f),i};l.View=a(t,f);l.ModalArgs=h;l.MsgBoxType=f;l.MsgBoxButtons=o;l.Mask=new s("opaque");l.CreateModalWindow();document.documentElement.onscroll=function(){var n=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop),t=$(".modal-window").toArray();$(".modal-window").each(function(){var t=$(this)[0];n<t.offsetTop&&t.offsetTop>50&&(t.style.top=n+"px")})};l.Close=function(n){l.ModalArgs.MessageBoxCallback!==undefined&&l.ModalArgs.MessageBoxCallback(n);var t=document.getElementsByTagName("body")[0];if(t!==undefined)try{t.removeChild(l.Mask.MaskElement);t.removeChild(l.ModalContainer)}catch(i){}};l.AbortButton.onclick=function(){var n=l.MsgBoxButtons===i.Ok||l.MsgBoxButtons===i.OkCancel?r.Cancel:r.No;l.Close(n)};l.ModalClose.onclick=function(){var n=l.MsgBoxButtons===i.Ok||l.MsgBoxButtons===i.OkCancel?r.Cancel:r.No;l.Close(n)};l.AssentButton.onclick=function(){var n=l.MsgBoxButtons===i.Ok||l.MsgBoxButtons===i.OkCancel?r.Ok:r.Yes;l.Close(n)}}return __extends(t,n),t.showDialog=function(n,i,r,u,f){var o=new t(n,i,r,u,f),e=document.getElementsByTagName("body")[0],h=o.GetCssValue(".modal-window ."+o.ModalArgs.ModalWidth,"width"),l=50+(document.documentElement.scrollTop===document.body.scrollTop?document.documentElement.scrollTop:document.documentElement.scrollTop>0&&document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop),s=0,c=0;try{h===""?(s=e.clientWidth*.5,c=(e.clientWidth-s)/2):(s=h.indexOf("%")>0?e.clientWidth*parseFloat("."+h.replace("%","")):parseInt(h.replace("px","")),c=(e.clientWidth-s)/2)}catch(a){s=e.clientWidth*.8;c=(e.clientWidth-s)/2}o.ModalContainer.style.width=s+"px";o.ModalContainer.style.left=c+"px";o.ModalContainer.style.top=l+"px";e.appendChild(o.Mask.MaskElement);e.appendChild(o.ModalContainer)},t}(f);t.MessageBox=k;d=function(){function n(n,t,i,r,u,f,e,o,s,h){var c=this;c.Scope=n;c.ModalWidth=t;c.ModalCaption=i;c.FooterText=r;c.ExecutionHtml=u;c.CancelHtml=f;c.ShowExecuteButton=e;c.ShowCancelButton=o;c.ExecuteButtonCallback=s;c.CancelButtonCallback=h}return n}();t.ModalWindowArgs=d;g=function(){function n(n,t,r,u,f){var e=this;e.Scope=n;e.ModalWidth=t;e.ModalCaption=r;e.ShowAbortButton=u===i.OkCancel||u===i.YesNo;e.MessageBoxCallback=f}return n}();t.MessageBoxWindowArgs=g;c=function(){function n(n,t){var i=this,r;if(i.View=n,i.Scope=t,i.CanValidate=!1,i.Fields=[],i.View&&(i.CanValidate=$(i.View).find("formvalidator")&&$(i.View).find("formvalidator").length>0,i.CanValidate===!0)){var u=$(i.View).find("formvalidator")[0],f=$(u).attr("errorcontainerid"),e=$(u).attr("errormessageid");i.ErrorContainer=$(i.View).find('[id="'+f+'"]')&&$(i.View).find('[id="'+f+'"]').length>0?$(i.View).find('[id="'+f+'"]')[0]:undefined;i.ErrorMessage=$(i.View).find('[id="'+e+'"]')&&$(i.View).find('[id="'+e+'"]').length>0?$(i.View).find('[id="'+e+'"]')[0]:undefined;i.ErrorMessage&&($(i.ErrorMessage).removeClass("alert-danger"),$(i.ErrorMessage).removeClass("alert-warning"),$(i.ErrorMessage).removeClass("alert-success"),$(i.ErrorMessage).html(""));i.ErrorContainer&&$(i.ErrorContainer).hide();r=$(u).find("[validation]").toArray();r&&r.length>0?r.forEach(function(n){var t=new l(n,i.Scope,i.View);i.Fields.push(t)}):i.CanValidate=!1}i.FormValid=function(){if(i.CanValidate===!0){var n=new o;try{return i.Fields.forEach(function(t){var i=t.GetValidationResult();$(t.Field).removeClass("form-error");i.IsValid===!1&&($(t.Field).addClass("form-error"),n.IsValid=!1,n.Message=n.Message===""?i.Message:n.Message+"<br>"+i.Message)}),n.IsValid===!1&&i.ErrorContainer&&i.ErrorMessage&&($(i.ErrorMessage).addClass("alert-danger"),$(i.ErrorMessage).html(n.Message),$(i.ErrorContainer).show()),n.IsValid}catch(t){return!1}}else return!0}}return n}();t.ViewValidator=c;l=function(){function n(n,t,i){var r,u,c,g,nt,f,tt;if(this.GetParameterValue=function(n,t){var r,i;if(n.toUpperCase()==="RULE"||n.toUpperCase()==="MESSAGE")for(r=0;r<t.length;r++)if(i=t[r].split(":"),i&&i.length===2&&i[0].trim().toUpperCase()===n.toUpperCase())return i[1].trim().split(",");for(r=0;r<t.length;r++)if(i=t[r].split(":"),i&&i.length===2&&i[0].trim().toUpperCase()===n.toUpperCase())return i[1].trim();return undefined},r=this,r.Field=n,r.Scope=t,r.Rules=[],r.Messages=[],u=$(r.Field).attr("validation").split(";"),u&&u.length>0){var h=r.GetParameterValue("RULE",u),l=r.GetParameterValue("MESSAGE",u),it=r.GetParameterValue("MIN",u),rt=r.GetParameterValue("MAX",u),e=r.GetParameterValue("NEGATIONID",u),s=r.GetParameterValue("MATCHID",u),b=r.GetParameterValue("METHOD",u),k=r.GetParameterValue("PATTERN",u),d=r.GetParameterValue("DATATYPE",u);if(h&&l&&h.length>0&&l.length>0&&h.length===l.length)for(c=0;c<h.length;c++){g=h[c].trim().toUpperCase();nt=l[c].trim();switch(g){case"RANGE":f=new a(d);f.SetMin(it);f.SetMax(rt);break;case"NEGATION":e=e?e:"";f=new v(d,$(i).find("#"+e)&&$(i).find("#"+e).length>0?$(i).find("#"+e)[0]:undefined);break;case"MATCH":s=s?s:"";f=new y(d,$(i).find("#"+s)&&$(i).find("#"+s).length>0?$(i).find("#"+s)[0]:undefined);break;case"CALLBACK":b=b?b:"";f=new p(d,r.Scope,b);break;case"REGEX":k=k?k:"(([0-9]|[a-z])s*){0,}";f=new w(k)}f!==undefined&&f.IsValid!==undefined&&(r.Rules.push(f),r.Messages.push(nt))}}r.GetValidationResult=function(){for(var i,n=new o,t=0;t<r.Rules.length;t++)i=r.Rules[t],i.SetValue(tt(r.Field)),!i.IsValid()==!0&&(n.IsValid=!1,n.Message=n.Message===""?r.Messages[t]:n.Message+"<br>"+r.Messages[t]);return n};tt=function(n){if(n===undefined)return undefined;switch(n.tagName.toUpperCase()){case"SELECT":return $(n).val();case"INPUT":var t=n.type;return t.toUpperCase()==="CHECKBOX"?$(n).prop("checked"):$(n).val();case"TEXTAREA":return $(n).val()}}}return n}();t.ValidationField=l;o=function(){function n(){var n=this;n.IsValid=!0;n.Message=""}return n}();t.ValidationMessage=o;a=function(){function t(t){var i=this,r=0,f=100,e=!1,u=-1,o=n.DataTypeCollection.Instance();i.DataType=o[t.toUpperCase()]!==undefined?o[t.toUpperCase()]:n.DataTypeArgs.Int;i.SetMin=function(t){r=isNaN(i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))?0:i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)};i.SetMax=function(t){if(t==="*"){e=!0;return}f=isNaN(i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))?100:i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)};i.SetValue=function(t){u=isNaN(i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))?r-1:i.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)};i.IsValid=function(){return u<r||u>(e===!0?u+r+10:f)?!1:!0}}return t}();t.RangeValidationRule=a;v=function(){function t(t,i){var r=this,u=undefined;r.DataType=n.DataTypeCollection.Instance[t.toUpperCase()]?n.DataTypeCollection.Instance[t.toUpperCase()]:n.DataTypeArgs.String;r.NegationObj=i;r.SetValue=function(t){var i;if((r.DataType===n.DataTypeArgs.Int||r.DataType===n.DataTypeArgs.Float)&&(r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))!==NaN&&(u=r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)),(r.DataType===n.DataTypeArgs.Date||r.DataType===n.DataTypeArgs.Time||r.DataType===n.DataTypeArgs.DateTime)&&(i=new Date(t),i.toDateString()!=="Invalid Date")){var f=i.getMonth()+1,e=i.getDate(),o=i.getFullYear(),s=i.getHours()>12?i.getHours()-12:i.getHours()==0?12:i.getHours(),h=i.getMinutes(),c=i.getHours()>=12?"PM":"AM";r.DataType===n.DataTypeArgs.Date&&(u=new String(("0"+f).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)));r.DataType===n.DataTypeArgs.Time&&(u=new String(("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c));r.DataType===n.DataTypeArgs.DateTime&&(u=new String(("0"+f).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)+" "+("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c))}r.DataType===n.DataTypeArgs.Boolean&&(typeof t=="object"&&Object.prototype.toString.call(t)==="[object Boolean]"&&(u=new Boolean(t)),(t==="true"==!0||t==="false"==!0)&&(u=new Boolean(t)));r.DataType===n.DataTypeArgs.String&&(u=new String(t))};r.IsValid=function(){var i;if(r.NegationObj){var t=$(r.NegationObj).val(),f=undefined,e=undefined;if((r.DataType===n.DataTypeArgs.Int||r.DataType===n.DataTypeArgs.Float)&&(r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))!==NaN&&(f=r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t),e=r.DataType===n.DataTypeArgs.Int?parseInt(u):parseFloat(u)),(r.DataType===n.DataTypeArgs.Date||r.DataType===n.DataTypeArgs.Time||r.DataType===n.DataTypeArgs.DateTime)&&(i=new Date(t),i.toDateString()!=="Invalid Date")){var o=i.getMonth()+1,s=i.getDate(),h=i.getFullYear(),c=i.getHours()>12?i.getHours()-12:i.getHours()==0?12:i.getHours(),l=i.getMinutes(),a=i.getHours()>=12?"PM":"AM";r.DataType===n.DataTypeArgs.Date&&(f=new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h)));r.DataType===n.DataTypeArgs.Time&&(f=new String(("0"+c).slice(-2)+":"+("0"+l).slice(-2)+" "+a));r.DataType===n.DataTypeArgs.DateTime&&(f=new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h)+" "+("0"+c).slice(-2)+":"+("0"+l).slice(-2)+" "+a));e=new String(u)}return r.DataType===n.DataTypeArgs.Boolean&&(typeof t=="object"&&Object.prototype.toString.call(t)==="[object Boolean]"&&(f=new Boolean(t),e=new Boolean(u)),(t==="true"==!0||t==="false"==!0)&&(f=new Boolean(t),e=new Boolean(u))),r.DataType===n.DataTypeArgs.String&&(f=new String(t),e=new String(u)),e!==undefined&&f!==undefined?e.valueOf()!==f.valueOf():!1}return!1}}return t}();t.NegationValidationRule=v;y=function(){function t(t,i){var r=this,u=undefined;r.DataType=n.DataTypeCollection.Instance[t.toUpperCase()]?n.DataTypeCollection.Instance[t.toUpperCase()]:n.DataTypeArgs.String;r.MatchObj=i;r.SetValue=function(t){var i;if((r.DataType===n.DataTypeArgs.Int||r.DataType===n.DataTypeArgs.Float)&&(r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))!==NaN&&(u=r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)),(r.DataType===n.DataTypeArgs.Date||r.DataType===n.DataTypeArgs.Time||r.DataType===n.DataTypeArgs.DateTime)&&(i=new Date(t),i.toDateString()!=="Invalid Date")){var f=i.getMonth()+1,e=i.getDate(),o=i.getFullYear(),s=i.getHours()>12?i.getHours()-12:i.getHours()==0?12:i.getHours(),h=i.getMinutes(),c=i.getHours()>=12?"PM":"AM";r.DataType===n.DataTypeArgs.Date&&(u=new String(("0"+f).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)));r.DataType===n.DataTypeArgs.Time&&(u=new String(("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c));r.DataType===n.DataTypeArgs.DateTime&&(u=new String(("0"+f).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)+" "+("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c))}r.DataType===n.DataTypeArgs.Boolean&&(typeof t=="object"&&Object.prototype.toString.call(t)==="[object Boolean]"&&(u=new Boolean(t)),(t==="true"==!0||t==="false"==!0)&&(u=new Boolean(t)));r.DataType===n.DataTypeArgs.String&&(u=new String(t))};r.IsValid=function(){var i;if(r.MatchObj){var t=$(r.MatchObj).val(),f=undefined,e=undefined;if((r.DataType===n.DataTypeArgs.Int||r.DataType===n.DataTypeArgs.Float)&&(r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))!==NaN&&(f=r.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t),e=r.DataType===n.DataTypeArgs.Int?parseInt(u):parseFloat(u)),(r.DataType===n.DataTypeArgs.Date||r.DataType===n.DataTypeArgs.Time||r.DataType===n.DataTypeArgs.DateTime)&&(i=new Date(t),i.toDateString()!=="Invalid Date")){var o=i.getMonth()+1,s=i.getDate(),h=i.getFullYear(),c=i.getHours()>12?i.getHours()-12:i.getHours()==0?12:i.getHours(),l=i.getMinutes(),a=i.getHours()>=12?"PM":"AM";r.DataType===n.DataTypeArgs.Date&&(f=new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h)));r.DataType===n.DataTypeArgs.Time&&(f=new String(("0"+c).slice(-2)+":"+("0"+l).slice(-2)+" "+a));r.DataType===n.DataTypeArgs.DateTime&&(f=new String(("0"+o).slice(-2)+"/"+("0"+s).slice(-2)+"/"+String(h)+" "+("0"+c).slice(-2)+":"+("0"+l).slice(-2)+" "+a));e=new String(u)}return r.DataType===n.DataTypeArgs.Boolean&&(typeof t=="object"&&Object.prototype.toString.call(t)==="[object Boolean]"&&(f=new Boolean(t),e=new Boolean(u)),(t==="true"==!0||t==="false"==!0)&&(f=new Boolean(t),e=new Boolean(u))),r.DataType===n.DataTypeArgs.String&&(f=new String(t),e=new String(u)),e!==undefined&&f!==undefined?e.valueOf()===f.valueOf():!1}return!1}}return t}();t.MatchValidationRule=y;p=function(){function t(t,i,r){var u=this,f=undefined;u.DataType=n.DataTypeCollection.Instance[t.toUpperCase()]?n.DataTypeCollection.Instance[t.toUpperCase()]:n.DataTypeArgs.String;u.Scope=i;u.ValidationMethod=r;u.SetValue=function(t){var i;if((u.DataType===n.DataTypeArgs.Int||u.DataType===n.DataTypeArgs.Float)&&(u.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t))!==NaN&&(f=u.DataType===n.DataTypeArgs.Int?parseInt(t):parseFloat(t)),(u.DataType===n.DataTypeArgs.Date||u.DataType===n.DataTypeArgs.Time||u.DataType===n.DataTypeArgs.DateTime)&&(i=new Date(t),i.toDateString()!=="Invalid Date")){var r=i.getMonth()+1,e=i.getDate(),o=i.getFullYear(),s=i.getHours()>12?i.getHours()-12:i.getHours()==0?12:i.getHours(),h=i.getMinutes(),c=i.getHours()>=12?"PM":"AM";u.DataType===n.DataTypeArgs.Date&&(f=new String(("0"+r).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)));u.DataType===n.DataTypeArgs.Time&&(f=new String(("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c));u.DataType===n.DataTypeArgs.DateTime&&(f=new String(("0"+r).slice(-2)+"/"+("0"+e).slice(-2)+"/"+String(o)+" "+("0"+s).slice(-2)+":"+("0"+h).slice(-2)+" "+c))}u.DataType===n.DataTypeArgs.Boolean&&(typeof t=="object"&&Object.prototype.toString.call(t)==="[object Boolean]"&&(f=new Boolean(t)),(t==="true"==!0||t==="false"==!0)&&(f=new Boolean(t)));u.DataType===n.DataTypeArgs.String&&(f=new String(t))};u.IsValid=function(){return u.Scope&&u.Scope[u.ValidationMethod]?u.Scope[u.ValidationMethod](f)===!0:!1}}return t}();t.CallbackValidationRule=p;w=function(){function n(n){var t=this,i="";t.ValidationPattern=n;t.SetValue=function(n){i=n===undefined?"":n};t.IsValid=function(){var n=i.match(new RegExp(t.ValidationPattern,"i"));return n!==undefined&&n!==null&&n.length>0}}return n}();t.RegExValidationRule=w;s=function(){function n(n){var t=this;t.MaskElement=document.createElement("div");t.MaskElement.classList.add("modal-mask");t.MaskElement.classList.add(n)}return n}();t.ModalMask=s,function(n){n[n.URL=1]="URL";n[n.Hash=2]="Hash";n[n.Method=3]="Method"}(t.MenuItemCommandTypeArgs||(t.MenuItemCommandTypeArgs={}));u=t.MenuItemCommandTypeArgs;nt=function(){function n(n){var t=this;if(n!==undefined)try{t.MenuItemID=n.MenuItemID;t.MenuGroup=n.MenuGroup;t.ControlID=n.ControlID;t.ApplySeparator=n.ApplySeparator;t.Controller=n.Controller;t.CommandType=n.CommandType;t.Command=n.Command;t.MenuIcon=n.MenuIcon;t.LabelText=n.LabelText;t.IsActive=n.IsActive;t.CreatedBy=n.CreatedBy;t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date(n.DateCreated));t.UpdatedBy=n.UpdatedBy;t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date(n.DateUpdated))}catch(i){t.MenuItemID=0;t.MenuGroup="";t.ControlID="";t.ApplySeparator=!1;t.Controller="";t.CommandType=u.Hash;t.Command="";t.MenuIcon="";t.LabelText="";t.IsActive=!0;t.CreatedBy=0;t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date);t.UpdatedBy=0;t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date)}else t.MenuItemID=0,t.MenuGroup="",t.ControlID="",t.ApplySeparator=!1,t.Controller="",t.CommandType=u.Hash,t.Command="",t.MenuIcon="",t.LabelText="",t.IsActive=!0,t.CreatedBy=0,t.DateCreated=Krodzone.KrodzoneDate.toDateTimeString(new Date),t.UpdatedBy=0,t.DateUpdated=Krodzone.KrodzoneDate.toDateTimeString(new Date);t.toLineItem=function(){var i=document.createElement("li"),n=document.createElement("a"),r='<i class="fa '+t.MenuIcon+'"><\/i>&nbsp;&nbsp;';switch(t.CommandType){case u.Hash:n.href=t.Command;break;case u.URL:n.href=t.Command;break;case u.Method:$(n).css("cursor","pointer")}return t.ApplySeparator===!0&&$(i).addClass("mnu-separator"),n.innerHTML=r+t.LabelText,i.id=t.ControlID,i.appendChild(n),i}}return n.toArray=function(t){var u=[],i,r,f;if(t!==undefined){try{i=typeof t=="string"?JSON.parse(t):t}catch(e){i=undefined}if(i!==undefined&&i.length!==undefined)for(r=0;r<i.length;r++)f=new n(i[r]),u.push(f)}return u},n}();t.MenuItem=nt;tt=function(){function n(n,t){var i=this;i.Sender=n;i.Model=t}return n}();t.ContextMenuCallbackArgs=tt;it=function(){function n(n,t){var i=this;i.ElementID=n;i.ItemCallback=t}return n}();t.ContextMenuCallback=it;rt=function(t){function i(i,r){var f,o,e;if(t.call(this),this.CreateMenu=function(n){var t=document.createElement("div"),i;return n!==undefined&&n.length>0?(i=document.createElement("ul"),n.forEach(function(n){i.appendChild(n.toLineItem())}),t.appendChild(i)):($(t).css("text-align","center"),$(t).html("<h4>Unable to Create Menu<\/h4>")),t},f=this,o=!1,f.Model=r,f.MenuItems=i,document.getElementsByTagName("body")[0].onclick=function(){setTimeout(function(){o?o=!1:$("body").find(f.Menu).length&&document.getElementsByTagName("body")[0].removeChild(f.Menu)},100)},f.ShowMenu=function(n){$("body").find("context-menu").length&&document.getElementsByTagName("body")[0].removeChild($("context-menu")[0]);setTimeout(function(){var t=f.GetElementCoordinates(n);$(f.Menu).css("position","absolute");$(f.Menu).css("left",t.X);$(f.Menu).css("top",t.Y);$(f.Menu).css("display","block");document.getElementsByTagName("body")[0].appendChild(f.Menu)},200)},f.Menu=document.createElement("context-menu"),f.Menu.appendChild(f.CreateMenu(f.MenuItems)),f.MenuItems!==undefined&&f.MenuItems.length>0)for(e=0;e<f.MenuItems.length;e++)(function(t){var i=f.MenuItems[t];if(i.CommandType===u.Method&&$(f.Menu).find('[id="'+i.ControlID+'"]').length)$(f.Menu).find('[id="'+i.ControlID+'"]').on("click",function(){n.Application.Applications!==undefined&&n.Application.Applications.length>0&&n.Application.Applications.forEach(function(n){var t=controllerFetcher(i.Controller,n.Controllers);t!==undefined&&t.Scope[i.Command](f)})})})(e)}return __extends(i,t),i}(f);t.ContextMenu=rt})(t=n.Views||(n.Views={}))}(KrodSpa||(KrodSpa={})),function(n){var t,i,r;(function(n){n[n.Sunday=0]="Sunday";n[n.Monday=1]="Monday";n[n.Tuesday=2]="Tuesday";n[n.Wednesday=3]="Wednesday";n[n.Thursday=4]="Thursday";n[n.Friday=5]="Friday";n[n.Saturday=6]="Saturday"})(n.DayOfWeek||(n.DayOfWeek={}));t=n.DayOfWeek;i=function(){function n(t){n.dateValid(t)||(t=new Date);this.CurrentDate=t;this.Month=this.CurrentDate.getMonth()+1;this.Day=this.CurrentDate.getDate();this.Year=this.CurrentDate.getFullYear();this.DOW=this.CurrentDate.getDay();this.CurrentTime=new r(t)}return n.prototype.setDate=function(t){n.dateValid(t)&&(this.CurrentDate=t,this.Month=this.CurrentDate.getMonth()+1,this.Day=this.CurrentDate.getDate(),this.Year=this.CurrentDate.getFullYear(),this.DOW=this.CurrentDate.getDay(),this.CurrentTime.setTime(this.CurrentDate))},n.prototype.toShortDateString=function(){return("0"+this.Month).slice(-2)+"/"+("0"+this.Day).slice(-2)+"/"+String(this.Year)},n.prototype.toDateTimeString=function(){return this.toShortDateString()+" "+this.CurrentTime.toTimeString()},n.prototype.toString=function(){return"KrodzoneDate ("+this.toShortDateString()+")"},n.toShortDateString=function(t){n.dateValid(t)||(t=new Date);var i=t.getMonth()+1,r=t.getDate(),u=t.getFullYear();return("0"+i).slice(-2)+"/"+("0"+r).slice(-2)+"/"+String(u)},n.toDateTimeString=function(t){n.dateValid(t)||(t=new Date);var i=t.getMonth()+1,r=t.getDate(),u=t.getFullYear(),f=t.getHours()>12?t.getHours()-12:t.getHours()==0?12:t.getHours(),e=t.getMinutes(),o=t.getHours()>=12?"PM":"AM";return("0"+i).slice(-2)+"/"+("0"+r).slice(-2)+"/"+String(u)+" "+("0"+f).slice(-2)+":"+("0"+e).slice(-2)+" "+o},n.dateDiff=function(t,i,r){var s,h,c,l,a,v,e,o,u,f,y,p,w,b;if(!n.dateValid(i)||!n.dateValid(r))return-1;switch(t){case"DAY":if(e=Math.ceil((i.getFullYear()-1900)*365.25+i.getDate()),o=Math.ceil((r.getFullYear()-1900)*365.25+r.getDate()),i.getMonth()-1>=0)for(u=i.getMonth()-1;u>=0;)e+=n.daysInMonth(new Date(u+1+"/1/"+i.getFullYear())),u--;if(r.getMonth()-1>=0)for(f=r.getMonth()-1;f>=0;)o+=n.daysInMonth(new Date(f+1+"/1/"+r.getFullYear())),f--;return o-e;case"MONTH":return s=i.getMonth(),h=r.getMonth(),h-s;case"YEAR":return c=i.getFullYear(),l=r.getFullYear(),l-c;case"HOUR":return a=i.getHours(),v=r.getHours(),v-a;case"MINUTES":if(e=Math.ceil((i.getFullYear()-1900)*365.25+(i.getDate()-1)),o=Math.ceil((r.getFullYear()-1900)*365.25+(r.getDate()-1)),i.getMonth()-1>=0)for(u=i.getMonth()-1;u>=0;)e+=n.daysInMonth(new Date(u+1+"/1/"+i.getFullYear())),u--;if(r.getMonth()-1>=0)for(f=r.getMonth()-1;f>=0;)o+=n.daysInMonth(new Date(f+1+"/1/"+r.getFullYear())),f--;return y=i.getMinutes()+i.getHours()*60+e*1440,p=r.getMinutes()+r.getHours()*60+o*1440,p-y;case"SECONDS":return w=i.getSeconds(),b=r.getSeconds(),b-w;default:return-1}},n.dateAdd=function(t,i,r){var y,v,a,p,w,b,l;if(!n.dateValid(r)||isNaN(i))return new Date("1/1/1900");var o=r.getDate(),u=r.getMonth(),f=r.getFullYear(),e=r.getHours(),s=r.getMinutes(),c=r.getSeconds(),h=0,k=function(t){var i=n.daysInMonth(r),l;if(t<0){if(o+t<=0){for(h=t+o===0?i:t+o;h<=0;)f=u+1==1?f-1:f,u=u+1==1?11:u-1,i=n.daysInMonth(new Date(u+1+"/1/"+f)),h=h+i===0?i:h+i;return l=u+1+"/"+h+"/"+f+" "+e+":"+s+":"+c,new Date(l)}return h=o+t,l=u+1+"/"+h+"/"+f+" "+e+":"+s+":"+c,new Date(l)}if(o+t>i){for(h=o+t;h>i;)f=u+1==12?f+1:f,u=u+1==12?0:u+1,h-=i,i=n.daysInMonth(new Date(u+1+"/1/"+f));return l=u+1+"/"+h+"/"+f+" "+e+":"+s+":"+c,new Date(l)}return l=u+1+"/"+(o+t)+"/"+f+" "+e+":"+s+":"+c,new Date(l)},nt=function(t){var h,l;if(u+t>=12){var v=12-(u+1),r=t-v,i=Math.floor(r/12);return r=r-i*12,i+=f+1,h=n.daysInMonth(new Date(r+"/1/"+i)),l=o>h?r+"/"+h+"/"+i+" "+e+":"+s+":"+c:r+"/"+o+"/"+i+" "+e+":"+s+":"+c,new Date(l)}if(u+t<0){var r=Math.abs(t)-(u+1),i=Math.floor(r/12),a=12-(r-i*12);return i=f-(i+1),h=n.daysInMonth(new Date(a+"/1/"+i)),l=o>h?a+"/"+h+"/"+i+" "+e+":"+s+":"+c:a+"/"+o+"/"+i+" "+e+":"+s+":"+c,new Date(l)}return l=u+t+1+"/"+o+"/"+f+" "+e+":"+s+":"+c,new Date(l)},d=function(t){var p,w,a;if(e+t>23){if(p=n.daysInMonth(r),w=Math.floor((e+t)/24),t=e+t-w*24,o+w>p){for(h=o+w;h>p;)f=u+1==12?f+1:f,u=u+1==12?0:u+1,h-=p,p=n.daysInMonth(new Date(u+1+"/1/"+f));return a=u+1+"/"+h+"/"+f+" "+t+":"+s+":"+c,new Date(a)}var i=f,l=u+1,v=o,y=e;return t<0?(i=Math.abs(t)>e?e===0?o===1?u===0?f-1:f:f:f:f,l=Math.abs(t)>e?e===0?o===1?u===0?12:u:u+1:u+1:u+1,v=Math.abs(t)>e?e===0?o===1?n.daysInMonth(new Date(l+"/1/"+i)):o:o:o,y=Math.abs(t)>e?e-(Math.abs(t)-e)<0?23-(e-(Math.abs(t)-e)):e-(Math.abs(t)-e):e+t):(i=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?f+1:f:f:f,l=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?1:u+2:u+1:u+1,v=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?1:o+1:o,y=t+e>23?t+e-23:t+e),a=l+"/"+v+"/"+i+" "+y+":"+s+":"+c,new Date(a)}var i=f,l=u+1,v=o,y=e;return t<0?(i=Math.abs(t)>e?e===0?o===1?u===0?f-1:f:f:f:f,l=Math.abs(t)>e?e===0?o===1?u===0?12:u:u+1:u+1:u+1,v=Math.abs(t)>e?o===1?n.daysInMonth(new Date(l+"/1/"+i)):o-1:o,y=Math.abs(t)>e?24+(e+t):e+t):(i=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?f+1:f:f:f,l=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?1:u+2:u+1:u+1,v=t+e>23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?1:o+1:o,y=t+e>23?t+e-23:t+e),a=l+"/"+v+"/"+i+" "+y+":"+s+":"+c,new Date(a)},g=function(t){var i,a,v,l;if(s+t>60){if(i=Math.floor((s+t)/60),t=s+t-i*60,e+i>23){if(a=n.daysInMonth(r),v=Math.floor((e+i)/24),i=e+i-v*24,o+v>a){for(h=o+v;h>a;)f=u+1==12?f+1:f,u=u+1==12?0:u+1,h-=a,a=n.daysInMonth(new Date(u+1+"/1/"+f));return l=u+1+"/"+h+"/"+f+" "+i+":"+t+":"+c,new Date(l)}return l=u+1+"/"+(o+v)+"/"+f+" "+i+":"+t+":"+c,new Date(l)}return l=u+1+"/"+o+"/"+f+" "+(e+i)+":"+t+":"+c,new Date(l)}var y=f,p=u+1,w=o,b=e,k=s;return t<0?(y=Math.abs(t)>s?e===0?o===1?u===0?f-1:f:f:f:f,p=Math.abs(t)>s?e===0?o===1?u===0?12:u:u+1:u+1:u+1,w=Math.abs(t)>s?e===0?o===1?n.daysInMonth(new Date(p+"/1/"+y)):o:o:o,b=Math.abs(t)>s?e===0?23:e-1:e,k=Math.abs(t)>s?60+(s+t):s+t):(y=s+t>60?e===23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?f+1:f:f:f:f,p=s+t>60?e===23?o===n.daysInMonth(new Date(u+1+"/1/"+f))?u===11?1:u+1:u+1:u+1:u+1,w=s+t>60?e===23?o===n.daysInMonth(new Date(p+"/1/"+y))?1:o:o:o,b=s+t>60?e===23?0:e:e,k=s+t>60?60-(s+t):s+t),l=p+"/"+w+"/"+y+" "+b+":"+k+":"+c,new Date(l)};switch(t){case"DAY":return k(i);case"MONTH":return nt(i);case"YEAR":return l=u+1+"/"+o+"/"+(f+i)+" "+e+":"+s+":"+c,new Date(l);case"HOUR":return Math.abs(i)>=24?(v=i<0?Math.ceil(i/24):Math.floor(i/24),r=k(v),o=r.getDate(),u=r.getMonth(),f=r.getFullYear(),e=r.getHours(),s=r.getMinutes(),c=r.getSeconds(),h=0,i=i<0?Math.ceil(i-v*24):Math.floor(i-v*24),d(i)):d(i);case"MINUTES":return Math.abs(i)>=60?(y=i<0?Math.ceil(i/60):Math.floor(i/60),v=0,Math.abs(y)>=24&&(v=y<0?Math.ceil(y/24):Math.floor(y/24),y-=v*24,r=k(v),o=r.getDate(),u=r.getMonth(),f=r.getFullYear(),e=r.getHours(),s=r.getMinutes(),c=r.getSeconds(),h=0),Math.abs(y)>0&&(r=d(y),o=r.getDate(),u=r.getMonth(),f=r.getFullYear(),e=r.getHours(),s=r.getMinutes(),c=r.getSeconds(),h=0),i-=v*1440+y*60,g(i)):g(i);case"SECONDS":if(c+i>60){if(a=Math.floor((c+i)/60),i=c+i-a*60,s+a>60){if(p=Math.floor((s+a)/60),a=s+a-p*60,e+p>23){if(w=n.daysInMonth(r),b=Math.floor((e+p)/24),p=e+p-b*24,o+b>w){for(h=o+b;h>w;)f=u+1==12?f+1:f,u=u+1==12?0:u+1,h-=w,w=n.daysInMonth(new Date(u+1+"/1/"+f));return l=u+1+"/"+h+"/"+f+" "+p+":"+a+":"+i,new Date(l)}return l=u+1+"/"+(o+b)+"/"+f+" "+p+":"+a+":"+i,new Date(l)}return l=u+1+"/"+o+"/"+f+" "+(e+p)+":"+a+":"+i,new Date(l)}return l=u+1+"/"+o+"/"+f+" "+e+":"+(s+a)+":"+i,new Date(l)}return l=u+1+"/"+o+"/"+f+" "+e+":"+s+":"+(c+i),new Date(l);default:return new Date("1/1/1900")}},n.isLeapYear=function(n){return isNaN(n)?!1:new Date(n,1,29).getMonth()==1},n.daysInMonth=function(t){var r;if(!n.dateValid(t))return 0;var u=t.getMonth(),f=t.getFullYear(),i=0;return i=n.isLeapYear(f)?29:28,r=[31,i,31,30,31,30,31,31,30,31,30,31],r[u]},n.dateValid=function(n){var t=!1,i;try{i=new Date(n);t=i.toDateString()!="Invalid Date"?!0:!1}catch(r){t=!1}return t},n.firstDayOfMonth=function(t){n.dateValid(t)||(t=new Date);var i=t.getMonth()+1,r=t.getFullYear();return("0"+i).slice(-2)+"/01/"+String(r)},n.lastDayOfMonth=function(t){n.dateValid(t)||(t=new Date);var i=t.getMonth()+1,r=n.daysInMonth(t),u=t.getFullYear();return("0"+i).slice(-2)+"/"+("0"+r).slice(-2)+"/"+String(u)},n.isWeekDay=function(i){if(n.dateValid(i)){var u=new Date(i),r=u.getDay();return r!==t.Sunday&&r!==t.Saturday}return!1},n.isWeekendDay=function(i){if(n.dateValid(i)){var u=new Date(i),r=u.getDay();return r===t.Sunday||r===t.Saturday}return!1},n.getDayOfWeek=function(t){if(n.dateValid(t)){var i=new Date(t);return i.getDay()}return undefined},n}();n.KrodzoneDate=i;r=function(){function n(n){i.dateValid(n)||(n=new Date);this.Hour=n.getHours()>12?n.getHours()-12:n.getHours()==0?12:n.getHours();this.Minutes=n.getMinutes();this.Seconds=n.getSeconds();this.Meridian=n.getHours()>=12?"PM":"AM"}return n.prototype.setTime=function(n){i.dateValid(n)&&(this.Hour=n.getHours()>12?n.getHours()-12:n.getHours()==0?12:n.getHours(),this.Minutes=n.getMinutes(),this.Seconds=n.getSeconds(),this.Meridian=n.getHours()>=12?"PM":"AM")},n.prototype.toHourString=function(){return("0"+this.Hour).slice(-2)},n.prototype.toMinuteString=function(){return("0"+this.Minutes).slice(-2)},n.prototype.toTimeString=function(){return(this.Hour<10?"0"+this.Hour:this.Hour)+":"+(this.Minutes<10?"0"+this.Minutes:this.Minutes)+" "+this.Meridian},n.toTimeString=function(n){i.dateValid(n)||(n=new Date);var t=n.getHours()>12?n.getHours()-12:n.getHours()==0?12:n.getHours(),r=n.getMinutes(),u=n.getHours()>=12?"PM":"AM";return("0"+t).slice(-2)+":"+("0"+r).slice(-2)+" "+u},n}();n.KrodzoneTime=r}(Krodzone||(Krodzone={}));